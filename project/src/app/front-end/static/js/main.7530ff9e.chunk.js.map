{"version":3,"sources":["initStylesMUI.js","reducers/auth.js","reducers/journal.js","reducers/filtersReducer.ts","reducers/collapsableMenuReducer.js","reducers/wrapperReducer.js","reducers/stepperReducer.js","reducers/index.js","store/index.js","utils/defaultErrorHandler.js","constants/index.js","utils/commonFormFunctions.js","customGlobalHistory.js","constants/yup.js","components/modalWrapper/utils/constructRequest.js","components/ShadowedOutlinedButton.js","components/modalWrapper/buttons/index.js","components/completePromiseThenRenderComponent.js","components/formikMUi/utils/initialValuesUtils.js","components/modalWrapper/utils/constructConfigArrayForLoaderComponent.js","components/formikMUi/utils/checkIfFieldHasValidationError.js","components/formikMUi/wrappedComponents/wrappedTextField.js","components/reactSelectMUI.js","components/formikMUi/utils/wrappedFunctions.js","components/formikMUi/wrappedComponents/wrappedReactSelect.js","components/maskedInputMUI.tsx","components/formikMUi/wrappedComponents/wrappedMaskedInputMUI.js","components/formikMUi/wrappedComponents/wrappedCheckBoxMUI.js","components/formikMUi/utils/downLoad.js","components/formikMUi/wrappedComponents/wrappedReactDropZoneMUI.js","components/formikMUi/utils/isValueUnique.js","components/IntegrateDateRangePickerWithMUI/defaultRanges.js","components/IntegrateDateRangePickerWithMUI/index.js","components/IntegrateDatePickerWithMUI/index.js","components/formikMUi/renderField.js","components/formikMUi/variants/table/renderTableForm.js","components/formikMUi/utils/calcFieldWidth.js","components/formikMUi/renderBlock.js","components/formikMUi/variants/block/blockForm.js","components/formikMUi/variants/xmlToForm/utils/dependenciesUt.js","components/formikMUi/variants/xmlToForm/utils/constructKeyForRow.js","components/formikMUi/wrappedComponents/IMaskedRegExpFilteredTextField.js","components/formikMUi/variants/xmlToForm/utils/getMask.js","components/regExpFilteredTextField.js","components/formikMUi/variants/xmlToForm/utils/validateField.js","components/formikMUi/variants/xmlToForm/elementRenders/renderField.js","components/formikMUi/variants/xmlToForm/utils/find.js","components/formikMUi/variants/xmlToForm/elementRenders/renderRow.js","components/formikMUi/variants/xmlToForm/utils/reconstructDescription.js","components/formikMUi/variants/xmlToForm/elementRenders/renderBlock.js","components/formikMUi/variants/xmlToForm/renderXmlDescribedForm.js","components/formikMUi/validationErrorFocus.js","components/formikMUi/formikNewRealisation.js","components/modalWrapper/renderModalContent.js","components/modalWrapper/renderModalContentWithOutTabs.js","components/modalWrapper/utils/computePropsForForMikMUI.js","constants/masks/index.js","constants/widths/index.js","constants/rebuildRecieved/index.js","constants/baseFieldProps/index.js","constants/pages/users/form.js","constants/pages/users/journal.js","components/sysSettingsConfig.js","constants/pages/settings/journal.js","constants/pages/management/members/additionalButtons.js","constants/pages/management/members/form.js","constants/pages/management/members/journal.js","constants/pages/management/services/form.js","constants/pages/management/services/journal.js","constants/pages/management/mvExchange/form.js","constants/pages/management/mvExchange/journal.js","constants/pages/management/nsi/form.js","constants/pages/management/nsi/journal.js","components/stepperMUI/reducer.js","components/stepperMUI/until.js","components/schedule/types.ts","components/stepperMUI/index.js","components/reports/DownloadReportButtons.js","constants/pages/statistics/reports/filters.js","constants/pages/statistics/reports/journal.js","constants/pages/statistics/logMV/forms.js","constants/pages/statistics/logMV/journal.js","components/IntegrateDatePickerWithMUI/inlineReactDateRange.js","components/schedule/dayCell.tsx","components/schedule/monthWordCell.tsx","components/schedule/headerRenderer.tsx","components/schedule/tableReducer.ts","components/schedule/eventTimeCell.tsx","components/schedule/EventTypeCell.tsx","components/schedule/eventPerformersCell.tsx","components/schedule/dutiesCell.tsx","actions/typedActions.ts","components/schedule/actionButtons.tsx","components/schedule/ScheduleTable.tsx","components/schedule/formatters.ts","components/schedule/scheduleJournal.tsx","constants/pages/schedule/journal.js","constants/pages/churchStructure/hramTab.js","constants/pages/churchStructure/forms.js","constants/pages/churchStructure/journal.js","constants/pages/directory/actionType/form.js","constants/pages/directory/actionType/journal.js","constants/pages/library/forms.js","constants/pages/library/journal.js","constants/pages/claim/form.js","constants/pages/claim/journal.js","constants/pages/claim/new/journal.js","constants/pages/claim/inWork/journal.js","constants/pages/claim/free/journal.js","constants/pages/claim/completed/journal.js","constants/intialParameters.js","actions/index.js","components/login.js","components/snackBar.js","components/CollapsableMenuContainer/RenderCollapsibleMenuItem.js","components/CollapsableMenuContainer/index.js","components/confirmDialog.js","components/confirmDialogFormik.js","components/appBar/AppBar.js","components/filter-panel/index.js","components/modalWrapper/index.js","components/PaginatedTable.js","components/journal/additionalButtons.js","components/journal/index.js","components/no-match.js","components/wrapper/getJournalMainContent.js","components/schedule/dialogs/scheduleCreationMaster.tsx","components/wrapper/index.js","components/modalWrapper/utils/customRouteParametersHandler.js","components/PrivateRoute.js","components/App.js","serviceWorker.js","index.js"],"names":["install","initialState","accessToken","isAuthenticated","errorMessage","role","surnameInitials","functions","userId","previousUserId","fetchedData","sortable","modalState","openedModals","openedTab","newEntity","baseUrl","computedUrl","pagination","rowsPerPage","page","computedFilters","isCollapsed","optionsMap","expandedIndex","value","isMenuMinimized","currentlyActiveIndex","confirmDialog","open","title","mainText","primaryButtonText","secondaryButtonText","primaryButtonHandler","confirmDialogFormik","formObj","blocks","isSnackBarOpened","message","allowedActions","scheduleCreationMasterIsOpen","activeStep","passProps","combineReducers","auth","state","arguments","length","undefined","action","type","SET_ACCESS_TOKEN","Object","objectSpread","payload","SET_AUTHENTICATED","SET_AUTH","_action$payload","SET_CURRENT_USER_OBJECT","_action$payload2","memberId","memberFullName","SET_LOGIN_ERROR_MESSAGE","journalReducer","SAVE_FETCHED_DATA","SET_SORT","desiredIndex","findIndex","el","path","concat","newState","slice","filter","sort","SET_SORTABLE","RESET_SORTABLE","POP_HEAD_MODAL","PUSH_MODAL","toConsumableArray","key","uuidV4","REPLACE_HEAD_MODAL","res","MODAL_TAB_HAS_CHANGED","SET_MODAL_STATE_INITIAL_VALUES","initialValues","SET_COMPUTED_URL","SET_ROWS_PER_PAGE","SET_PAGE","NEXT_PAGE","PREVIOUS_PAGE","SET_BASE_URL","filtersReducer","TOGGLE_IS_COLLAPSED","RESET_COMPUTED_FILTERS","SET_COMPUTED_FILTERS","SET_FILTERS_OPTIONS_MAP","collapsableMenuReducer","SET_EXPANDED_INDEX","TOOGLE_MENU_COLLAPSED","stepperReducer","SET_ACTIVE_STEP","wrapperReducer","TOGGLE_SNACKBAR","TOGGLE_CONFIRM_DIALOG","mainContent","primaryButtonDisabled","DISABLE_PRIMARY_BTN_CONFIRM_DIALOG","HIDE_CONFIRM_DIALOG","OPEN_CONFIRM_DIALOG_FORMIK","rest","objectWithoutProperties","CLOSE_CONFIRM_DIALOG_FORMIK","SET_ALLOWED_ACTIONS","OPEN_SCHEDULE_CREATION_MASTER","CLOSE_SCHEDULE_CREATION_MASTER","persistConfig","storage","persistedReducer","persistReducer","reducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","persistor","persistStore","handleErrorStatus","status","Promise","resolve","dispatchOpenSnackBar","defaultErrorHandler","error","response","data","baseDictResponseRefactor","values","_embedded","baseDictRebuildReceivedOption","_ref","label","uniqueId","baseDictRebuildReceivedOptions","map","_ref2","getAuth","getState","getUserFunctions","disableConfirmDialogPrimaryBtn","dispatch","openSnackBar","dispatchOpenConfirmDialogFormik","openConfirmDialogFormik","dispatchFetchJournalData","fetchJournalData","dispatchPopHeadModal","popHeadModal","callDefaultErrorHandlerThenPopModal","er","then","getAllowedActionsOnPageForCurrentUser","requiresFunction","actionsSet","functionName","includes","forEach","push","constructAllowedActionsForAllJournals","initParams","result","keys","category","pages","allowedActionsForCategory","pageKeys","allAllowedActionsOnPage","getAllAllwedActionForCategory","naturalOrder","_ref3","_ref4","a","b","wrapBaseDictReceivedReceivedOptions","options","loaded","wrappedRebuildReceivedOptions","rebuildReceivedOptions","findFieldsWithDictThenConstructArrayToDownload","_ref5","configArray","_ref6","fields","_ref7","name","dictUrl","whereToStore","urlToDownload","rebuildReceivedValue","findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks","_ref8","field","extractPayloadFromBaseSpringDateRestStructure","createBrowserHistory","Yup","mixed","required","number","min","positive","negative","integer","string","url","constructRequest","axiosConfig","handleResponse","hideModal","setSubmitting","axios","catch","withStyles","root","boxShadow","withTheme","onClick","children","color","classes","react_default","createElement","core_index_es","assign","variant","cancelButton","actionHandler","text","components_ShadowedOutlinedButton","PrimaryButton","disabled","defaultProps","deleteButton","openEditButton","_ref2$text","modal","popHeadModalThenPushModal","defaultPreloader","_ref$size","size","justify","alignContent","direction","alignItems","container","style","height","CompletePromiseThenRenderComponent","config","errorHandler","_ref2$PreloaderCompon","PreloaderComponent","CircularProgress","Component","rebuildDownloadedObj","_useState","useState","_useState2","slicedToArray","isLoading","setIsLoading","_useState3","_useState4","downloaded","setDownloaded","useEffect","localDownloaded","onAdditionalDemandConfig","source","CancelToken","all","item","get","cancelToken","token","index","postLoadDoSomethingThenPassResultAsProp","extendAdditionalOnDemandConfig","set","func","passResultAs","r","isCancel","console","log","cancel","constructFieldInitialValue","userFunctions","defaultValue","multiple","constructInitialValuesForEmptyForm","baseRebuildReceivedInitialValues","receivedInitialValues","resultingInitialValues","Array","isArray","rebuildDownloadedInitialValue","getInitialValues","identifier","customId","urlToDownloadWithOutProjection","projection","checkIfFieldHasValidationError","touched","errors","isFieldTouched","Boolean","helperText","WrappedTextField","_ref$form","form","multiline","props","textFieldProps","margin","useStyles","makeStyles","theme","flexGrow","input","display","padding","valueContainer","flexWrap","flex","overflow","chip","spacing","unit","chipFocused","backgroundColor","emphasize","palette","grey","noOptionsMessage","singleValue","fontSize","placeholder","position","left","paper","zIndex","marginTop","right","divider","inputComponent","inputRef","ref","components","Control","heigthCalc","isMulti","TextField_default","fullWidth","InputProps","inputProps","className","selectProps","innerRef","innerProps","Menu","Paper_default","square","MultiValue","Chip_default","tabIndex","classNames","defineProperty","isFocused","onDelete","removeProps","deleteIcon","Cancel_default","NoOptionsMessage","Typography_default","Option","Tooltip_default","MenuItem_default","buttonRef","selected","component","fontWeight","isSelected","Placeholder","SingleValue","ValueContainer","ReactSelectMUI","isDisabled","handleChange","onBlur","menuPortalTarget","useTheme","selectStyles","base","primary","& input","font","react_select_esm","styles","isClearable","InputLabelProps","shrink","onChange","closeMenuOnSelect","menuPosition","menuPlacement","wrappedSetStatus","setStatus","changedStatusProps","WrappedReactSelect","resName","_ref$field","customOptionsName","hardCodedOptions","setFieldTouched","setFieldValue","customOnChange","test","tmpName","split","placeHolderText","onMenuClose","TextMaskCustom","mask","pipe","showMask","other","reactTextMask_default","inputElement","MaskedInputMUI","_ref3$label","keepCharPositions","WrappedMaskedInputMUI","maskedInputMUI_MaskedInputMUI","WrappedCheckBoxMUI","validateField","_ref$disabled","control","indeterminate","checked","downloadFile","fileName","method","responseType","blobUrl","window","URL","createObjectURL","Blob","link","document","href","setAttribute","body","appendChild","click","e","urlToDownLoadClaimAttachmentFromFtp","_value$","claimUuid","claimAttachmentDownloadUrl","uuidClaim","baseStyle","borderWidth","borderColor","borderStyle","borderRadius","activeStyle","background","transition","rejectStyle","textStyle","marginLeft","WrappedReactDropZoneMUI","controlLabel","onDrop","customUrlToDownLoadFile","accept","fileId","_checkIfFieldHasValid","react_dropzone_dist_es","maxSize","getRootProps","getInputProps","isDragAccept","isDragReject","acceptedFiles","rejectedFiles","top","Fragment","icons_index_es","align","event","stopPropagation","fieldLevelUniqueCheck","defineds","startOfWeek","Date","endOfWeek","startOfLastWeek","addDays","endOfLastWeek","startOfToday","startOfDay","endOfToday","endOfDay","startOfYesterday","endOfYesterday","startOfMonth","endOfMonth","startOfLastMonth","addMonths","endOfLastMonth","staticRangeHandler","range","definedRange","this","isSameDay","startDate","endDate","defaultStaticRanges","defaultInputRanges","Math","max","Number","getCurrentValue","differenceInCalendarDays","today","getStyles","button","buttonPanel","borderTop","popper","IntegrateDateRangePickerWithMUI","setOpen","pickerProps","_props$form","_props$field","readOnly","errorHelperTextProps","selection","dateRange","setDateRange","textFieldValue","format","parse","containerRef","useRef","anchorEl","current","placement","TransitionProps","timeout","onClickAway","react_date_range_dist","ranges","staticRanges","inputRanges","v","IntegrateDatePickerWithMUI","date","setDate","formatDateDisplay","createUniqueCheckFunction","uniqueCheck","constructParams","params","renderField","additionalProps","formik_esm","validate","fieldLevelReadOnly","locale","moveRangeOnFirstSelection","showDateDisplay","files","FormData","append","doBeforeSetFieldValue","baseOnDrop","Error","isDeleted","border","listSubItem","width","headerItem","listItem","lastItem","paddingTop","justifyContent","paddingBottom","removeBtn","fabContainer","marginBottom","minWidth","minHeight","header","borderBottom","deleteBtn","secondaryAction","paddingRight","paddingLeft","previousValuesLength","RenderTableForm","arrayHelpersRef","confObj","fistFieldArray","emptyFieldArrayObj","createEmptyFieldArrayObj","addBtnRef","maxCountOfColumns","_ref2$width","hidden","widths","minColumnWidth","_ref3$width","scrollIntoView","behavior","disableGutters","_ref4$hidden","classnames","render","arrayHelpers","row","fieldIndex","CustomComponent","replace","aria-label","calcFieldWidth","xs","sm","md","lg","xl","RenderBlock","connect","_ref$block","block","blockTitle","conditionallyRender","bIndex","_ref$formik","formik","_ref$formik$status","registeredFields","toUpperCase","uuidv4","RenderBlockForm","handleSubmit","onSubmit","renderBlock_RenderBlock","defineItemVisibility","visual","indexOf","dependenciesMet","dependencies","checkDependencies","initialObj","currentValues","results","dep","dependency","dependencyRef","depName","depRefs","getValuesFromObjectByKey","findDependencyByName","multy","itemValues","itemName","getCurrentValuesFromMultyItems","condition","every","val","some","currentValue","valueName","checkDependency","getValuesFromObjectByKeyReccursion","obj","predicate","tKey","makeArrayFromObject","elem","nameKeyReducer","accumulator","constructKeyForRow","attribute","reduce","IMaskedRegExpFilteredTextField","react_imask","lazy","unmask","email","getMask","phone","daterange","startsWith","substr","strReducer","RegExpFilteredTextField","regExp","maxLength","fieldToTextField","target","filteredValue","matchedSymbols","match","suffix","_field$type","minlength","maxlength","regular","typeName","reconstructedRegular","endsWith","RegExp","foundLowerAttrs","statement","foundAttrs","attributes","group","findAllAttributesByPredicate","superAttributeName","lowerAttrName","loadNsiOptions","nsiName","superNsiName","superNsiValue","dictionary","RenderField","customName","_ref4$formik","_ref4$formik$status","allowedpattern","elements","element","_field$type2","nameTag","superFieldValue","hasIn","nsiMasterName","foundAtr","find","findAttributeByPredicate","TextField","rowsMax","Content-Type","saveFile","lastModified","valueOf","progress","complete","_field$type3","more","less","minDate","construct","reverse","maxDate","multiItems","validateOnChange","remove","fieldArrValues","renderedMultyItems","fIndex","renderMultyItems","RenderRow","HtmlToReactParser","HtmlToReact","Parser","getRegEx","search","ReconstructDescription","htmlInput","light","_props$block","description","reconstructDescription","renderRow_RenderRow","RenderXmlDescribedForm","info","elementRenders_renderBlock_RenderBlock","ErrorFocus","prevProps","_prevProps$formik","isSubmitting","isValidating","selector","errorElement","querySelector","focus","React","ValidationErrorFocus","FormikMUI","bindFormSubmit","enableReinitialize","additionalStatusProps","bindIsSubmitting","bindDirty","enableStatusReinitialize","customInitialRegister","check","initRegisteredFields","validateOnBlur","validationSchema","initialStatus","submitForm","dirty","isEqual","blockForm_RenderBlockForm","renderTableForm_RenderTableForm","renderXmlDescribedForm_RenderXmlDescribedForm","DialogTitleRoot","closeBtn","tabTitle","RenderModalContent","closeHandler","tabs","firstFormInitialValues","actionButtons","additionalActionButtonsDependedOnProps","activeTab","setActiveTab","setIsSubmitting","arrayOfRefsToFormSubmitFunc","functionToExecuteThenPassResultAsProps","tabContent","propsDependedOnFirstFormInitialValuesOrModal","headerText","Close_default","indicatorColor","textColor","conditionallyDisable","computedIsDisabled","_ref3$tabContent","refToFormSubmitFunc","mode","marginRight","tabButtons","Btn","requiresFormSubmitRef","RenderModalCreateForm","formikNewRealisation_FormikMUI","rebuildValues","keysToRefactor","reconstructedValues","fieldValue","doBeforeSend","historyTableConfigObj","dataKey","relativeWidth","HistoryTable","dist_es","dist_default","columns","cellProps","isCellHovered","column","rowData","hoveredColumn","hoveredRowData","includeHeaders","fixedRowCount","constructTabsArray","_ref9","historyTab","_formObj$additionalTa","additionalTabs","computePropsForFormikMUI","_ref10","resultingConfigObj","forwardedProps","_ref11","_ref12","urlId","primaryActionUrl","_ref13","titleItem","completePromiseThenRenderComponent","uuid","functionsToExecute","_ref14","_ref15","resActionBtns","allowedActionsVar","openConfirmDialog","shortName","_ref16","closeConfirmDialog","_ref17","_ref18","renderSubmitButton","isInitialValid","phoneMask","time24HMask","charAt","halfWith","rebuildReceivedValueLabelFullNameValueUniqueId","fullName","rebuildReceivedValueLabelLabelValueUniqueId","enum","rebuildReceivedValueLabelLabelValueLabel","rebuildReceivedOptionsLabelAsLabelUniqueIdAsValue","constructRebuildReceivedOptionsLabelFullNameValueUniqueId","constructRebuildReceivedOptionsLabelLabelValueUniqueId","constructRebuildReceivedOptionsLabelLabelValueLabel","baseTextAreaProps","saveFileInCommonFiles","post","baseTimeFieldProps","baseNumberProps","_ref$prefix","prefix","_ref$includeThousands","includeThousandsSeparator","createNumberMask","baseForm","select","emailMask","object","surname","firstname","middlename","accost","password","san","nullable","isActiveLogin","bool","specializationCode","member","profile","forms","create","view","edit","users","filtersPanel","filters","tableHeader","cntr","mainContainer","overflowY","SysSettingsConfig","_ref$confObj","initialValuesUrl","setState","_useState5","_useState6","setDirty","settingObj","pathLabelIdMap","tempInitialValues","valueOfAttribute","tempForm","Paper_Paper_default","elevation","Typography_Typography_default","changedFields","resultValue","patch","Grid_Grid_default","CircularProgress_default","JSON","settings","file","stringify","allowLeadingZeroes","sync_server_host","sync_frequency_cron","mail_server_username","mail_server_password","mail_server_port","mail_server_host","mail_delivery_from_personal","mail_delivery_from_address","mail_server_ssl","mail_server_auth","notification_frequency_event","notification_frequency_raw_claim","questioning_baptism","questioning_wedding","conversation_frequency_recording_person","claim_not_less_days","claim_not_more_days","claim_auto_remove","claim_auto_transfer_to_free","sms_server_host","sms_database_login","sms_database_password","other_count_lock","other_disclaimer_text","other_disclaimer_enable","additionalActionPanelButtons","Button_default","rguId","closeConfirmDialogFormik","integerLimit","synchronizeTimestamp","parentId","supremeParentId","memberInfo","orgHead","orgPhone","web","ogrn","workTime","inn","memberMvFormObj","mvList","array","of","mvObjectId","when","is","otherwise","baseViewEdit","_ref6$mvObject","mvObject","mvUniqueId","restO","procedureId","_ref7$modal","listId","members","navigationLabel","icon","Domain","extractedData","gisgmpId","gisgmpMemberUrn","isPaid","isFunction","serviceId","serviceShortName","organizationId","claimFile","bpmnFile","autoDelivered","claimMvXml","schema","_ref10$mvObject","_ref11$modal","services","BusinessCenterSharp","code","isInternal","version","mainCode","mvType","provider","xmlIn","xmlOut","mvExchange","OpenInNew","dynamicWidth","nsiMasterId","nsiSlaves","_ref6$modal","nsiMaster","nsi","LibraryBooks","stepsPassProps","increaseActiveStep","passPropsToNextStep","reducer","copy","nextActiveStepIndex","prevActiveStep","setStepPassProps","TypeEnum","actionsContainer","resetContainer","xlsBtn","getContrastText","&:hover","pdfBtn","btn","textCont","report_1","x","_getAuth","report_2","_getAuth2","report_3","report_4","report_5","report_6","firstStep","report","stepsConfig","foundFiltersForReport","reportName","_ref5$passProps","localFO","rebuildedFilters","rebuildDates","_values$name$value","providerType","providerId","stepButtons","baseUrlsToDownLoadReport","addFiltersToUrl","statMV","SwapVert","custom","_useReducer","useReducer","init","_useReducer2","downLoadStuff","downLoaded","submitRef","setIsDisabled","orientation","StepButtons","restAdditionalProps","currentStepPassProps","wrappedSubmit","active","decreaseActiveStep","uuidOut","logMv","ReactDateRangeInline","tableCell","flexDirection","TableCellRoot","flexContainer","boxSizing","DayCell","MonthWordCell","cellData","noClick","cursor","HeaderCell","ADD_EVENT","REMOVE_EVENT","CHANGE_DUTIES","CHANGE_FROM","CHANGE_TO","CHANGE_TYPE","CHANGE_PERFORMERS","INIT","removeEvent","rowIndex","eventIndex","fromA","from","fromB","tableReducer","newCollection","collection","events","duties","newRow","newEvents","to","eventType","performers","redHighLight","greenHighLight","blueHighLight","cont","sign","EventTimeCell","useContext","TableContext","typeEnum","isFree","slot","workItem","currentTarget","changeFrom","changeTo","EventTypeCell","_useContext","_useContext$optionsMa","selectContainer","changeType","EventPerformersCell","v4","changePerformers","DutiesCell","_useContext$optionsMa2","_useContext$optionsMa3","changeDuties","createStandardAction","mapPerformer","id","ActionButtons","openSnackBarWithMessage","addEventPrivate","canEdit","ministration","addEvent","canEditEvent","dateTimestamp","day","dateEndTimestamp","objectTypeCode","reason","delete","headerColumn","typography","fontWeightRegular","toFixed","table","fontFamily","tableRow","tableRowHover","noRowsRenderer","cache","CellMeasurerCache","defaultWidth","defaultHeight","fixedHeight","fixedWidth","DayCellRenderer","dayCell_DayCell","HeaderRenderer","headerRenderer_HeaderCell","MonthWordCellRenderer","monthWordCell_MonthWordCell","EventTimeCellRender","eventTimeCell_EventTimeCell","EventTypeCellRenderer","parent","columnIndex","EventTypeCell_EventTypeCell","DutiesCellRenderer","dutiesCell_DutiesCell","ActionButtonsRenderer","EventPerformersCellRenderer","eventPerformersCell_EventPerformersCell","createContext","types","ScheduleTable","_ref6$omitDutiesColum","omitDutiesColumn","getRowClassName","lastCollection","lastRenderedWidth","lastRenderedHeight","rowGetter","Provider","clearAll","headerClassName","headerHeight","overscanRowCount","rowClassName","rowHeight","rowCount","cellRenderer","headerRenderer","russianDate","ru","actionPanel","actionBtn","ExpandMoreRendered","functionToCallForEach","mapSurinameInitialsAsLabelUniqueIdAsValue","mapLabelAsLabelUniqueIdAsValue","schedule","openCreationMaster","openScheduleCreationMaster","showAllEvents","setShowAllEvents","setMinistration","_useState7","_useState8","user","setUser","_useState9","_useState10","selectedRange","setSelectedRange","_useState11","_useState12","setTypes","_useState13","_useState14","priests","setPriests","spread","typesResponse","priestsResponse","constructParamsFromTo","react","fallback","expandIcon","wrap","event1","inlineReactDateRange_ReactDateRangeInline","ScheduleTable_ScheduleTable","hramTabFormObj","photo","webUrl","contacts","history","religion","startWorkTime","finishWorkTime","visiblePriests","createForm","address","town","metro","coordination","hramObjectLocal","viewEditForm","churchStructure_forms","createWorkItem","churchStructure","actionType","library_forms","library","completeConfig","comment","claimDictStatus","_ref10$firstFormIniti","userFullName","baseJournal","claimNew","claimInWork","claimFree","claimCompleted","INITIAL_PARAMETERS","PermContactCalendar","Home","serviceMan","Group","management","ChromeReaderMode","claim","Message","new","inWork","submitting","free","statistics","InsertChart","reports","logMV","directory","ViewList","Settings","interceptors","request","use","headers","Authorization","reject","setAuth","customGlobalHistory","setAccessToken","loadUserInfo","setErrorMessage","setCurrentUsersInfo","setAllowedActions","setIsAuthenticated","setTokenThenLoadUserInfo","roles","_roles$","authenticateUser","username","Content-type","grant_type","getAccessToken","access_token","_roles$2","joo","sortsReducer","finalUrl","filtersToApply","entries","resultingUrl","setPage","computeUrlThenFetchJournalData","_getState$journalRedu","_getState$journalRedu2","pushHeadModal","handleError","setFilterPanelOptionsMap","layout","breakpoints","up","avatar","secondary","main","submit","wrapper","getFirstOwnPropertyKey","o","getFirstAllowedJournal","firstCategoryKey","firstPageKey","login","SignIn","onSubmitHandle","dispatchUserAuthSetFunctions","location","pathname","react_router","CssBaseline_default","Grid_default","src","alt","Avatar_default","LockOutlined_default","Login","withRouter","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","IconButton_default","RenderCollapsibleMenuItem","CustomIcon","customIcon","activeCategory","activePage","menuMinimized","react_router_dom","exact","navlink","activeClassName","navlinkActive","aria-current","core_ListItem_default","nested","core_ListItemIcon_default","listIconRoot","SvgIcon_default","core_ListItemText_default","primaryTypographyProps","textDecoration","borderLeft","opacity","firstLevelListItem","activeListItem","_ref$match$params","List_default","disablePadding","CustomCategoryIcon","ListItem_default","ListItemIcon_default","MoveToInbox_default","ListItemText_default","inset","ExpandLess_default","ExpandMore_default","getArrowSymbol","Collapse_default","in","unmountOnExit","Dialog_default","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","DialogContent_default","DialogActions_default","closeDialog","_props$confirmDialog","maxWidth","appBar","drawer","transitions","easing","sharp","duration","leavingScreen","menuButton","grow","toggleLeftMenu","pushModal","logout","maxHeight","lineHeight","shouldWrapInsideTabs","noWrap","textField","panel","constructInitialValuesForEmptyFormWithOutBlocks","FilterPanel","onApplyFiltersClick","saveFilters","alignSelf","ModalWrapper","_props$config","InnerComponent","_props$config$functio","restConfigProps","additionalPassedProps","withWidth","tabChanged","tabNumber","replaceHeadModal","primaryColor","PaginatedTable","defaultPagination","_ref$count","count","setRowsPerPage","selectIcon","backIconButtonProps","nextIconButtonProps","onChangePage","pageLocal","onChangeRowsPerPage","labelDisplayedRows","labelRowsPerPage","AdditionalButtons","buttons","onClickHandler","PrivateJournal","_ref$initialParameter","initialParameters","_ref$initialParameter2","_ref$initialParameter3","leftPanel","_ref$initialParameter4","rightPanel","toggleFiltersPanel","setSortableThenFetJournalData","computeUrlThenFetchJournalDataW","currentPageAllowedActions","filter_panel","components_PaginatedTable","totalElements","onCellClick","onHeaderClick","orderBy","orderDirection","modalWrapper","Journal","setSort","setSortable","messageContainer","getErrorMessage","DisplayErrorMessage","es_Typography_Typography","NoMatch","no_match_DisplayErrorMessage","GetJournalMainContent","_initialParameters$pa","ScheduleCreationMaster","appBarShift","enteringScreen","hide","drawerPaper","whiteSpace","overflowX","drawerPaperClose","toolbar","mixins","content","confirmDialogIsOpen","confirmDialogFormikIsOpen","modalIsShowed","isModalShowed","toggleFilterPanel","resetFilterPanel","resetSortable","setBaseUrl","loadFiltersOptionsMap","loadFiltersOptions","setFiltersPanelOptionsMap","optionMap","getOptionsMapBeforeLoading","filtersSource","customRouteParametersHandler","AppBar","components_CollapsableMenuContainer","snackBar","components_confirmDialog","components_confirmDialogFormik","createMuiTheme","indigo","useNextVariants","App","es","integration_react","loading","index_es","components_PrivateRoute","Wrapper","hostname","rootElement","getElementById","components_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7530ff9e.chunk.js","sourcesContent":["import { install } from \"@material-ui/styles\";\n\ninstall();\n\n// todo It is recommended to place the above code in a separate file (e.g. bootstrap.js) and to import it in your application's entry point (e.g. index.js). This ensures that the installation is executed before anything else, because ECMAScript imports are hoisted to the top of the module. If the installation step is not performed correctly the resulting build could have conflicting class names.\n//\n// We will make @material-ui/styles the default style implementation for the core components in Material-UI v4. This installation step is temporary. Behind the scenes, the install() function switches the styling engine the core components use.\n//\n// Also, the @material-ui/core/MuiThemeProvider component can be replaced with @material-ui/styles/ThemeProvider. We will remove this component in v4.\n","import {\r\n  SET_ACCESS_TOKEN,\r\n  SET_AUTH,\r\n  SET_AUTHENTICATED,\r\n  SET_LOGIN_ERROR_MESSAGE,\r\n  SET_CURRENT_USER_OBJECT\r\n} from \"../constants\";\r\n\r\nconst initialState = {\r\n  accessToken: null,\r\n  isAuthenticated: false,\r\n  errorMessage: \"\",\r\n  role: \"\",\r\n  surnameInitials: \"\",\r\n  functions: [],\r\n  userId: -1,\r\n  previousUserId: -1\r\n};\r\n\r\nexport default function authReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case SET_ACCESS_TOKEN: {\r\n      // добавление токена в стор\r\n      return {\r\n        ...state,\r\n        accessToken: action.payload,\r\n        errorMessage: \"\"\r\n      };\r\n    }\r\n    case SET_AUTHENTICATED: {\r\n      // установка флага Авторизованн ли пользователь\r\n      return {\r\n        ...state,\r\n        isAuthenticated: action.payload\r\n      };\r\n    }\r\n    case SET_AUTH: {\r\n      const { isAuthenticated, accessToken } = action.payload;\r\n      return {\r\n        ...state,\r\n        isAuthenticated,\r\n        accessToken\r\n      };\r\n    }\r\n    case SET_CURRENT_USER_OBJECT: {\r\n      const {\r\n        role,\r\n        functions,\r\n        surnameInitials,\r\n        userId,\r\n        memberId,\r\n        memberFullName\r\n      } = action.payload;\r\n      return {\r\n        ...state,\r\n        role,\r\n        functions,\r\n        surnameInitials,\r\n        userId,\r\n        memberId,\r\n        memberFullName\r\n      };\r\n    }\r\n    case SET_LOGIN_ERROR_MESSAGE: {\r\n      return {\r\n        ...state,\r\n        errorMessage: action.payload.errorMessage\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import uuidV4 from \"uuid/v4\";\r\nimport {\r\n  SAVE_FETCHED_DATA,\r\n  SET_SORT,\r\n  SET_MODAL_STATE_INITIAL_VALUES,\r\n  MODAL_TAB_HAS_CHANGED,\r\n  RESET_SORTABLE,\r\n  SET_SORTABLE,\r\n  POP_HEAD_MODAL,\r\n  PUSH_MODAL,\r\n  REPLACE_HEAD_MODAL,\r\n  SET_COMPUTED_URL,\r\n  SET_ROWS_PER_PAGE,\r\n  SET_PAGE,\r\n  NEXT_PAGE,\r\n  PREVIOUS_PAGE,\r\n  SET_BASE_URL\r\n} from \"../constants\";\r\n\r\nconst initialState = {\r\n  fetchedData: {},\r\n  sortable: [],\r\n  modalState: {\r\n    openedModals: []\r\n  },\r\n  openedTab: 0,\r\n  newEntity: {},\r\n  baseUrl: \"\",\r\n  computedUrl: \"\",\r\n  pagination: {\r\n    rowsPerPage: 10,\r\n    page: 1\r\n  }\r\n};\r\n\r\nexport default function journalReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case SAVE_FETCHED_DATA:\r\n      return {\r\n        ...state,\r\n        fetchedData: action.payload\r\n      };\r\n    case SET_SORT: {\r\n      const desiredIndex = state.sortable.findIndex(\r\n        el => el.path === action.payload.path\r\n      );\r\n\r\n      if (desiredIndex === -1) {\r\n        return {\r\n          ...state,\r\n          sortable: state.sortable.concat({\r\n            path: action.payload.path,\r\n            value: \"asc\"\r\n          })\r\n        };\r\n      }\r\n\r\n      switch (state.sortable[desiredIndex].value) {\r\n        case \"asc\": {\r\n          const newState = {\r\n            ...state,\r\n            sortable: state.sortable.slice()\r\n          };\r\n\r\n          newState.sortable[desiredIndex].value = \"desc\";\r\n\r\n          return newState;\r\n        }\r\n        case \"desc\": {\r\n          return {\r\n            ...state,\r\n            sortable: state.sortable.filter(\r\n              sort => sort.path !== action.payload.path\r\n            )\r\n          };\r\n        }\r\n        default:\r\n          return state;\r\n      }\r\n    }\r\n    case SET_SORTABLE: {\r\n      const sortable = { path: action.payload };\r\n      if (!state.sortable[0]) {\r\n        sortable.value = \"desc\";\r\n      } else if (state.sortable[0].value === \"desc\") {\r\n        sortable.value = \"asc\";\r\n      } else {\r\n        return {\r\n          ...state,\r\n          sortable: []\r\n        };\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        sortable: [sortable]\r\n      };\r\n    }\r\n    case RESET_SORTABLE: {\r\n      return {\r\n        ...state,\r\n        sortable: []\r\n      };\r\n    }\r\n    case POP_HEAD_MODAL: {\r\n      return {\r\n        ...state,\r\n        modalState: {\r\n          ...state.modalState,\r\n          openedModals: state.modalState.openedModals.slice(\r\n            0,\r\n            state.modalState.openedModals.length - 1\r\n          )\r\n        }\r\n      };\r\n    }\r\n    case PUSH_MODAL: {\r\n      const { openedModals } = state.modalState;\r\n      return {\r\n        ...state,\r\n        modalState: {\r\n          ...state.modalState,\r\n          openedModals: [...openedModals, { ...action.payload, key: uuidV4() }]\r\n        }\r\n      };\r\n    }\r\n    case REPLACE_HEAD_MODAL: {\r\n      const res = state.modalState.openedModals.slice();\r\n      res[state.modalState.openedModals.length] = action.payload;\r\n      return {\r\n        ...state,\r\n        modalState: {\r\n          ...state.modalState,\r\n          openedModals: res\r\n        }\r\n      };\r\n    }\r\n    case MODAL_TAB_HAS_CHANGED: {\r\n      return {\r\n        ...state,\r\n        openedTab: action.payload.openedTab ? action.payload.openedTab : 0\r\n      };\r\n    }\r\n    case SET_MODAL_STATE_INITIAL_VALUES: {\r\n      return {\r\n        ...state,\r\n        initialValues: action.payload.slice()\r\n      };\r\n    }\r\n    case SET_COMPUTED_URL: {\r\n      return {\r\n        ...state,\r\n        computedUrl: action.payload.slice()\r\n      };\r\n    }\r\n    case SET_ROWS_PER_PAGE: {\r\n      return {\r\n        ...state,\r\n        pagination: { ...state.pagination, rowsPerPage: action.payload }\r\n      };\r\n    }\r\n    case SET_PAGE: {\r\n      return {\r\n        ...state,\r\n        pagination: { ...state.pagination, page: action.payload }\r\n      };\r\n    }\r\n    case NEXT_PAGE: {\r\n      return {\r\n        ...state,\r\n        pagination: { ...state.pagination, page: state.pagination.page + 1 }\r\n      };\r\n    }\r\n    case PREVIOUS_PAGE: {\r\n      return {\r\n        ...state,\r\n        pagination: { ...state.pagination, page: state.pagination.page - 1 }\r\n      };\r\n    }\r\n    case SET_BASE_URL: {\r\n      return {\r\n        ...state,\r\n        baseUrl: action.payload\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  RESET_COMPUTED_FILTERS,\r\n  SET_COMPUTED_FILTERS,\r\n  TOGGLE_IS_COLLAPSED,\r\n  SET_FILTERS_OPTIONS_MAP\r\n} from \"../constants\";\r\n\r\nconst initialState = { computedFilters: {}, isCollapsed: true, optionsMap: {} };\r\n\r\nexport type IFiltersInitialState = {\r\n  readonly computedFilters: object;\r\n  readonly isCollapsed: boolean;\r\n  readonly optionsMap: object;\r\n}\r\n\r\nexport default function filtersReducer(\r\n  state: IFiltersInitialState = initialState,\r\n  action:any\r\n) {\r\n  switch (action.type) {\r\n    case TOGGLE_IS_COLLAPSED: {\r\n      return {\r\n        ...state,\r\n        isCollapsed:\r\n          action.payload && action.payload.isCollapsed\r\n            ? action.payload.isCollapsed\r\n            : !state.isCollapsed\r\n      };\r\n    }\r\n    case RESET_COMPUTED_FILTERS: {\r\n      return {\r\n        ...state,\r\n        computedFilters: {},\r\n        isCollapsed: true\r\n      };\r\n    }\r\n    case SET_COMPUTED_FILTERS: {\r\n      return {\r\n        ...state,\r\n        computedFilters: { ...action.payload }\r\n      };\r\n    }\r\n    case SET_FILTERS_OPTIONS_MAP: {\r\n      return {\r\n        ...state,\r\n        optionsMap: action.payload\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { SET_EXPANDED_INDEX, TOOGLE_MENU_COLLAPSED } from '../constants';\n\nconst initialState = {\n  expandedIndex: -1,\n  value: false,\n  isMenuMinimized: false,\n  currentlyActiveIndex: -1\n};\n\nexport default function filtersReducer(state = initialState, action) {\n  switch (action.type) {\n    case SET_EXPANDED_INDEX:\n      return {\n        ...state,\n        expandedIndex: action.payload.expandedIndex,\n        value:\n          state.expandedIndex !== action.payload.expandedIndex\n            ? true\n            : !state.value\n      };\n    case TOOGLE_MENU_COLLAPSED: {\n      return {\n        ...state,\n        isMenuMinimized: !state.isMenuMinimized\n      };\n    }\n    default:\n      return state;\n  }\n}\n","import {\r\n  TOGGLE_SNACKBAR,\r\n  TOGGLE_CONFIRM_DIALOG,\r\n  HIDE_CONFIRM_DIALOG,\r\n  DISABLE_PRIMARY_BTN_CONFIRM_DIALOG,\r\n  OPEN_CONFIRM_DIALOG_FORMIK,\r\n  CLOSE_CONFIRM_DIALOG_FORMIK,\r\n  SET_ALLOWED_ACTIONS,\r\n  OPEN_SCHEDULE_CREATION_MASTER,\r\n  CLOSE_SCHEDULE_CREATION_MASTER\r\n} from \"../constants\";\r\n\r\nconst confirmDialog = {\r\n  open: false,\r\n  title: \"Подтвердите действие\",\r\n  mainText: \"\",\r\n  primaryButtonText: \"Да\",\r\n  secondaryButtonText: \"Нет\",\r\n  primaryButtonHandler: () => {}\r\n};\r\nconst confirmDialogFormik = {\r\n  open: false,\r\n  title: \"Подтвердите действие\",\r\n  primaryButtonText: \"Подтвердить\",\r\n  secondaryButtonText: \"Отменить\",\r\n  primaryButtonHandler: () => {},\r\n  formObj: {\r\n    blocks: []\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  isSnackBarOpened: false,\r\n  message: \"\",\r\n  confirmDialog,\r\n  confirmDialogFormik,\r\n  allowedActions: {},\r\n  scheduleCreationMasterIsOpen: false\r\n};\r\n\r\nexport default function wrapperReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case TOGGLE_SNACKBAR: {\r\n      return {\r\n        ...state,\r\n        isSnackBarOpened: action.payload.isSnackBarOpened,\r\n        message: action.payload.message ? action.payload.message : \"\"\r\n      };\r\n    }\r\n    case TOGGLE_CONFIRM_DIALOG: {\r\n      const {\r\n        open,\r\n        title,\r\n        mainContent,\r\n        primaryButtonHandler,\r\n        mainText,\r\n        primaryButtonText,\r\n        secondaryButtonText,\r\n        primaryButtonDisabled\r\n      } = action.payload;\r\n      return {\r\n        ...state,\r\n        confirmDialog: {\r\n          ...state.confirmDialog,\r\n          title,\r\n          open,\r\n          mainContent,\r\n          primaryButtonHandler,\r\n          mainText,\r\n          primaryButtonText:\r\n            primaryButtonText || confirmDialog.primaryButtonText,\r\n          secondaryButtonText:\r\n            secondaryButtonText || confirmDialog.secondaryButtonText,\r\n          primaryButtonDisabled: !!primaryButtonDisabled\r\n        }\r\n      };\r\n    }\r\n    case DISABLE_PRIMARY_BTN_CONFIRM_DIALOG: {\r\n      const { primaryButtonDisabled } = action.payload;\r\n      return {\r\n        ...state,\r\n        confirmDialog: {\r\n          ...state.confirmDialog,\r\n          primaryButtonDisabled\r\n        }\r\n      };\r\n    }\r\n    case HIDE_CONFIRM_DIALOG: {\r\n      return {\r\n        ...state,\r\n        confirmDialog: { ...confirmDialog }\r\n      };\r\n    }\r\n    case OPEN_CONFIRM_DIALOG_FORMIK: {\r\n      const { open, formObj, ...rest } = action.payload;\r\n      return {\r\n        ...state,\r\n        confirmDialogFormik: {\r\n          ...confirmDialogFormik,\r\n          open,\r\n          formObj,\r\n          ...rest\r\n        }\r\n      };\r\n    }\r\n    case CLOSE_CONFIRM_DIALOG_FORMIK: {\r\n      return {\r\n        ...state,\r\n        confirmDialogFormik\r\n      };\r\n    }\r\n    case SET_ALLOWED_ACTIONS: {\r\n      return {\r\n        ...state,\r\n        allowedActions: action.payload\r\n      };\r\n    }\r\n    case OPEN_SCHEDULE_CREATION_MASTER: {\r\n      return {\r\n        ...state,\r\n        scheduleCreationMasterIsOpen: true\r\n      };\r\n    }\r\n    case CLOSE_SCHEDULE_CREATION_MASTER: {\r\n      return { ...state, scheduleCreationMasterIsOpen: false };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { SET_ACTIVE_STEP } from \"../constants\";\n\nconst initialState = {\n  activeStep: 0,\n  passProps: {}\n};\n\nexport default function stepperReducer(state = initialState, action) {\n  switch (action.type) {\n    case SET_ACTIVE_STEP: {\n      const {\n        payload: { activeStep, passProps }\n      } = action;\n      return {\n        ...state,\n        activeStep,\n        passProps\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { combineReducers } from \"redux\";\r\nimport auth from \"./auth\";\r\nimport journalReducer from \"./journal\";\r\nimport filtersReducer from \"./filtersReducer.ts\";\r\nimport collapsableMenuReducer from \"./collapsableMenuReducer\";\r\nimport wrapperReducer from \"./wrapperReducer\";\r\nimport stepperReducer from \"./stepperReducer\";\r\n\r\nexport default combineReducers({\r\n  auth,\r\n  journalReducer,\r\n  filtersReducer,\r\n  collapsableMenuReducer,\r\n  stepperReducer,\r\n  wrapperReducer\r\n});\r\n","import { composeWithDevTools } from \"redux-devtools-extension\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\n// import throttle from \"lodash/throttle\";\n// import { loadState, saveState } from \"../localStorage\";\nimport { persistStore, persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\"; // defaults to localStorage for web and AsyncStorage for react-native\nimport reducers from \"../reducers\";\n\n// const persistedState = loadState();\n\nconst persistConfig = {\n  key: \"tip-vis\",\n  storage\n};\n\nconst persistedReducer = persistReducer(persistConfig, reducers);\n\n/* export default () => {\n  const store = createStore(\n    persistedReducer,\n    composeWithDevTools(applyMiddleware(thunk))\n  );\n  const persistor = persistStore(store);\n  return { store, persistor };\n}; */\n\nexport const store = createStore(\n  persistedReducer,\n  composeWithDevTools(applyMiddleware(thunk))\n);\nexport const persistor = persistStore(store);\n\n/*\nconst store = createStore(\n  reducers,\n  persistedState,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n*/\n\n/* store.subscribe(\n  throttle(() => {\n    const { auth, collapsableMenuReducer, wrapperReducer } = store.getState();\n    saveState({\n      auth: {\n        accessToken: auth.accessToken,\n        isAuthenticated: auth.isAuthenticated,\n        role: auth.role,\n        functions: auth.functions,\n        surnameInitials: auth.surnameInitials\n      },\n      wrapperReducer: { allowedActions: wrapperReducer.allowedActions },\n      collapsableMenuReducer\n    });\n  }),\n  5000\n); */\n// ,\n// export default store;\n","import { dispatchOpenSnackBar } from \"../constants\";\r\n\r\nconst handleErrorStatus = status => {\r\n  if (status === 500 || status === 400) {\r\n    return Promise.resolve(\r\n      dispatchOpenSnackBar(\r\n        `Произошла внутренняя ошибка во время проведения операции`\r\n      )\r\n    );\r\n  }\r\n  if (status === 404 || status === 204) {\r\n    return Promise.resolve(\r\n      dispatchOpenSnackBar(`Не найдено запрашиваемого ресурса`)\r\n    );\r\n  }\r\n  return Promise.resolve();\r\n};\r\n\r\nexport const defaultErrorHandler = error => {\r\n  if (\r\n    error &&\r\n    error.response &&\r\n    error.response.data &&\r\n    error.response.data.status\r\n  ) {\r\n    return handleErrorStatus(error.response.data.status);\r\n  }\r\n  if (error && error.response && error.response.status) {\r\n    return handleErrorStatus(error.response.status);\r\n  }\r\n  return Promise.resolve();\r\n};\r\n","import { store } from \"../store\";\r\nimport { defaultErrorHandler } from \"../utils/defaultErrorHandler\";\r\nimport {\r\n  popHeadModal,\r\n  pushHeadModal,\r\n  fetchJournalData,\r\n  openSnackBar,\r\n  closeConfirmDialogFormik,\r\n  openConfirmDialogFormik,\r\n  popHeadModalThenPushModal,\r\n  setTokenThenLoadUserInfo\r\n} from \"../actions\";\r\n\r\nexport const dispatchUserAuthSetFunctions = token =>\r\n  store.dispatch(setTokenThenLoadUserInfo(token));\r\n\r\nexport const SET_FILTERS_OPTIONS_MAP = \"SET_FILTERS_OPTIONS_MAP\";\r\nexport const SET_BASE_URL = \"SET_BASE_URL\";\r\nexport const SET_PAGE = \"SET_PAGE\";\r\nexport const NEXT_PAGE = \"NEXT_PAGE\";\r\nexport const PREVIOUS_PAGE = \"PREVIOUS_PAGE\";\r\nexport const SET_ROWS_PER_PAGE = \"SET_ROWS_PER_PAGE\";\r\nexport const SET_ACTIVE_STEP = \"SET_ACTIVE_STEP\";\r\nexport const SET_COMPUTED_URL = \"SET_COMPUTED_URL\";\r\nexport const REPLACE_HEAD_MODAL = \"REPLACE_HEAD_MODAL\";\r\nexport const POP_HEAD_MODAL = \"POP_HEAD_MODAL\";\r\nexport const PUSH_MODAL = \"PUSH_MODAL\";\r\nexport const SET_ALLOWED_ACTIONS = \"SET_ALLOWED_ACTIONS\";\r\nexport const OPEN_CONFIRM_DIALOG_FORMIK = \"OPEN_CONFIRM_DIALOG_FORMIK\";\r\nexport const CLOSE_CONFIRM_DIALOG_FORMIK = \"CLOSE_CONFIRM_DIALOG_FORMIK\";\r\nexport const SET_CURRENT_USER_OBJECT = \"SET_CURRENT_USER_OBJECT\";\r\nexport const TOGGLE_CONFIRM_DIALOG = \"TOGGLE_CONFIRM_DIALOG\";\r\nexport const HIDE_CONFIRM_DIALOG = \"HIDE_CONFIRM_DIALOG\";\r\nexport const DISABLE_PRIMARY_BTN_CONFIRM_DIALOG =\r\n  \"DISABLE_PRIMARY_BTN_CONFIRM_DIALOG\";\r\nexport const TOGGLE_SNACKBAR = \"TOGGLE_SNACKBAR\";\r\nexport const MODAL_TAB_HAS_CHANGED = \"MODAL_TAB_HAS_CHANGED\";\r\nexport const TOOGLE_MENU_COLLAPSED = \"TOOGLE_MENU_COLLAPSED\";\r\nexport const SET_MODAL_STATE_INITIAL_VALUES = \"SET_MODAL_STATE_INITIAL_VALUES\";\r\nexport const SET_LOGIN_ERROR_MESSAGE = \"SET_LOGIN_ERROR_MESSAGE\";\r\nexport const SET_SORT = \"SET_SORT\";\r\nexport const SET_SORTABLE = \"SET_SORTABLE\";\r\nexport const RESET_SORTABLE = \"RESET_SORTABLE\";\r\nexport const SAVE_FETCHED_DATA = \"SAVE_FETCHED_DATA\";\r\nexport const TOGGLE_IS_COLLAPSED = \"TOGGLE_IS_COLLAPSED\";\r\nexport const SET_AUTHENTICATED = \"SET_AUTHENTICATED\";\r\nexport const SET_ACCESS_TOKEN = \"SET_ACCESS_TOKEN\";\r\nexport const SET_COMPUTED_FILTER = \"SET_COMPUTED_FILTER\";\r\nexport const RESET_COMPUTED_FILTERS = \"RESET_COMPUTED_FILTERS\";\r\nexport const SET_COMPUTED_FILTERS = \"SET_COMPUTED_FILTERS\";\r\nexport const SET_AUTH = \"SET_AUTH\";\r\nexport const SET_EXPANDED_INDEX = \"SET_EXPANDED_INDEX\";\r\nexport const SET_LOADING = \"SET_LOADING\";\r\nexport const SET_DICTS = \"SET_DICTS\";\r\nexport const TOOGLE_SIGN_DIALOG = \"TOOGLE_SIGN_DIALOG\";\r\nexport const OPEN_SIGN_DIALOG = \"OPEN_SIGN_DIALOG\";\r\nexport const CLOSE_SIGN_DIALOG = \"CLOSE_SIGN_DIALOG\";\r\nexport const OPEN_SCHEDULE_CREATION_MASTER = \"OPEN_SCHEDULE_CREATION_MASTER\";\r\nexport const CLOSE_SCHEDULE_CREATION_MASTER = \"CLOSE_SCHEDULE_CREATION_MASTER\";\r\n\r\nexport const baseDictResponseRefactor = data =>\r\n  Object.values(data._embedded)[0];\r\n\r\nexport const baseDictRebuildReceivedOption = ({ label, uniqueId }) => ({\r\n  label,\r\n  value: uniqueId\r\n});\r\n\r\nexport const baseDictRebuildReceivedOptions = data =>\r\n  baseDictResponseRefactor(data).map(({ label, uniqueId }) => ({\r\n    label,\r\n    value: uniqueId\r\n  }));\r\n\r\nexport const allowedActions = () =>\r\n  store.getState().wrapperReducer.allowedActions;\r\n\r\nexport const getAuth = () => store.getState().auth;\r\n\r\nexport const getUserFunctions = () => {\r\n  return store.getState().auth.functions;\r\n};\r\n\r\nexport const computedUrl = () => store.getState().journalReducer.computedUrl;\r\n\r\nexport const disableConfirmDialogPrimaryBtn = value =>\r\n  store.dispatch({\r\n    type: DISABLE_PRIMARY_BTN_CONFIRM_DIALOG,\r\n    payload: { primaryButtonDisabled: value }\r\n  });\r\n\r\n/* const closeConfirmDialog = () => store.dispatch({ type: HIDE_CONFIRM_DIALOG }); */\r\n\r\nexport const dispatchOpenSignDialog = props =>\r\n  store.dispatch({ type: OPEN_SIGN_DIALOG, payload: props });\r\n\r\nexport const dispatchCloseSignDialog = () =>\r\n  store.dispatch({ type: CLOSE_SIGN_DIALOG });\r\n\r\nexport const dispatchCloseConfirmDialogFormik = () =>\r\n  store.dispatch(closeConfirmDialogFormik());\r\n\r\nexport const dispatchOpenSnackBar = message =>\r\n  store.dispatch(openSnackBar(message));\r\n\r\n/* const openConfirmDialog = payload =>\r\n  store.dispatch({\r\n    type: TOGGLE_CONFIRM_DIALOG,\r\n    payload: { open: true, ...payload }\r\n  }); */\r\nexport const dispatchOpenConfirmDialogFormik = payload =>\r\n  store.dispatch(openConfirmDialogFormik(payload));\r\n\r\nexport const dispatchFetchJournalData = () => store.dispatch(fetchJournalData);\r\n\r\nexport const dispatchPopHeadModal = () => store.dispatch(popHeadModal());\r\n\r\nexport const dispatchPushModal = modal => store.dispatch(pushHeadModal(modal));\r\n\r\nexport const callDefaultErrorHandlerThenPopModal = er =>\r\n  defaultErrorHandler(er).then(() => dispatchPopHeadModal());\r\n\r\nexport const dispatchPopHeadModalThenPushModal = modal =>\r\n  store.dispatch(popHeadModalThenPushModal(modal));\r\n\r\nexport const getUserId = () => store.getState().auth.userId;\r\n","import { set } from \"lodash\";\r\nimport { baseDictRebuildReceivedOptions } from \"../constants\";\r\n\r\nexport const doSomethingWithFields = (forms, formName, functionToExecute) => {\r\n  forms[formName].blocks.forEach(block =>\r\n    block.fields.forEach(field => {\r\n      functionToExecute(field);\r\n    })\r\n  );\r\n};\r\n\r\nexport const getAllowedActionsOnPageForCurrentUser = (\r\n  requiresFunction,\r\n  functions\r\n) => {\r\n  const actionsSet = [];\r\n  requiresFunction\r\n    .filter(\r\n      ({ functionName }) =>\r\n        functions.includes(functionName) || functionName === \"any\"\r\n    )\r\n    .forEach(({ allowedActions }) =>\r\n      allowedActions.forEach(action => {\r\n        if (!actionsSet.includes(action)) {\r\n          actionsSet.push(action);\r\n        }\r\n      })\r\n    );\r\n  return actionsSet;\r\n};\r\n\r\nconst getAllAllwedActionForCategory = (pages, functions) => {\r\n  const pageKeys = Object.keys(pages);\r\n  const result = {};\r\n  pageKeys.forEach(page => {\r\n    const allAllowedActionsOnPage = getAllowedActionsOnPageForCurrentUser(\r\n      pages[page].requiresFunction,\r\n      functions\r\n    );\r\n    if (allAllowedActionsOnPage.length > 0) {\r\n      result[page] = allAllowedActionsOnPage;\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nexport const constructAllowedActionsForAllJournals = (\r\n  functions,\r\n  initParams\r\n) => {\r\n  const result = {};\r\n  const categories = Object.keys(initParams);\r\n  categories.forEach(category => {\r\n    // если в категории нет страницы то значением будет массив разрешенных действий\r\n\r\n    if (initParams[category].pages) {\r\n      const allowedActionsForCategory = getAllAllwedActionForCategory(\r\n        initParams[category].pages,\r\n        functions\r\n      );\r\n      if (Object.keys(allowedActionsForCategory).length > 0) {\r\n        result[category] = allowedActionsForCategory;\r\n      }\r\n    } else {\r\n      const allowedActions = getAllowedActionsOnPageForCurrentUser(\r\n        initParams[category].page.requiresFunction,\r\n        functions\r\n      );\r\n      if (allowedActions.length > 0) {\r\n        result[category] = allowedActions;\r\n      }\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nconst naturalOrder = ({ label: a }, { label: b }) => {\r\n  if (a > b) {\r\n    return 1;\r\n  }\r\n  if (a < b) {\r\n    return -1;\r\n  }\r\n  // a должно быть равным b\r\n  return 0;\r\n};\r\n\r\nconst wrapBaseDictReceivedReceivedOptions = data => ({\r\n  options: baseDictRebuildReceivedOptions(data).sort(naturalOrder),\r\n  loaded: true\r\n});\r\n\r\nconst wrappedRebuildReceivedOptions = rebuildReceivedOptions => data => ({\r\n  options: rebuildReceivedOptions(data).sort(naturalOrder),\r\n  loaded: true\r\n});\r\n\r\nexport const findFieldsWithDictThenConstructArrayToDownload = ({ blocks }) => {\r\n  const configArray = [];\r\n  blocks.forEach(({ fields }) =>\r\n    fields.forEach(({ type, name, dictUrl, rebuildReceivedOptions }) => {\r\n      if (type === \"select\" && dictUrl) {\r\n        configArray.push({\r\n          whereToStore: `optionsMap.${name}`,\r\n          urlToDownload: dictUrl,\r\n          rebuildReceivedValue: rebuildReceivedOptions\r\n            ? wrappedRebuildReceivedOptions(rebuildReceivedOptions)\r\n            : wrapBaseDictReceivedReceivedOptions\r\n        });\r\n      }\r\n    })\r\n  );\r\n  return configArray;\r\n};\r\n\r\nexport const findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks = ({\r\n  fields\r\n}) => {\r\n  let configArray = [];\r\n  fields.forEach(field => {\r\n    const { type, name, dictUrl, rebuildReceivedOptions } = field;\r\n    if (type === \"select\" && dictUrl) {\r\n      configArray.push({\r\n        whereToStore: `optionsMap.${name}`,\r\n        urlToDownload: dictUrl,\r\n        rebuildReceivedValue: rebuildReceivedOptions\r\n          ? wrappedRebuildReceivedOptions(rebuildReceivedOptions)\r\n          : wrapBaseDictReceivedReceivedOptions\r\n      });\r\n    }\r\n    if (type === \"fieldArray\") {\r\n      configArray = [\r\n        ...configArray,\r\n        ...findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks(field)\r\n      ];\r\n    }\r\n  });\r\n  return configArray;\r\n};\r\n\r\nexport const extractPayloadFromBaseSpringDateRestStructure = data =>\r\n  data._embedded ? Object.values(data._embedded)[0] : [];\r\n\r\nexport const getOptionsMapBeforeLoading = fields => {\r\n  const optionMap = {};\r\n  fields.forEach(field => {\r\n    const { type, name, dictUrl } = field;\r\n    if (type === \"select\" && dictUrl) {\r\n      set(optionMap, name, { loaded: false, options: [] });\r\n    }\r\n  });\r\n  return optionMap;\r\n};\r\n","import { createBrowserHistory } from \"history\";\n\nexport default createBrowserHistory();\n","import * as Yup from \"yup\";\r\n\r\nYup.setLocale({\r\n  mixed: {\r\n    required: \"Обязательное поле\"\r\n  },\r\n  number: {\r\n    // default: \"Значение поля ${number} должно быть числом\",\r\n    // eslint-disable-next-line no-template-curly-in-string\r\n    min: 'Значение поля \"${value}\" должно быть больше или равно ${min}',\r\n    // max: '${path} must be less than or equal to ${max}',\r\n    // lessThan: '${path} must be less than ${less}',\r\n    // moreThan: '${path} must be greater than ${more}',\r\n    // notEqual: '${path} must be not equal to ${notEqual}',\r\n    // eslint-disable-next-line no-template-curly-in-string\r\n    positive: 'Значение поля \"${value}\" должно быть положительным числом',\r\n    // eslint-disable-next-line no-template-curly-in-string\r\n    negative: 'Значение поля \"${value}\" должно быть отрицательным числом',\r\n    // eslint-disable-next-line no-template-curly-in-string\r\n    integer: 'Значение поля \"${value}\" должно быть целым числом'\r\n  },\r\n  // eslint-disable-next-line no-template-curly-in-string\r\n  string: { url: 'Значение поля \"${value}\" должно быть URL адресом' }\r\n});\r\n\r\nexport default Yup;\r\n","// axiosConfig: {url, method, data}\r\nimport axios from \"axios\";\r\n\r\nexport const constructRequest = (\r\n  axiosConfig,\r\n  handleResponse,\r\n  openSnackBar,\r\n  hideModal,\r\n  setSubmitting\r\n) => {\r\n  axios(axiosConfig)\r\n    .then(response => {\r\n      if (handleResponse) {\r\n        handleResponse(response);\r\n      }\r\n    })\r\n    .catch(error => {\r\n      if (error && error.response && error.response.data) {\r\n        if (\r\n          error.response.data.status === 500 ||\r\n          error.response.data.status === 400\r\n        ) {\r\n          openSnackBar(\r\n            `Произошла внутренняя ошибка во время выполнения операции`\r\n          );\r\n          setSubmitting(false);\r\n        } else if (error.response.data.status === 404) {\r\n          openSnackBar(`Не найдено запрашиваемого объекта`);\r\n          setSubmitting(false);\r\n        }\r\n      }\r\n    });\r\n};\r\n","import React from \"react\";\nimport { Button, withStyles } from \"@material-ui/core\";\n\nconst style = {\n  root: {\n    boxShadow:\n      \"0px 1px 2px 0px rgb(207, 207, 207),0px 2px 2px 0px rgb(241, 241, 241),0px 3px 1px -2px rgb(241, 241, 241)\"\n  }\n};\n\nconst ShadowedOutlinedButton = ({\n  onClick,\n  children,\n  color,\n  classes,\n  ...rest\n}) => (\n  <Button\n    onClick={onClick}\n    {...rest}\n    variant=\"outlined\"\n    color={color}\n    classes={{ root: classes.root }}\n  >\n    {children}\n  </Button>\n);\n\nexport default withStyles(style, { withTheme: true })(ShadowedOutlinedButton);\n","import * as PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport ShadowedOutlinedButton from \"../../ShadowedOutlinedButton\";\r\nimport { popHeadModalThenPushModal } from \"../../../actions\";\r\nimport { store } from \"../../../store\";\r\n\r\nexport const cancelButton = (actionHandler = () => {}, text = \"Закрыть\") => (\r\n  <ShadowedOutlinedButton\r\n    key={text}\r\n    variant=\"outlined\"\r\n    color=\"primary\"\r\n    onClick={() => actionHandler()}\r\n  >\r\n    {text}\r\n  </ShadowedOutlinedButton>\r\n);\r\n\r\nexport const PrimaryButton = ({ actionHandler, text, disabled }) => {\r\n  return (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      disabled={disabled}\r\n      onClick={() => actionHandler()}\r\n      key={text}\r\n    >\r\n      {text}\r\n    </Button>\r\n  );\r\n};\r\n\r\nPrimaryButton.propTypes = {\r\n  actionHandler: PropTypes.func.isRequired,\r\n  text: PropTypes.string,\r\n  disabled: PropTypes.bool\r\n};\r\nPrimaryButton.defaultProps = {\r\n  text: \"Сохранить\",\r\n  disabled: false\r\n};\r\n\r\nexport const deleteButton = (actionHandler, text = \"Удалить\") => (\r\n  <Button\r\n    variant=\"contained\"\r\n    color=\"secondary\"\r\n    onClick={() => actionHandler()}\r\n    key={text}\r\n  >\r\n    {text}\r\n  </Button>\r\n);\r\n\r\nexport const openEditButton = ({ text = \"Редактировать\", modal }) => (\r\n  <Button\r\n    key={text}\r\n    variant=\"contained\"\r\n    color=\"primary\"\r\n    onClick={() => store.dispatch(popHeadModalThenPushModal(modal))}\r\n  >\r\n    {text}\r\n  </Button>\r\n);\r\n\r\nopenEditButton.propTypes = {\r\n  modal: PropTypes.shape({}).isRequired,\r\n  text: PropTypes.string\r\n};\r\nopenEditButton.defaultProps = {\r\n  text: \"Редактировать\"\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { Grid, Typography, CircularProgress } from \"@material-ui/core\";\r\nimport { set } from \"lodash\";\r\n\r\nexport const defaultPreloader = ({ message, size = 120 }) => (\r\n  <Grid\r\n    justify=\"center\"\r\n    alignContent=\"center\"\r\n    direction=\"column\"\r\n    alignItems=\"center\"\r\n    container\r\n    style={{\r\n      height: \"300px\"\r\n    }}\r\n  >\r\n    <Typography variant=\"h6\">\r\n      {message || \"Идет загрузка данных с сервера\"}\r\n    </Typography>\r\n    <CircularProgress size={size} />\r\n  </Grid>\r\n);\r\n\r\ndefaultPreloader.propTypes = {\r\n  message: PropTypes.string,\r\n  size: PropTypes.number\r\n};\r\n\r\ndefaultPreloader.defaultProps = {\r\n  message: \"Идет загрузка данных с сервера\",\r\n  size: 120\r\n};\r\n\r\nconst CompletePromiseThenRenderComponent = ({\r\n  config,\r\n  errorHandler,\r\n  PreloaderComponent = CircularProgress,\r\n  Component,\r\n  rebuildDownloadedObj,\r\n  ...rest\r\n}) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [downloaded, setDownloaded] = useState({});\r\n\r\n  useEffect(() => {\r\n    let localDownloaded = {};\r\n    let onAdditionalDemandConfig = [];\r\n    // скачивает все на основе концфигурации из props\r\n    /*    loadStuffDependingOnConfig(\r\n      config,\r\n      localDownloaded,\r\n      onAdditionalDemandConfig\r\n    ) */\r\n    const source = axios.CancelToken.source();\r\n    axios\r\n      .all(\r\n        config.map(item =>\r\n          axios.get(item.urlToDownload, { cancelToken: source.token })\r\n        )\r\n      )\r\n      .then(response =>\r\n        config.forEach(\r\n          (\r\n            {\r\n              whereToStore,\r\n              rebuildReceivedValue,\r\n              postLoadDoSomethingThenPassResultAsProp,\r\n              extendAdditionalOnDemandConfig\r\n            },\r\n            index\r\n          ) => {\r\n            const { data } = response[index];\r\n\r\n            set(\r\n              localDownloaded,\r\n              whereToStore,\r\n              rebuildReceivedValue ? rebuildReceivedValue(data) : data\r\n            );\r\n\r\n            if (postLoadDoSomethingThenPassResultAsProp) {\r\n              const {\r\n                func,\r\n                passResultAs\r\n              } = postLoadDoSomethingThenPassResultAsProp;\r\n              set(\r\n                localDownloaded,\r\n                passResultAs,\r\n                func(data, onAdditionalDemandConfig)\r\n              );\r\n            }\r\n            if (extendAdditionalOnDemandConfig) {\r\n              onAdditionalDemandConfig = [\r\n                ...onAdditionalDemandConfig,\r\n                ...extendAdditionalOnDemandConfig(localDownloaded)\r\n              ];\r\n            }\r\n          }\r\n        )\r\n      )\r\n      // скачивает все на основе массива построеннго по требованию\r\n      .then(r =>\r\n        // loadStuffDependingOnConfig(onAdditionalDemandConfig, localDownloaded)\r\n        axios\r\n          .all(\r\n            onAdditionalDemandConfig.map(item =>\r\n              axios.get(item.urlToDownload, { cancelToken: source.token })\r\n            )\r\n          )\r\n          .then(response =>\r\n            onAdditionalDemandConfig.forEach(\r\n              (\r\n                {\r\n                  whereToStore,\r\n                  rebuildReceivedValue,\r\n                  postLoadDoSomethingThenPassResultAsProp\r\n                },\r\n                index\r\n              ) => {\r\n                const { data } = response[index];\r\n\r\n                set(\r\n                  localDownloaded,\r\n                  whereToStore,\r\n                  rebuildReceivedValue ? rebuildReceivedValue(data) : data\r\n                );\r\n\r\n                if (postLoadDoSomethingThenPassResultAsProp) {\r\n                  const {\r\n                    func,\r\n                    passResultAs\r\n                  } = postLoadDoSomethingThenPassResultAsProp;\r\n                  set(\r\n                    localDownloaded,\r\n                    passResultAs,\r\n                    func(data, onAdditionalDemandConfig)\r\n                  );\r\n                }\r\n              }\r\n            )\r\n          )\r\n      )\r\n      .then(r => {\r\n        // Вызываем функцию для оцпионального перестроения скаченных значений\r\n        if (\r\n          rebuildDownloadedObj &&\r\n          typeof rebuildDownloadedObj === \"function\"\r\n        ) {\r\n          localDownloaded = {\r\n            ...localDownloaded,\r\n            ...rebuildDownloadedObj(localDownloaded)\r\n          };\r\n        }\r\n        setDownloaded(localDownloaded);\r\n        setIsLoading(false);\r\n      })\r\n      .catch(error => {\r\n        if (!axios.isCancel(error)) {\r\n          if (errorHandler) {\r\n            errorHandler(error);\r\n          }\r\n          console.log(error);\r\n        }\r\n      });\r\n    return () => {\r\n      source.cancel(\"Cancelling in cleanup\");\r\n    };\r\n  }, [config, errorHandler, rebuildDownloadedObj]);\r\n  return isLoading ? (\r\n    <PreloaderComponent />\r\n  ) : (\r\n    <Component {...downloaded} {...rest} />\r\n  );\r\n};\r\n\r\nexport default CompletePromiseThenRenderComponent;\r\n\r\nconst configObjectPropTypes = PropTypes.shape({\r\n  urlToDownload: PropTypes.string.isRequired,\r\n  whereToStore: PropTypes.string.isRequired,\r\n  rebuildReceivedValue: PropTypes.func\r\n});\r\n\r\nCompletePromiseThenRenderComponent.defaultProps = {\r\n  PreloaderComponent: CircularProgress,\r\n  errorHandler: undefined,\r\n  rebuildDownloadedObj: undefined\r\n};\r\n\r\nCompletePromiseThenRenderComponent.propTypes = {\r\n  config: PropTypes.arrayOf(configObjectPropTypes).isRequired,\r\n  Component: PropTypes.oneOfType([\r\n    PropTypes.func,\r\n    PropTypes.element,\r\n    PropTypes.shape({})\r\n  ]).isRequired,\r\n  PreloaderComponent: PropTypes.func,\r\n  errorHandler: PropTypes.func,\r\n  rebuildDownloadedObj: PropTypes.func\r\n};\r\n","import { get, set } from \"lodash\";\r\nimport {\r\n  baseDictRebuildReceivedOption,\r\n  getUserFunctions\r\n} from \"../../../constants\";\r\n\r\nexport const constructFieldInitialValue = (field, userFunctions) => {\r\n  const { type, defaultValue } = field;\r\n  if (defaultValue) {\r\n    if (typeof defaultValue === \"function\") {\r\n      return defaultValue(userFunctions);\r\n    }\r\n    return defaultValue;\r\n  }\r\n  switch (type) {\r\n    case \"text\": {\r\n      return \"\";\r\n    }\r\n    case \"select\": {\r\n      return field.multiple ? [] : null;\r\n    }\r\n    case \"checkbox\": {\r\n      return false;\r\n    }\r\n    case \"date-range\": {\r\n      return [];\r\n    }\r\n    case \"file\": {\r\n      return null;\r\n    }\r\n    case \"fieldArray\": {\r\n      return [];\r\n    }\r\n    default: {\r\n      return \"\";\r\n    }\r\n  }\r\n};\r\n\r\nexport const createEmptyFieldArrayObj = fields => {\r\n  const result = {};\r\n  fields.forEach(field => {\r\n    result[field.name] = constructFieldInitialValue(field);\r\n  });\r\n  return result;\r\n};\r\n\r\nexport const constructInitialValuesForEmptyFormWithOutBlocks = confObj => {\r\n  const initialValues = {};\r\n  confObj.fields.forEach(field =>\r\n    set(initialValues, field.name, constructFieldInitialValue(field))\r\n  );\r\n  return initialValues;\r\n};\r\n\r\nexport const constructInitialValuesForEmptyForm = formObj => {\r\n  const initialValues = {};\r\n  const userFunctions = getUserFunctions();\r\n  formObj.blocks.forEach(({ fields }) =>\r\n    fields.forEach(field =>\r\n      set(\r\n        initialValues,\r\n        field.name,\r\n        constructFieldInitialValue(field, userFunctions)\r\n      )\r\n    )\r\n  );\r\n  return initialValues;\r\n};\r\n\r\nexport const rebuildDownloadedInitialValue = (value, field, userFunctions) => {\r\n  const { rebuildReceivedValue, type } = field;\r\n  switch (type) {\r\n    case \"text\": {\r\n      if (value !== null && typeof value !== \"undefined\") {\r\n        if (rebuildReceivedValue) {\r\n          return rebuildReceivedValue(value);\r\n        }\r\n        return value;\r\n      }\r\n      return constructFieldInitialValue(field, userFunctions);\r\n    }\r\n    case \"select\": {\r\n      if (typeof value !== \"undefined\") {\r\n        if (value !== null && field.multiple !== true) {\r\n          return rebuildReceivedValue\r\n            ? rebuildReceivedValue(value)\r\n            : baseDictRebuildReceivedOption(value);\r\n        }\r\n        if (Array.isArray(value) && field.multiple === true) {\r\n          return value.map(el =>\r\n            rebuildReceivedValue\r\n              ? rebuildReceivedValue(el)\r\n              : baseDictRebuildReceivedOption(el)\r\n          );\r\n        }\r\n      }\r\n      return constructFieldInitialValue(field, userFunctions);\r\n    }\r\n    case \"checkbox\": {\r\n      if (value === true || value === false) {\r\n        return value;\r\n      }\r\n      if (value === \"true\" || value === \"false\") {\r\n        return value === \"true\";\r\n      }\r\n      return constructFieldInitialValue(field, userFunctions);\r\n    }\r\n    case \"date-range\": {\r\n      return constructFieldInitialValue(field, userFunctions);\r\n    }\r\n    case \"date\": {\r\n      if (value !== \"\") {\r\n        if (rebuildReceivedValue) {\r\n          return rebuildReceivedValue(value);\r\n        }\r\n        return value;\r\n      }\r\n      return constructFieldInitialValue(field, userFunctions);\r\n    }\r\n    case \"file\": {\r\n      if (value !== null || typeof value !== \"undefined\") {\r\n        if (rebuildReceivedValue) {\r\n          return rebuildReceivedValue(value);\r\n        }\r\n        return value;\r\n      }\r\n      return constructFieldInitialValue(field, userFunctions);\r\n    }\r\n\r\n    default: {\r\n      if (value === null || value === undefined) {\r\n        return \"\";\r\n      }\r\n      return value;\r\n      /* throw new Error(\r\n        `не найдено обработчика для поля ${field.name} с типом ${type}`\r\n      ); */\r\n    }\r\n  }\r\n};\r\n\r\nexport const baseRebuildReceivedInitialValues = (\r\n  formObj,\r\n  receivedInitialValues\r\n) => {\r\n  const resultingInitialValues = {};\r\n  const userFunctions = getUserFunctions();\r\n  formObj.blocks.forEach(({ fields }) =>\r\n    fields.forEach(field => {\r\n      set(\r\n        resultingInitialValues,\r\n        field.name,\r\n        rebuildDownloadedInitialValue(\r\n          get(receivedInitialValues, field.name),\r\n          field,\r\n          userFunctions\r\n        )\r\n      );\r\n    })\r\n  );\r\n  return resultingInitialValues;\r\n};\r\n","import { baseRebuildReceivedInitialValues } from \"../../formikMUi/utils/initialValuesUtils\";\r\n\r\nconst baseWhereToStore = \"firstFormInitialValues\";\r\n\r\nexport const getInitialValues = (modal, formObj, whereToStore) => {\r\n  const identifier = formObj.customId\r\n    ? modal.item[formObj.customId]\r\n    : modal.item.uniqueId;\r\n  const urlToDownloadWithOutProjection = `${formObj.url}/${identifier}`;\r\n  return {\r\n    whereToStore: whereToStore || baseWhereToStore,\r\n    urlToDownload: formObj.projection\r\n      ? `${urlToDownloadWithOutProjection}?projection=${formObj.projection}`\r\n      : urlToDownloadWithOutProjection,\r\n    rebuildReceivedValue: data =>\r\n      baseRebuildReceivedInitialValues(formObj, data)\r\n  };\r\n};\r\n","import { get } from \"lodash\";\n\nexport const checkIfFieldHasValidationError = (name, touched, errors) => {\n  const isFieldTouched = get(touched, name, false);\n  const errorMessage = get(errors, name, \"\");\n  return {\n    error: Boolean(isFieldTouched && errorMessage),\n    helperText: isFieldTouched ? errorMessage : undefined\n  };\n};\n","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport * as Proptypes from \"prop-types\";\r\nimport { checkIfFieldHasValidationError } from \"../utils/checkIfFieldHasValidationError\";\r\n\r\nexport const WrappedTextField = ({\r\n  field,\r\n  form: { touched, errors },\r\n  multiline,\r\n  ...props\r\n}) => {\r\n  const textFieldProps = checkIfFieldHasValidationError(\r\n    field.name,\r\n    touched,\r\n    errors\r\n  );\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      {...textFieldProps}\r\n      multiline={multiline}\r\n      variant={multiline ? \"outlined\" : undefined}\r\n      style={\r\n        multiline\r\n          ? {\r\n              margin: \"8px 0\"\r\n            }\r\n          : undefined\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nWrappedTextField.defaultProps = {\r\n  multiline: false\r\n};\r\n\r\nWrappedTextField.propTypes = {\r\n  field: Proptypes.shape({\r\n    name: Proptypes.string.isRequired,\r\n    onChange: Proptypes.func.isRequired\r\n  }).isRequired,\r\n  form: Proptypes.shape({\r\n    errors: Proptypes.shape({}).isRequired,\r\n    touched: Proptypes.shape({}).isRequired\r\n  }).isRequired,\r\n  multiline: Proptypes.bool\r\n};\r\n","import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport Select from \"react-select\";\r\nimport { makeStyles, useTheme } from \"@material-ui/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport { emphasize } from \"@material-ui/core/styles/colorManipulator\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    height: 250\r\n  },\r\n  input: {\r\n    display: \"flex\",\r\n    padding: 0\r\n  },\r\n  valueContainer: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    overflow: \"hidden\"\r\n  },\r\n  chip: {\r\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`\r\n  },\r\n  chipFocused: {\r\n    backgroundColor: emphasize(\r\n      theme.palette.type === \"light\"\r\n        ? theme.palette.grey[300]\r\n        : theme.palette.grey[700],\r\n      0.08\r\n    )\r\n  },\r\n  noOptionsMessage: {\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`\r\n  },\r\n  singleValue: {\r\n    fontSize: 16\r\n  },\r\n  placeholder: {\r\n    position: \"absolute\",\r\n    left: 2,\r\n    fontSize: 16\r\n  },\r\n  paper: {\r\n    position: \"absolute\",\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  divider: {\r\n    height: theme.spacing.unit * 2\r\n  }\r\n}));\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  const heigthCalc = props.isMulti ? null : \"32px\";\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          style: { height: heigthCalc },\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps\r\n        }\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <Tooltip title={props.children}>\r\n      <MenuItem\r\n        buttonRef={props.innerRef}\r\n        selected={props.isFocused}\r\n        component=\"div\"\r\n        style={{\r\n          fontWeight: props.isSelected ? 500 : 400\r\n        }}\r\n        {...props.innerProps}\r\n      >\r\n        {props.children}\r\n      </MenuItem>\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Tooltip title={props.children}>\r\n      <Typography\r\n        className={props.selectProps.classes.singleValue}\r\n        {...props.innerProps}\r\n      >\r\n        {props.children}\r\n      </Typography>\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return (\r\n    <div\r\n      className={props.selectProps.classes.valueContainer}\r\n      style={!props.isMulti ? { height: \"25px\" } : undefined}\r\n    >\r\n      {props.children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Menu(props) {\r\n  return (\r\n    <Paper\r\n      square\r\n      className={props.selectProps.classes.paper}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  Menu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer\r\n};\r\n\r\nexport function ReactSelectMUI({\r\n  isMulti,\r\n  label,\r\n  options,\r\n  value,\r\n  isDisabled,\r\n  placeholder,\r\n  handleChange,\r\n  textFieldProps,\r\n  onBlur,\r\n  menuPortalTarget\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const selectStyles = {\r\n    input: base => ({\r\n      ...base,\r\n      color: theme.palette.text.primary,\r\n      \"& input\": {\r\n        font: \"inherit\"\r\n      }\r\n    })\r\n  };\r\n  return (\r\n    <Select\r\n      classes={classes}\r\n      styles={selectStyles}\r\n      isClearable\r\n      isDisabled={isDisabled}\r\n      textFieldProps={{\r\n        label,\r\n        InputLabelProps: {\r\n          shrink: true\r\n        },\r\n        ...textFieldProps\r\n      }}\r\n      options={options}\r\n      components={components}\r\n      value={value}\r\n      onChange={handleChange}\r\n      placeholder={placeholder}\r\n      isMulti={isMulti || false}\r\n      closeMenuOnSelect={!isMulti}\r\n      menuPosition=\"fixed\"\r\n      menuPlacement=\"auto\"\r\n      noOptionsMessage={() => \"Нет доступных для выбора элементов\"}\r\n      onBlur={onBlur}\r\n      menuPortalTarget={menuPortalTarget}\r\n    />\r\n  );\r\n}\r\n\r\nReactSelectMUI.defaultProps = {\r\n  isDisabled: false,\r\n  value: null,\r\n  placeholder: \"Введите критерий поиска\",\r\n  textFieldProps: {},\r\n  options: [],\r\n  onBlur: undefined,\r\n  isMulti: false,\r\n  menuPortalTarget: undefined\r\n};\r\n\r\nReactSelectMUI.propTypes = {\r\n  isMulti: PropTypes.bool,\r\n  label: PropTypes.string.isRequired,\r\n  options: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      label: PropTypes.string\r\n    })\r\n  ).isRequired,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.shape({\r\n      label: PropTypes.string\r\n    }),\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        label: PropTypes.string\r\n      })\r\n    )\r\n  ]),\r\n  isDisabled: PropTypes.bool,\r\n  handleChange: PropTypes.func.isRequired,\r\n  placeholder: PropTypes.string,\r\n  textFieldProps: PropTypes.shape({}),\r\n  onBlur: PropTypes.func,\r\n  menuPortalTarget: PropTypes.shape({})\r\n};\r\n","// инкапсуляция слияния предыщ-го состояния с полученными изменениями\r\nexport const wrappedSetStatus = (setStatus, status) => changedStatusProps => {\r\n  if (changedStatusProps) {\r\n    setStatus({ ...status, ...changedStatusProps });\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { get } from \"lodash\";\r\nimport { ReactSelectMUI } from \"../../reactSelectMUI\";\r\nimport { checkIfFieldHasValidationError } from \"../utils/checkIfFieldHasValidationError\";\r\nimport { wrappedSetStatus } from \"../utils/wrappedFunctions\";\r\n\r\nexport const WrappedReactSelect = ({\r\n  field: { name, value, onBlur },\r\n  label,\r\n  customOptionsName,\r\n  options: hardCodedOptions,\r\n  isMulti,\r\n  isDisabled,\r\n  placeholder,\r\n  form: {\r\n    errors,\r\n    touched,\r\n    setFieldTouched,\r\n    setFieldValue,\r\n    initialValues,\r\n    status: { optionsMap },\r\n    status,\r\n    setStatus\r\n  },\r\n  customOnChange\r\n}) => {\r\n  // это кастыль(( он появился потому что структура optionsMap плоская, а name у field может быть не плоским\r\n  let resName;\r\n  if (/./.test(name)) {\r\n    const tmpName = name.split(\".\");\r\n    resName = tmpName[tmpName.length - 1];\r\n  } else {\r\n    resName = name;\r\n  }\r\n\r\n  const { options, loaded } = get(optionsMap, customOptionsName || resName) || {\r\n      options: hardCodedOptions,\r\n      loaded: true\r\n    } || { options: [], loaded: true };\r\n  const textFieldProps = checkIfFieldHasValidationError(name, touched, errors);\r\n\r\n  let placeHolderText;\r\n  if (!loaded) {\r\n    placeHolderText = \"Идет загрузка данных...\";\r\n  } else if (placeholder) {\r\n    placeHolderText = placeholder;\r\n  } else if (isDisabled && value == null) {\r\n    placeHolderText = \"\";\r\n  }\r\n  return (\r\n    <ReactSelectMUI\r\n      options={options}\r\n      isMulti={isMulti}\r\n      onMenuClose={() => setFieldTouched(name, true)}\r\n      textFieldProps={textFieldProps}\r\n      isDisabled={isDisabled || !loaded}\r\n      placeholder={placeHolderText}\r\n      label={label}\r\n      value={value}\r\n      onBlur={onBlur}\r\n      handleChange={selected => {\r\n        if (customOnChange) {\r\n          customOnChange({\r\n            name,\r\n            value: selected,\r\n            initialValues,\r\n            setFieldValue,\r\n            status,\r\n            setStatus: wrappedSetStatus(setStatus, status)\r\n          });\r\n        }\r\n        setFieldValue(name, selected);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nWrappedReactSelect.defaultProps = {\r\n  label: \"\",\r\n  options: [],\r\n  placeholder: undefined,\r\n  customOnChange: undefined,\r\n  customOptionsName: undefined\r\n};\r\n\r\nWrappedReactSelect.propTypes = {\r\n  field: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n    value(props, propName, componentName) {\r\n      if (props.isMulti === true && !Array.isArray(props[propName])) {\r\n        return new Error(\r\n          `prop \\`${propName}\\` of type Array should be supplied` +\r\n            ` \\`${componentName}\\`. Validation failed.`\r\n        );\r\n      }\r\n      return undefined;\r\n    },\r\n    onBlur: PropTypes.func\r\n  }).isRequired,\r\n  label: PropTypes.string,\r\n  options: PropTypes.arrayOf(\r\n    PropTypes.shape({ label: PropTypes.string.isRequired })\r\n  ),\r\n  isMulti: PropTypes.bool.isRequired,\r\n  isDisabled: PropTypes.bool.isRequired,\r\n  form: PropTypes.shape({}).isRequired,\r\n  placeholder: PropTypes.string,\r\n  customOnChange: PropTypes.func,\r\n  customOptionsName: PropTypes.string\r\n};\r\n","import React from \"react\";\r\nimport MaskedInput, { maskArray, MaskedInputProps } from \"react-text-mask\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { BaseTextFieldProps } from \"@material-ui/core/TextField\";\r\n\r\ninterface TextMaskCustomProps extends MaskedInputProps {\r\n  inputRef: Function;\r\n}\r\n\r\nfunction TextMaskCustom({\r\n  mask,\r\n  pipe,\r\n  showMask,\r\n  inputRef,\r\n  ...other\r\n}: TextMaskCustomProps) {\r\n  return (\r\n    <MaskedInput\r\n      {...other}\r\n      ref={ref => {\r\n        inputRef(ref ? ref.inputElement : null);\r\n      }}\r\n      mask={mask}\r\n      pipe={pipe}\r\n      // placeholderChar={'\\u2000'}\r\n    />\r\n  );\r\n}\r\n\r\nTextMaskCustom.propTypes = {\r\n  inputRef: PropTypes.func.isRequired\r\n};\r\n\r\nexport interface MaskedInputMUIProps extends BaseTextFieldProps {\r\n  mask?: maskArray | ((value: string) => maskArray);\r\n  keepCharPositions?: boolean;\r\n  pipe?: (\r\n    conformedValue: string,\r\n    config: any\r\n  ) => false | string | { value: string; indexesOfPipedChars: number[] };\r\n  InputProps: any;\r\n}\r\n\r\nexport const MaskedInputMUI = ({\r\n  label = \"\",\r\n  mask,\r\n  pipe,\r\n  keepCharPositions,\r\n  InputProps,\r\n  ...rest\r\n}: any) => (\r\n  <TextField\r\n    label={label}\r\n    InputProps={{\r\n      ...InputProps,\r\n      inputComponent: TextMaskCustom,\r\n      inputProps: { mask, pipe, keepCharPositions }\r\n    }}\r\n    {...rest}\r\n  />\r\n);\r\n","import React from \"react\";\r\nimport { MaskedInputMUI } from \"../../maskedInputMUI\";\r\nimport { checkIfFieldHasValidationError } from \"../utils/checkIfFieldHasValidationError\";\r\n\r\nexport const WrappedMaskedInputMUI = ({\r\n  field,\r\n  form: { errors, touched },\r\n  ...rest\r\n}) => {\r\n  const textFieldProps = checkIfFieldHasValidationError(\r\n    field.name,\r\n    touched,\r\n    errors\r\n  );\r\n  return <MaskedInputMUI {...field} {...textFieldProps} {...rest} />;\r\n};\r\n","import React from \"react\";\r\nimport { Checkbox, FormControlLabel } from \"@material-ui/core\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { wrappedSetStatus } from \"../utils/wrappedFunctions\";\r\n\r\nexport const WrappedCheckBoxMUI = ({\r\n  field: { name, value },\r\n  form: { status, setStatus, setFieldValue, initialValues, validateField },\r\n  label,\r\n  disabled = false,\r\n  customOnChange\r\n}) => (\r\n  <FormControlLabel\r\n    control={<Checkbox indeterminate={value === null} color=\"primary\" />}\r\n    onBlur={() => {\r\n      validateField(name);\r\n    }}\r\n    onChange={() => {\r\n      if (customOnChange) {\r\n        customOnChange({\r\n          name,\r\n          value: !value,\r\n          initialValues,\r\n          setFieldValue,\r\n          status,\r\n          setStatus: wrappedSetStatus(setStatus, status)\r\n        });\r\n      }\r\n      setFieldValue(name, !value);\r\n    }}\r\n    value={`${value}`}\r\n    checked={value}\r\n    label={label}\r\n    disabled={disabled}\r\n  />\r\n);\r\n\r\nWrappedCheckBoxMUI.defaultProps = {\r\n  label: \" \",\r\n  customOnChange: undefined\r\n};\r\n\r\nWrappedCheckBoxMUI.propTypes = {\r\n  field: PropTypes.shape({}).isRequired,\r\n  form: PropTypes.shape({}).isRequired,\r\n  label: PropTypes.string,\r\n  disabled: PropTypes.bool.isRequired,\r\n  customOnChange: PropTypes.func\r\n};\r\n","import axios from \"axios\";\r\n\r\nexport const commonFilesUrl = \"/api/file/download/commonFiles\";\r\n\r\nexport const downloadFile = (url, fileName) =>\r\n  axios({\r\n    url,\r\n    method: \"GET\",\r\n    responseType: \"blob\" // important\r\n  })\r\n    .then(response => {\r\n      const blobUrl = window.URL.createObjectURL(new Blob([response.data]));\r\n      const link = document.createElement(\"a\");\r\n      link.href = blobUrl;\r\n      link.setAttribute(\"download\", fileName);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n    })\r\n    .catch(e => console.log(e));\r\n\r\nexport const claimAttachmentDownloadUrl = (claimUuid, fileName) =>\r\n  `/api/claim/attachment/download/${claimUuid}/${fileName}`;\r\n\r\nexport const urlToDownLoadClaimAttachmentFromFtp = ({ value }) => {\r\n  const { uuidClaim, label: fileName } = value[0];\r\n  return claimAttachmentDownloadUrl(uuidClaim, fileName);\r\n};\r\n","import React from \"react\";\r\nimport Dropzone from \"react-dropzone\";\r\nimport {\r\n  Typography,\r\n  Grid,\r\n  IconButton,\r\n  FormHelperText\r\n} from \"@material-ui/core\";\r\nimport {\r\n  InsertDriveFileOutlined,\r\n  Done,\r\n  VerticalAlignBottomOutlined\r\n} from \"@material-ui/icons\";\r\nimport * as Proptypes from \"prop-types\";\r\nimport { checkIfFieldHasValidationError } from \"../utils/checkIfFieldHasValidationError\";\r\nimport { commonFilesUrl, downloadFile } from \"../utils/downLoad\";\r\n\r\nconst baseStyle = {\r\n  height: \"100%\",\r\n  borderWidth: 1,\r\n  borderColor: \"#1c375a66\",\r\n  borderStyle: \"dashed\",\r\n  borderRadius: 5,\r\n  padding: \"16px\"\r\n};\r\nconst activeStyle = {\r\n  borderColor: \"#1676f380\",\r\n  backgroundColor: \"#eee\",\r\n  background: \"#1676f31a\",\r\n  transition: \"background-color 0.1s, border-color 0.1s\"\r\n};\r\nconst rejectStyle = {\r\n  borderColor: \"#c66\",\r\n  backgroundColor: \"#eee\"\r\n};\r\n\r\n/* const separator = {\r\n  borderTop: \"1px solid #1a39601a\"\r\n}; */\r\n\r\nconst textStyle = {\r\n  marginLeft: \"8px\"\r\n};\r\n\r\nexport const WrappedReactDropZoneMUI = ({\r\n  field: { value, name },\r\n  form: { errors, touched, setFieldValue },\r\n  disabled,\r\n  label: controlLabel,\r\n  onDrop,\r\n  customUrlToDownLoadFile,\r\n  accept\r\n}) => {\r\n  const { label: fileName, value: fileId } =\r\n    value !== null ? value : { label: \"\", value: \"\" };\r\n  const { error, helperText } = checkIfFieldHasValidationError(\r\n    name,\r\n    touched,\r\n    errors\r\n  );\r\n  return (\r\n    <Dropzone\r\n      onDrop={onDrop}\r\n      disabled={disabled}\r\n      multiple={false}\r\n      maxSize={10485760}\r\n      accept={accept}\r\n    >\r\n      {({\r\n        getRootProps,\r\n        getInputProps,\r\n        isDragAccept,\r\n        isDragReject,\r\n        acceptedFiles,\r\n        rejectedFiles\r\n      }) => {\r\n        let styles = { ...baseStyle };\r\n        styles = isDragAccept ? { ...styles, ...activeStyle } : styles;\r\n        styles = isDragReject ? { ...styles, ...rejectStyle } : styles;\r\n\r\n        return (\r\n          <div style={{ marginTop: \"4px\", position: \"relative\" }}>\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                left: \"8px\",\r\n                top: \"-8px\",\r\n                backgroundColor: \"white\"\r\n              }}\r\n            >\r\n              <Typography>{controlLabel}</Typography>\r\n            </div>\r\n            <Grid\r\n              container\r\n              alignItems=\"flex-start\"\r\n              justify=\"flex-start\"\r\n              direction=\"column\"\r\n              {...getRootProps()}\r\n              style={styles}\r\n            >\r\n              <Grid container alignItems=\"center\">\r\n                <input {...getInputProps()} />\r\n                {(value === null || (value && value.value === null)) &&\r\n                  !disabled &&\r\n                  !isDragReject && (\r\n                    <>\r\n                      <InsertDriveFileOutlined />\r\n                      <Typography color=\"textPrimary\" style={textStyle}>\r\n                        Перенесите файл\r\n                      </Typography>\r\n                    </>\r\n                  )}\r\n                {(value === null || (value && value.value === null)) &&\r\n                  disabled && (\r\n                    <Typography color=\"textPrimary\" style={textStyle}>\r\n                      Файл отсутствует\r\n                    </Typography>\r\n                  )}\r\n                {isDragReject && (\r\n                  <Typography align=\"center\" color=\"error\">\r\n                    Не поддерживаемый тип файла\r\n                  </Typography>\r\n                )}\r\n                {fileName && (\r\n                  <Grid container>\r\n                    <Grid\r\n                      key={fileName}\r\n                      container\r\n                      justify=\"space-between\"\r\n                      alignItems=\"center\"\r\n                    >\r\n                      <Grid item>\r\n                        <Grid container alignItems=\"center\">\r\n                          <Done />\r\n                          <Typography style={textStyle}>{fileName}</Typography>\r\n                          <IconButton\r\n                            onClick={event => {\r\n                              if (event) {\r\n                                event.stopPropagation();\r\n                              }\r\n                              downloadFile(\r\n                                customUrlToDownLoadFile\r\n                                  ? customUrlToDownLoadFile(value)\r\n                                  : `${commonFilesUrl}/${fileId}`,\r\n                                fileName\r\n                              );\r\n                            }}\r\n                            style={{\r\n                              position: \"absolute\",\r\n                              right: \"0\"\r\n                            }}\r\n                          >\r\n                            <VerticalAlignBottomOutlined />\r\n                          </IconButton>\r\n                        </Grid>\r\n                      </Grid>\r\n                      {/* <Grid item>\r\n                        <Close />\r\n                      </Grid> */}\r\n                    </Grid>\r\n                  </Grid>\r\n                )}\r\n              </Grid>\r\n            </Grid>\r\n            <FormHelperText error={error}>{helperText}</FormHelperText>\r\n          </div>\r\n        );\r\n      }}\r\n    </Dropzone>\r\n  );\r\n};\r\n\r\nWrappedReactDropZoneMUI.defaultProps = {\r\n  disabled: false,\r\n  label: \"\",\r\n  downloadFile: undefined,\r\n  customUrlToDownLoadFile: undefined,\r\n  accept: undefined\r\n};\r\n\r\nWrappedReactDropZoneMUI.propTypes = {\r\n  field: Proptypes.shape({\r\n    name: Proptypes.string.isRequired,\r\n    onChange: Proptypes.func.isRequired\r\n  }).isRequired,\r\n  form: Proptypes.shape({\r\n    errors: Proptypes.shape({}).isRequired,\r\n    touched: Proptypes.shape({}).isRequired,\r\n    setFieldValue: Proptypes.func\r\n  }).isRequired,\r\n  disabled: Proptypes.bool,\r\n  label: Proptypes.string,\r\n  onDrop: Proptypes.func.isRequired,\r\n  downloadFile: Proptypes.func,\r\n  customUrlToDownLoadFile: Proptypes.func,\r\n  accept: Proptypes.oneOfType([\r\n    Proptypes.string,\r\n    Proptypes.arrayOf(Proptypes.string)\r\n  ])\r\n};\r\n","import axios from \"axios\";\r\nimport { dispatchOpenSnackBar } from \"../../../constants\";\r\n\r\nexport const fieldLevelUniqueCheck = (axiosConfig, value) =>\r\n  axios(axiosConfig)\r\n    .then(({ data }) => {\r\n      if (data === true) {\r\n        return `Значение \"${value}\" должно быть уникальным`;\r\n      }\r\n      return undefined;\r\n    })\r\n    .catch(er => {\r\n      console.log(er);\r\n      dispatchOpenSnackBar(\"произошла внутренняя ошибка\");\r\n      return undefined;\r\n    });\r\n","import {\n  addDays,\n  endOfDay,\n  startOfDay,\n  startOfMonth,\n  endOfMonth,\n  addMonths,\n  startOfWeek,\n  endOfWeek,\n  isSameDay,\n  differenceInCalendarDays\n} from \"date-fns\";\n\nconst defineds = {\n  startOfWeek: startOfWeek(new Date()),\n  endOfWeek: endOfWeek(new Date()),\n  startOfLastWeek: startOfWeek(addDays(new Date(), -7)),\n  endOfLastWeek: endOfWeek(addDays(new Date(), -7)),\n  startOfToday: startOfDay(new Date()),\n  endOfToday: endOfDay(new Date()),\n  startOfYesterday: startOfDay(addDays(new Date(), -1)),\n  endOfYesterday: endOfDay(addDays(new Date(), -1)),\n  startOfMonth: startOfMonth(new Date()),\n  endOfMonth: endOfMonth(new Date()),\n  startOfLastMonth: startOfMonth(addMonths(new Date(), -1)),\n  endOfLastMonth: endOfMonth(addMonths(new Date(), -1))\n};\n\nconst staticRangeHandler = {\n  range: {},\n  isSelected(range) {\n    const definedRange = this.range();\n    return (\n      isSameDay(range.startDate, definedRange.startDate) &&\n      isSameDay(range.endDate, definedRange.endDate)\n    );\n  }\n};\n\nexport function createStaticRanges(ranges) {\n  return ranges.map(range => ({ ...staticRangeHandler, ...range }));\n}\n\nexport const defaultStaticRanges = createStaticRanges([\n  {\n    label: \"Все дни\",\n    range: () => ({\n      startDate: null,\n      endDate: null\n    })\n  },\n  {\n    label: \"Сегодня\",\n    range: () => ({\n      startDate: defineds.startOfToday,\n      endDate: defineds.endOfToday\n    })\n  },\n  {\n    label: \"Вчера\",\n    range: () => ({\n      startDate: defineds.startOfYesterday,\n      endDate: defineds.endOfYesterday\n    })\n  },\n\n  {\n    label: \"На этой неделе\",\n    range: () => ({\n      startDate: defineds.startOfWeek,\n      endDate: defineds.endOfWeek\n    })\n  },\n  {\n    label: \"Прошлая неделя\",\n    range: () => ({\n      startDate: defineds.startOfLastWeek,\n      endDate: defineds.endOfLastWeek\n    })\n  },\n  {\n    label: \"Этот месяц\",\n    range: () => ({\n      startDate: defineds.startOfMonth,\n      endDate: defineds.endOfMonth\n    })\n  },\n  {\n    label: \"Прошлый месяц\",\n    range: () => ({\n      startDate: defineds.startOfLastMonth,\n      endDate: defineds.endOfLastMonth\n    })\n  }\n]);\n\nexport const defaultInputRanges = [\n  {\n    label: \"дней до сегодняшнего дня\",\n    range(value) {\n      return {\n        startDate: addDays(\n          defineds.startOfToday,\n          (Math.max(Number(value), 1) - 1) * -1\n        ),\n        endDate: defineds.endOfToday\n      };\n    },\n    getCurrentValue(range) {\n      if (!isSameDay(range.endDate, defineds.endOfToday)) return \"-\";\n      if (!range.startDate) return \"∞\";\n      return differenceInCalendarDays(defineds.endOfToday, range.startDate) + 1;\n    }\n  },\n  {\n    label: \"дней, начиная c сегодня\",\n    range(value) {\n      const today = new Date();\n      return {\n        startDate: today,\n        endDate: addDays(today, Math.max(Number(value), 1) - 1)\n      };\n    },\n    getCurrentValue(range) {\n      if (!isSameDay(range.startDate, defineds.startOfToday)) return \"-\";\n      if (!range.endDate) return \"∞\";\n      return differenceInCalendarDays(range.endDate, defineds.startOfToday) + 1;\n    }\n  }\n];\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport {\r\n  TextField,\r\n  Popper,\r\n  Fade,\r\n  Paper,\r\n  Button,\r\n  Grid,\r\n  ClickAwayListener\r\n} from \"@material-ui/core\";\r\nimport { DateRangePicker } from \"react-date-range\";\r\nimport { format, parse } from \"date-fns\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { defaultStaticRanges, defaultInputRanges } from \"./defaultRanges\";\r\nimport \"react-date-range/dist/styles.css\"; // main style file\r\nimport \"react-date-range/dist/theme/default.css\";\r\nimport { checkIfFieldHasValidationError } from \"../formikMUi/utils/checkIfFieldHasValidationError\"; // theme css file\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  button: {\r\n    margin: theme.spacing.unit\r\n  },\r\n  buttonPanel: {\r\n    borderTop: \"solid 1px #eff2f7\"\r\n  },\r\n  popper: {\r\n    zIndex: 2000\r\n  }\r\n}));\r\n\r\nconst formatDateValue = selection => {\r\n  const startDate = selection.startDate\r\n    ? `${format(selection.startDate, \"YYYY-MM-DD\")} 00:00:00`\r\n    : null;\r\n  const endDate = selection.endDate\r\n    ? `${format(selection.endDate, \"YYYY-MM-DD\")} 23:59:59`\r\n    : null;\r\n  return [startDate, endDate];\r\n};\r\n\r\nconst IntegrateDateRangePickerWithMUI = props => {\r\n  const classes = getStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const {\r\n    pickerProps,\r\n    form: { touched, errors, setFieldValue },\r\n    field: { name, value },\r\n    label,\r\n    readOnly\r\n  } = props;\r\n  const errorHelperTextProps = checkIfFieldHasValidationError(\r\n    name,\r\n    touched,\r\n    errors\r\n  );\r\n\r\n  const [dateRange, setDateRange] = useState({\r\n    selection: {\r\n      startDate: new Date(),\r\n      endDate: new Date(),\r\n      key: \"selection\"\r\n    }\r\n  });\r\n\r\n  const textFieldValue =\r\n    value && Array.isArray(value) && value.length > 1\r\n      ? `${format(value[0], \"DD.MM.YYYY\")} - ${format(value[1], \"DD.MM.YYYY\")}`\r\n      : \"\";\r\n\r\n  useEffect(() => {\r\n    if (value && Array.isArray(value) && value.length > 1) {\r\n      setDateRange({\r\n        selection: {\r\n          startDate: parse(value[0], \"YYYY-MM-DD\", new Date()),\r\n          endDate: parse(value[1], \"YYYY-MM-DD\", new Date()),\r\n          key: \"selection\"\r\n        }\r\n      });\r\n    }\r\n  }, [value]);\r\n\r\n  const containerRef = useRef(null);\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <TextField\r\n        label={label}\r\n        value={textFieldValue}\r\n        onClick={() => {\r\n          if (readOnly === false) {\r\n            setOpen(true);\r\n          }\r\n        }}\r\n        {...errorHelperTextProps}\r\n        fullWidth\r\n      />\r\n      <Popper\r\n        open={open}\r\n        anchorEl={containerRef.current}\r\n        placement=\"bottom-start\"\r\n        transition\r\n        className={classes.popper}\r\n      >\r\n        {({ TransitionProps }) => (\r\n          <Fade {...TransitionProps} timeout={350}>\r\n            <ClickAwayListener\r\n              onClickAway={() => {\r\n                setOpen(false);\r\n              }}\r\n            >\r\n              <Paper>\r\n                <DateRangePicker\r\n                  ranges={[dateRange.selection]}\r\n                  staticRanges={[...defaultStaticRanges]}\r\n                  inputRanges={[...defaultInputRanges]}\r\n                  onChange={v => setDateRange(v)}\r\n                  {...pickerProps}\r\n                />\r\n                <Grid\r\n                  container\r\n                  justify=\"flex-end\"\r\n                  className={classes.buttonPanel}\r\n                >\r\n                  <Grid item>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      className={classes.button}\r\n                      onClick={() => setOpen(false)}\r\n                    >\r\n                      Закрыть\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      color=\"primary\"\r\n                      className={classes.button}\r\n                      onClick={() => {\r\n                        setFieldValue(\r\n                          name,\r\n                          formatDateValue(dateRange.selection)\r\n                        );\r\n                        setOpen(false);\r\n                      }}\r\n                    >\r\n                      Применить\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              </Paper>\r\n            </ClickAwayListener>\r\n          </Fade>\r\n        )}\r\n      </Popper>\r\n    </div>\r\n  );\r\n};\r\n\r\nIntegrateDateRangePickerWithMUI.defaultProps = {\r\n  readOnly: false,\r\n  label: \"\"\r\n};\r\n\r\nIntegrateDateRangePickerWithMUI.propTypes = {\r\n  pickerProps: PropTypes.shape({}).isRequired,\r\n  form: PropTypes.shape({ errors: PropTypes.shape({}).isRequired }).isRequired,\r\n  field: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n    value: PropTypes.arrayOf(PropTypes.string).isRequired\r\n  }).isRequired,\r\n  readOnly: PropTypes.bool,\r\n  label: PropTypes.string\r\n};\r\n\r\nexport default IntegrateDateRangePickerWithMUI;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport {\r\n  Popper,\r\n  Fade,\r\n  Paper,\r\n  Button,\r\n  Grid,\r\n  TextField,\r\n  ClickAwayListener\r\n} from \"@material-ui/core\";\r\nimport { Calendar } from \"react-date-range\";\r\nimport { format, parse } from \"date-fns\";\r\nimport \"react-date-range/dist/styles.css\"; // main style file\r\nimport \"react-date-range/dist/theme/default.css\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { checkIfFieldHasValidationError } from \"../formikMUi/utils/checkIfFieldHasValidationError\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  button: {\r\n    margin: theme.spacing.unit\r\n  },\r\n  buttonPanel: {\r\n    borderTop: \"solid 1px #eff2f7\"\r\n  },\r\n  popper: {\r\n    zIndex: 2000\r\n  }\r\n}));\r\n\r\nconst formatDateDisplay = date => {\r\n  if (date) {\r\n    return format(date, \"DD.MM.YYYY\");\r\n  }\r\n  return \"\";\r\n};\r\n\r\n/* const formatDateValue = date => {\r\n  if (date) {\r\n    return format(date, \"YYYY-MM-DD\");\r\n  }\r\n  return \"\";\r\n}; */\r\n\r\nexport const IntegrateDatePickerWithMUI = props => {\r\n  const classes = getStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [date, setDate] = useState(new Date());\r\n  const {\r\n    pickerProps,\r\n    label,\r\n    form: { touched, errors, setFieldValue },\r\n    field: { name, value },\r\n    readOnly\r\n  } = props;\r\n\r\n  const errorHelperTextProps = checkIfFieldHasValidationError(\r\n    name,\r\n    touched,\r\n    errors\r\n  );\r\n\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (value) {\r\n      setDate(parse(value, \"DD.MM.YYYY\", new Date()));\r\n    }\r\n  }, [value]);\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <TextField\r\n        value={value}\r\n        label={label}\r\n        onClick={() => {\r\n          if (readOnly === false) {\r\n            setOpen(true);\r\n          }\r\n        }}\r\n        {...errorHelperTextProps}\r\n        inputProps={{ readOnly }}\r\n        fullWidth\r\n      />\r\n      <Popper\r\n        open={open}\r\n        anchorEl={containerRef.current}\r\n        placement=\"bottom-start\"\r\n        transition\r\n        className={classes.popper}\r\n      >\r\n        {({ TransitionProps }) => (\r\n          <Fade {...TransitionProps} timeout={350}>\r\n            <ClickAwayListener\r\n              onClickAway={() => {\r\n                setOpen(false);\r\n              }}\r\n            >\r\n              <Paper>\r\n                <Calendar date={date} onChange={setDate} {...pickerProps} />\r\n                <Grid\r\n                  container\r\n                  justify=\"flex-end\"\r\n                  className={classes.buttonPanel}\r\n                >\r\n                  <Grid item>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      className={classes.button}\r\n                      onClick={() => setOpen(false)}\r\n                    >\r\n                      Закрыть\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <Button\r\n                      color=\"primary\"\r\n                      variant=\"outlined\"\r\n                      className={classes.button}\r\n                      onClick={() => {\r\n                        setFieldValue(name, formatDateDisplay(date));\r\n                        setOpen(false);\r\n                      }}\r\n                    >\r\n                      Применить\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              </Paper>\r\n            </ClickAwayListener>\r\n          </Fade>\r\n        )}\r\n      </Popper>\r\n    </div>\r\n  );\r\n};\r\n\r\nIntegrateDatePickerWithMUI.defaultProps = {\r\n  readOnly: false,\r\n  label: \"\"\r\n};\r\n\r\nIntegrateDatePickerWithMUI.propTypes = {\r\n  pickerProps: PropTypes.shape({}).isRequired,\r\n  field: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n    value: PropTypes.string.isRequired\r\n  }).isRequired,\r\n  form: PropTypes.shape({ errors: PropTypes.shape({}).isRequired }).isRequired,\r\n  readOnly: PropTypes.bool,\r\n  label: PropTypes.string\r\n};\r\n","import React from \"react\";\r\nimport { Field } from \"formik\";\r\nimport { get } from \"lodash\";\r\nimport locale from \"date-fns/locale/ru\";\r\nimport { WrappedTextField } from \"./wrappedComponents/wrappedTextField\";\r\nimport { WrappedReactSelect } from \"./wrappedComponents/wrappedReactSelect\";\r\nimport { WrappedMaskedInputMUI } from \"./wrappedComponents/wrappedMaskedInputMUI\";\r\nimport { WrappedCheckBoxMUI } from \"./wrappedComponents/wrappedCheckBoxMUI\";\r\nimport { WrappedReactDropZoneMUI } from \"./wrappedComponents/wrappedReactDropZoneMUI\";\r\nimport { fieldLevelUniqueCheck } from \"./utils/isValueUnique\";\r\nimport IntegrateDateRangePickerWithMUI from \"../IntegrateDateRangePickerWithMUI\";\r\nimport { defaultErrorHandler } from \"../../utils/defaultErrorHandler\";\r\nimport { IntegrateDatePickerWithMUI } from \"../IntegrateDatePickerWithMUI\";\r\nimport { getUserFunctions } from \"../../constants\";\r\n\r\nconst baseOnDrop = (files, field, setFieldValue) => {\r\n  const data = new FormData();\r\n  data.append(\"file\", files[0]);\r\n  field\r\n    .doBeforeSetFieldValue(data)\r\n    .then(({ data: fileId }) => {\r\n      setFieldValue(field.name, {\r\n        label: files[0].name,\r\n        value: fileId\r\n      });\r\n    })\r\n    .catch(error => {\r\n      defaultErrorHandler(error);\r\n    });\r\n};\r\n\r\nfunction createUniqueCheckFunction(initialValues, name, { uniqueCheck }) {\r\n  return value => {\r\n    if (value !== get(initialValues, name)) {\r\n      const { constructParams, url } = uniqueCheck;\r\n      const axiosConfig = {\r\n        method: \"get\",\r\n        url,\r\n        params: constructParams(initialValues, value)\r\n      };\r\n      return fieldLevelUniqueCheck(axiosConfig, value);\r\n    }\r\n    return undefined;\r\n  };\r\n}\r\n\r\nexport const renderField = ({\r\n  field,\r\n  classes,\r\n  readOnly,\r\n  initialValues,\r\n  setFieldValue,\r\n  status\r\n}) => {\r\n  const { type, name, label, additionalProps } = field;\r\n\r\n  switch (type) {\r\n    case \"text\": {\r\n      return (\r\n        <Field\r\n          name={name}\r\n          label={label}\r\n          component={WrappedTextField}\r\n          validate={\r\n            field.uniqueCheck\r\n              ? createUniqueCheckFunction(initialValues, name, field)\r\n              : undefined\r\n          }\r\n          className={classes.field}\r\n          {...additionalProps}\r\n          InputProps={{\r\n            readOnly: readOnly || field.readOnly || false\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    case \"select\": {\r\n      const fieldLevelReadOnly =\r\n        typeof field.readOnly === \"function\"\r\n          ? field.readOnly(getUserFunctions())\r\n          : field.readOnly;\r\n      return (\r\n        <Field\r\n          name={name}\r\n          label={label}\r\n          component={WrappedReactSelect}\r\n          options={field.options}\r\n          isMulti={field.multiple || false}\r\n          isDisabled={readOnly || fieldLevelReadOnly || false}\r\n          className={classes.field}\r\n          placeholder={field.placeholder}\r\n          customOnChange={field.customOnChange}\r\n          {...additionalProps}\r\n        />\r\n      );\r\n    }\r\n    case \"formatted\": {\r\n      return (\r\n        <Field\r\n          name={name}\r\n          label={label}\r\n          component={WrappedMaskedInputMUI}\r\n          validate={\r\n            field.uniqueCheck\r\n              ? createUniqueCheckFunction(initialValues, name, field)\r\n              : undefined\r\n          }\r\n          mask={field.mask}\r\n          pipe={field.pipe}\r\n          keepCharPositions={field.keepCharPositions}\r\n          className={classes.field}\r\n          {...additionalProps}\r\n          InputProps={{\r\n            readOnly: readOnly || field.readOnly || false\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    case \"checkbox\": {\r\n      return (\r\n        <Field\r\n          name={name}\r\n          label={label}\r\n          component={WrappedCheckBoxMUI}\r\n          className={classes.field}\r\n          disabled={readOnly || field.readOnly || false}\r\n          customOnChange={field.customOnChange}\r\n          {...additionalProps}\r\n        />\r\n      );\r\n    }\r\n    case \"password\": {\r\n      return (\r\n        <Field\r\n          name={name}\r\n          label={label}\r\n          component={WrappedTextField}\r\n          className={classes.field}\r\n          {...additionalProps}\r\n          InputProps={{\r\n            readOnly: readOnly || field.readOnly || false\r\n          }}\r\n          type=\"password\"\r\n        />\r\n      );\r\n    }\r\n    case \"date-range\": {\r\n      const pickerProps = {\r\n        locale: { ...locale },\r\n        moveRangeOnFirstSelection: false,\r\n        showDateDisplay: false\r\n      };\r\n      return (\r\n        <Field\r\n          name={name}\r\n          label={label}\r\n          readOnly={readOnly || field.readOnly || false}\r\n          className={classes.field}\r\n          component={IntegrateDateRangePickerWithMUI}\r\n          pickerProps={pickerProps}\r\n        />\r\n      );\r\n    }\r\n    case \"date\": {\r\n      const pickerProps = {\r\n        locale: { ...locale },\r\n        moveRangeOnFirstSelection: false,\r\n        showDateDisplay: false\r\n      };\r\n      return (\r\n        <Field\r\n          name={name}\r\n          label={label}\r\n          readOnly={readOnly || field.readOnly || false}\r\n          className={classes.field}\r\n          component={IntegrateDatePickerWithMUI}\r\n          pickerProps={pickerProps}\r\n        />\r\n      );\r\n    }\r\n    case \"file\": {\r\n      return (\r\n        <Field\r\n          name={name}\r\n          label={label}\r\n          onDrop={\r\n            field.onDrop\r\n              ? files => field.onDrop(files, field, setFieldValue, status)\r\n              : files => baseOnDrop(files, field, setFieldValue)\r\n          }\r\n          component={WrappedReactDropZoneMUI}\r\n          customUrlToDownLoadFile={\r\n            field.customUrlToDownLoadFile\r\n              ? field.customUrlToDownLoadFile\r\n              : undefined\r\n          }\r\n          disabled={readOnly || field.readOnly || false}\r\n          className={classes.field}\r\n          accept={field.accept}\r\n        />\r\n      );\r\n    }\r\n    case \"spaceFiller\": {\r\n      return <div className={classes.field} />;\r\n    }\r\n    default: {\r\n      throw new Error(\r\n        `Для поля name: ${name} не найдено обработчика для типа: ${type}`\r\n      );\r\n    }\r\n  }\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { FieldArray, Form } from \"formik\";\r\nimport {\r\n  Fab,\r\n  Grid,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemSecondaryAction,\r\n  Typography\r\n} from \"@material-ui/core\";\r\nimport classnames from \"classnames\";\r\nimport { get } from \"lodash\";\r\nimport { Add as AddIcon, Delete } from \"@material-ui/icons\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport uuidV4 from \"uuid/v4\";\r\nimport { renderField } from \"../../renderField\";\r\nimport { createEmptyFieldArrayObj } from \"../../utils/initialValuesUtils\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  isDeleted: {\r\n    color: \"#a94442\",\r\n    backgroundColor: \"#f2dede\",\r\n    borderColor: \"#ebccd1\",\r\n    border: \"1px solid transparent\",\r\n    borderRadius: \"4px\"\r\n  },\r\n  listSubItem: {\r\n    padding: `${theme.spacing.unit}px`,\r\n    width: \"100%\"\r\n  },\r\n  headerItem: {\r\n    width: \"100%\"\r\n  },\r\n  listItem: {\r\n    position: \"relative\"\r\n  },\r\n  lastItem: {\r\n    paddingTop: `${theme.spacing.unit * 2}px`,\r\n    // position: \"sticky\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    // bottom: \"0\",\r\n    // zIndex: 2,\r\n    // backgroundColor: \"white\",\r\n    paddingBottom: \"0\"\r\n  },\r\n  removeBtn: {\r\n    position: \"absolute\",\r\n    right: \"0\"\r\n  },\r\n  divider: {\r\n    marginLeft: \"8px\",\r\n    height: \"1px\",\r\n    backgroundColor: \"white\",\r\n    flex: \"1  1 auto\"\r\n  },\r\n  field: {\r\n    width: \"100%\"\r\n  },\r\n  fabContainer: {\r\n    marginBottom: `-${theme.spacing.unit * 3}px`\r\n  },\r\n  container: {\r\n    position: \"relative\",\r\n    minWidth: \"20vw\",\r\n    minHeight: \"20vh\"\r\n  },\r\n  header: {\r\n    position: \"sticky\",\r\n    zIndex: \"2\",\r\n    top: \"0\",\r\n    borderBottom: \"2px solid rgba(0, 0, 0, 0.12)\",\r\n    backgroundColor: \"#eeeeee\",\r\n    paddingTop: \"0\",\r\n    paddingBottom: \"0\",\r\n    marginBottom: `${theme.spacing.unit}px`\r\n  },\r\n  deleteBtn: {\r\n    right: \"-8px\"\r\n  },\r\n  secondaryAction: { paddingRight: \"0\", paddingLeft: \"0\" }\r\n}));\r\n\r\nlet previousValuesLength = 0;\r\n\r\nexport const RenderTableForm = ({\r\n  confObj,\r\n  values,\r\n  readOnly,\r\n  initialValues,\r\n  setFieldValue\r\n}) => {\r\n  const fistFieldArray = confObj.fields[0];\r\n  const emptyFieldArrayObj = createEmptyFieldArrayObj(fistFieldArray.fields);\r\n  const classes = useStyles();\r\n  let arrayHelpersRef;\r\n  const addBtnRef = useRef(null);\r\n  let maxCountOfColumns = 0;\r\n  fistFieldArray.fields.forEach(({ width = 1, hidden }) => {\r\n    if (hidden !== true) {\r\n      maxCountOfColumns += width;\r\n    }\r\n  });\r\n  const widths = [];\r\n  const minColumnWidth = 100 / maxCountOfColumns;\r\n  fistFieldArray.fields.forEach(({ width = 1 }) => {\r\n    widths.push(minColumnWidth * width);\r\n  });\r\n  useEffect(() => {\r\n    // пришлось сделать переменную в которой хранится пред-я длина массива\r\n    if (addBtnRef.current !== null) {\r\n      if (\r\n        values &&\r\n        values[fistFieldArray.name] &&\r\n        values[fistFieldArray.name].length !== previousValuesLength\r\n      ) {\r\n        previousValuesLength = values[fistFieldArray.name].length;\r\n        addBtnRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n      }\r\n    }\r\n  }, [fistFieldArray.name, values]);\r\n  return (\r\n    <Form>\r\n      <div className={classes.container}>\r\n        <List>\r\n          <ListItem className={classes.header} disableGutters>\r\n            {fistFieldArray.fields.map(\r\n              ({ label, hidden = false }, index) =>\r\n                !hidden && (\r\n                  <span\r\n                    className={classnames(\r\n                      classes.listSubItem,\r\n                      classes.headerItem\r\n                    )}\r\n                    key={label || uuidV4()}\r\n                    style={{ width: `${widths[index]}%` }}\r\n                  >\r\n                    <Typography\r\n                      variant=\"subtitle1\"\r\n                      style={{\r\n                        fontSize: \"15px\"\r\n                      }}\r\n                    >\r\n                      {label}\r\n                    </Typography>\r\n                  </span>\r\n                )\r\n            )}\r\n          </ListItem>\r\n          <FieldArray\r\n            name={fistFieldArray.name}\r\n            render={arrayHelpers => {\r\n              arrayHelpersRef = arrayHelpers;\r\n              return (\r\n                <>\r\n                  {(values &&\r\n                    values[fistFieldArray.name] &&\r\n                    values[fistFieldArray.name].length > 0 &&\r\n                    values[fistFieldArray.name].map((row, index) => (\r\n                      <ListItem\r\n                        key={index}\r\n                        className={classnames(classes.listItem, {\r\n                          [classes.isDeleted]: row.isDeleted === true\r\n                        })}\r\n                        disableGutters\r\n                      >\r\n                        {fistFieldArray.fields.map((field, fieldIndex) => {\r\n                          if (field.component) {\r\n                            const { component: CustomComponent } = field;\r\n                            return (\r\n                              <span\r\n                                key={field.name || uuidV4() + index}\r\n                                className={classes.listSubItem}\r\n                                style={{ width: `${widths[fieldIndex]}%` }}\r\n                              >\r\n                                <CustomComponent\r\n                                  value={values[fistFieldArray.name][index]}\r\n                                />\r\n                              </span>\r\n                            );\r\n                          }\r\n                          if (field.hidden === true) {\r\n                            return null;\r\n                          }\r\n                          return (\r\n                            <span\r\n                              key={field.name || uuidV4() + index}\r\n                              className={classes.listSubItem}\r\n                              style={{ width: `${widths[fieldIndex]}%` }}\r\n                            >\r\n                              {renderField({\r\n                                field: {\r\n                                  ...field,\r\n                                  label: \"\",\r\n                                  name: `${fistFieldArray.name}.[${index}].${\r\n                                    field.name\r\n                                  }`\r\n                                },\r\n                                classes,\r\n                                readOnly,\r\n                                initialValues,\r\n                                setFieldValue\r\n                              })}\r\n                            </span>\r\n                          );\r\n                        })}\r\n                        {!row.isDeleted && !readOnly && (\r\n                          <ListItemSecondaryAction>\r\n                            <IconButton\r\n                              className={classes.deleteBtn}\r\n                              type=\"button\"\r\n                              onClick={() =>\r\n                                arrayHelpers.replace(index, {\r\n                                  ...get(\r\n                                    values,\r\n                                    `${fistFieldArray.name}.[${index}]`\r\n                                  ),\r\n                                  isDeleted: true\r\n                                })\r\n                              }\r\n                            >\r\n                              <Delete />\r\n                            </IconButton>\r\n                          </ListItemSecondaryAction>\r\n                        )}\r\n                      </ListItem>\r\n                    ))) || (\r\n                    <ListItem>\r\n                      <Grid container justify=\"center\">\r\n                        <Typography variant=\"body1\">\r\n                          Значения отсутствуют\r\n                        </Typography>\r\n                      </Grid>\r\n                    </ListItem>\r\n                  )}\r\n                </>\r\n              );\r\n            }}\r\n          />\r\n        </List>\r\n        {!readOnly && (\r\n          <Grid container justify=\"center\">\r\n            <div ref={addBtnRef}>\r\n              <Fab\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                aria-label=\"Add\"\r\n                onClick={() => arrayHelpersRef.push(emptyFieldArrayObj)}\r\n              >\r\n                <AddIcon />\r\n              </Fab>\r\n            </div>\r\n          </Grid>\r\n        )}\r\n      </div>\r\n    </Form>\r\n  );\r\n};\r\n\r\nRenderTableForm.defaultProps = {\r\n  readOnly: false\r\n};\r\n\r\nRenderTableForm.propTypes = {\r\n  confObj: PropTypes.shape({}).isRequired,\r\n  values: PropTypes.shape({}).isRequired,\r\n  readOnly: PropTypes.bool,\r\n  initialValues: PropTypes.shape({}).isRequired,\r\n  setFieldValue: PropTypes.func.isRequired\r\n};\r\n","export const calcFieldWidth = field => {\n  const widths = { xs: 12, sm: 12, md: 6, lg: 4, xl: 4 };\n  // логика тут такая если для поля есть additionalProps а в них fullWidth, то\n  if (\n    (field.type === \"select\" && field.multiple === true) ||\n    (field.additionalProps && field.additionalProps.fullWidth === true)\n  ) {\n    // return { xs: 12, sm: \"auto\", md: \"auto\", lg: \"auto\", xl: \"auto\" };\n    return { xs: 12, sm: false, md: false, lg: false, xl: false };\n  }\n  return field.widths ? { ...widths, ...field.widths } : widths;\n};\n","import React from \"react\";\r\nimport { Grid, Divider, Typography } from \"@material-ui/core\";\r\nimport { get } from \"lodash\";\r\nimport { connect } from \"formik\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport uuidv4 from \"uuid/v4\";\r\nimport { renderField } from \"./renderField\";\r\nimport { calcFieldWidth } from \"./utils/calcFieldWidth\";\r\n\r\nconst PrivateRenderBlock = ({\r\n  block: { blockTitle, fields, conditionallyRender },\r\n  classes,\r\n  bIndex,\r\n  formik: {\r\n    status: { registeredFields, readOnly },\r\n    status,\r\n    initialValues,\r\n    setFieldValue,\r\n    values\r\n  }\r\n}) => {\r\n  if (conditionallyRender && !conditionallyRender(values)) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid\r\n        container\r\n        alignItems=\"center\"\r\n        style={\r\n          bIndex === 0\r\n            ? { marginTop: \"8px\", marginBottom: \"8px\" }\r\n            : { marginTop: \"20px\", marginBottom: \"8px\" }\r\n        }\r\n      >\r\n        {blockTitle ? (\r\n          <React.Fragment>\r\n            <Typography variant=\"subtitle2\" style={{ fontSize: \"15px\" }}>\r\n              {blockTitle.toUpperCase()}\r\n            </Typography>\r\n            <Divider className={classes.divider} />\r\n          </React.Fragment>\r\n        ) : null}\r\n      </Grid>\r\n      <Grid container spacing={8}>\r\n        {fields.map(field =>\r\n          get(registeredFields, field.name) ? (\r\n            <Grid item key={field.name || uuidv4()} {...calcFieldWidth(field)}>\r\n              {renderField({\r\n                field,\r\n                classes,\r\n                readOnly,\r\n                initialValues,\r\n                setFieldValue,\r\n                status\r\n              })}\r\n            </Grid>\r\n          ) : null\r\n        )}\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nPrivateRenderBlock.propTypes = {\r\n  block: PropTypes.shape({}).isRequired,\r\n  classes: PropTypes.shape({}).isRequired,\r\n  bIndex: PropTypes.number.isRequired,\r\n  formik: PropTypes.shape({\r\n    status: PropTypes.shape({\r\n      registeredFields: PropTypes.shape({}).isRequired,\r\n      readOnly: PropTypes.bool.isRequired\r\n    }),\r\n    initialValues: PropTypes.shape({}).isRequired,\r\n    setFieldValue: PropTypes.func.isRequired\r\n  }).isRequired\r\n};\r\n\r\nexport const RenderBlock = connect(PrivateRenderBlock);\r\n","import { makeStyles } from \"@material-ui/styles\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { RenderBlock } from \"../../renderBlock\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  divider: {\r\n    marginLeft: `${theme.spacing.unit}px`,\r\n    height: \"1px\",\r\n    backgroundColor: \"white\",\r\n    flex: \"1  1 auto\"\r\n  },\r\n  field: {\r\n    width: \"100%\"\r\n  }\r\n}));\r\n\r\nexport const RenderBlockForm = ({ formObj, handleSubmit, style }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div style={{ padding: \"4px 16px 10px 16px\", ...style }}>\r\n        <Grid container spacing={8} direction=\"column\">\r\n          {formObj.blocks.map((block, bIndex) => (\r\n            <Grid item key={bIndex}>\r\n              <RenderBlock block={block} bIndex={bIndex} classes={classes} />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nRenderBlockForm.defaultProps = {\r\n  style: undefined\r\n};\r\n\r\nRenderBlockForm.propTypes = {\r\n  handleSubmit: PropTypes.func.isRequired,\r\n  formObj: PropTypes.shape({}).isRequired,\r\n  style: PropTypes.shape({})\r\n};\r\n","function makeArrayFromObject(obj) {\r\n  if (!(obj instanceof Array)) {\r\n    return [obj];\r\n  }\r\n  return obj;\r\n}\r\n\r\n// item - элемент, прямым потомком которого может быть \"dependencies\", т.е. блок или группа\r\nexport default function defineItemVisibility(item, formObj, values) {\r\n  const hasVisual = Object.keys(item).indexOf(\"visual\") !== -1;\r\n  const visual = hasVisual ? item.visual === \"true\" : true;\r\n  let dependenciesMet = true;\r\n  if (item.dependencies) {\r\n    dependenciesMet = checkDependencies(item.dependencies, formObj, values);\r\n  }\r\n  return visual && dependenciesMet;\r\n}\r\n\r\nfunction checkDependencies(dependencies, initialObj, currentValues) {\r\n  const results = [];\r\n\r\n  if (dependencies.dependencies) {\r\n    dependencies.dependencies.forEach(dep =>\r\n      results.push(checkDependencies(dep, initialObj, currentValues))\r\n    );\r\n  }\r\n\r\n  if (dependencies.dependency) {\r\n    dependencies.dependency.forEach(dep =>\r\n      results.push(checkDependency(dep, initialObj, currentValues))\r\n    );\r\n  }\r\n\r\n  switch (dependencies.condition) {\r\n    case \"or\":\r\n      return results.some(result => result);\r\n    case \"not\":\r\n      return results.every(result => !result);\r\n    case \"and\":\r\n    default:\r\n      return results.every(result => result);\r\n  }\r\n}\r\n\r\nfunction getValuesFromObjectByKeyReccursion(obj, key, predicate, results) {\r\n  const keys = Object.keys(obj);\r\n  keys.forEach(tKey => {\r\n    if (tKey === key) {\r\n      const tempArr = makeArrayFromObject(obj[tKey]);\r\n      tempArr.forEach(elem => {\r\n        if (predicate) {\r\n          if (predicate(elem)) {\r\n            results.push(elem);\r\n          }\r\n        } else {\r\n          results.push(elem);\r\n        }\r\n      });\r\n    }\r\n    if (obj[tKey] instanceof Object) {\r\n      getValuesFromObjectByKeyReccursion(obj[tKey], key, predicate, results);\r\n    }\r\n  });\r\n}\r\n\r\nfunction getValuesFromObjectByKey(obj, key, predicate) {\r\n  const results = [];\r\n  getValuesFromObjectByKeyReccursion(obj, key, predicate, results);\r\n  return results;\r\n}\r\n\r\nfunction findDependencyByName(depName, initialObj) {\r\n  const depRefs = getValuesFromObjectByKey(\r\n    initialObj,\r\n    \"dependencies\",\r\n    dependencies => dependencies.name && dependencies.name === depName\r\n  );\r\n\r\n  if (!depRefs) {\r\n    console.log(\"Ссылка на зависимость не найдена\", depName, initialObj);\r\n  }\r\n\r\n  return depRefs[0];\r\n}\r\n\r\nfunction getCurrentValue(values, valueName) {\r\n  if (Object.keys(values).indexOf(valueName) !== -1) {\r\n    if (typeof values[valueName] === \"string\" || !values[valueName]) {\r\n      return values[valueName];\r\n    }\r\n\r\n    if (values[valueName].value) {\r\n      return values[valueName].value;\r\n    }\r\n  }\r\n\r\n  console.log(\"Значение не найдено!\", valueName, values);\r\n  return \"\";\r\n}\r\n\r\nfunction getCurrentValuesFromMultyItems(itemName, currentValues) {\r\n  const results = getValuesFromObjectByKey(currentValues, itemName);\r\n  return results.map(result =>\r\n    result && result.value ? result.value : result\r\n  );\r\n}\r\n\r\nfunction checkDependency(dependency, initialObj, currentValues) {\r\n  // Reference to a 'dependencies'\r\n  if (dependency.dependencyRef) {\r\n    const dep = findDependencyByName(dependency.dependencyRef, initialObj);\r\n    return checkDependencies(dep, initialObj, currentValues);\r\n  }\r\n  if (dependency.field) {\r\n    const { field, value } = dependency;\r\n    // Dependency on multy-items\r\n    if (field.multy === true) {\r\n      const itemValues = getCurrentValuesFromMultyItems(\r\n        field.name,\r\n        currentValues\r\n      );\r\n\r\n      switch (field.condition) {\r\n        case \"and\":\r\n          return value.every(val => itemValues.indexOf(val) !== -1);\r\n        case \"not\":\r\n          return value.every(val => itemValues.indexOf(val) === -1);\r\n        default:\r\n          return value.some(val => itemValues.indexOf(val) !== -1);\r\n      }\r\n    } else {\r\n      // Simple dependency\r\n      const currentValue = getCurrentValue(currentValues, field.name);\r\n\r\n      switch (field.condition) {\r\n        case \"and\":\r\n          return value.every(val => val === currentValue);\r\n        case \"not\":\r\n          return value.every(val => val !== currentValue);\r\n        default:\r\n          return value.some(val => val === currentValue);\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(\r\n    \"Зависимость не проверена!!!\",\r\n    dependency,\r\n    initialObj,\r\n    currentValues\r\n  );\r\n}\r\n","const nameKeyReducer = (accumulator, currentValue) =>\r\n  typeof currentValue.name !== \"undefined\"\r\n    ? `${accumulator}-${currentValue.name}`\r\n    : accumulator;\r\n\r\nconst constructKeyForRow = row => row.attribute.reduce(nameKeyReducer, \"\");\r\n\r\nexport default constructKeyForRow;\r\n","import { IMaskInput } from \"react-imask\";\r\nimport React from \"react\";\r\n\r\nconst IMaskedRegExpFilteredTextField = props => {\r\n  const { mask, name, setFieldValue, ...rest } = props;\r\n  return (\r\n    <IMaskInput\r\n      name={name}\r\n      mask={mask}\r\n      lazy\r\n      unmask={false} // true|false|'typed'\r\n      {...rest}\r\n    />\r\n  );\r\n};\r\n\r\nexport default IMaskedRegExpFilteredTextField;\r\n","const phone = \"+{7}(000)000-00-00\";\r\n\r\nconst date = \"00.00.0000\";\r\n\r\nconst daterange = \"00.00.0000-00.00.0000\";\r\n\r\nconst email = /^\\S*@?\\S*$/;\r\n\r\n// const postalCode = /^[1-6]\\d{0,5}$/;\r\n\r\nconst getMask = mask => {\r\n  let result;\r\n  const config = { phone, email, date, daterange };\r\n  if (typeof config[mask] !== \"undefined\") {\r\n    result = config[mask];\r\n  }\r\n  if (mask.startsWith(\"_\") || mask.startsWith(\"#\")) {\r\n    result = mask.substr(1);\r\n  }\r\n  return result;\r\n};\r\n\r\nexport default getMask;\r\n","import React from \"react\";\r\nimport { TextField as MuiTextField } from \"@material-ui/core\";\r\nimport { fieldToTextField } from \"formik-material-ui\";\r\n\r\nconst strReducer = (accumulator, currentValue) => accumulator + currentValue;\r\n\r\nconst RegExpFilteredTextField = props => {\r\n  const { regExp, maxLength, ...rest } = props;\r\n  const {\r\n    field: { name },\r\n    form: { setFieldValue }\r\n  } = props;\r\n  return (\r\n    <MuiTextField\r\n      {...fieldToTextField(rest)}\r\n      onChange={({ target: { value } }) => {\r\n        let filteredValue = \"\";\r\n\r\n        if (regExp && value && value !== \"\") {\r\n          const matchedSymbols = value.match(regExp);\r\n          if (matchedSymbols !== null) {\r\n            filteredValue = matchedSymbols\r\n              .slice(0, maxLength)\r\n              .reduce(strReducer, \"\");\r\n          }\r\n        } else {\r\n          filteredValue = value.slice(0, maxLength);\r\n        }\r\n        setFieldValue(name, filteredValue);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RegExpFilteredTextField;\r\n","export const validateField = ({ value, field }) => {\r\n  if (typeof field === \"undefined\") {\r\n    return undefined;\r\n  }\r\n  const {\r\n    required,\r\n    type: { minlength, maxlength, regular, name: typeName }\r\n  } = field;\r\n  if (\r\n    required === \"true\" &&\r\n    (typeName === \"dictionary\" || typeName === \"dictionary-nsi\") &&\r\n    value === null\r\n  ) {\r\n    return \"Необходимо выбрать значение из списка\";\r\n  }\r\n  if (required === \"true\" && typeName === \"boolean\" && value === false) {\r\n    return \"Необходимо поставить галочку\";\r\n  }\r\n  if (required === \"true\" && typeName === \"attachment\" && value === null) {\r\n    return \"Необходимо приложить файл\";\r\n  }\r\n  if (required === \"true\" && value === \"\") {\r\n    return \"Обязательное поле\";\r\n  }\r\n\r\n  if (value !== \"\" && minlength && value.length < minlength) {\r\n    let suffix;\r\n    if (\"234\".indexOf(minlength[minlength.length - 1]) !== -1) {\r\n      suffix = \"символа\";\r\n    } else if (\"1\".indexOf(minlength[minlength.length - 1]) !== -1) {\r\n      suffix = \"символ\";\r\n    } else {\r\n      suffix = \"символов\";\r\n    }\r\n    return `Необходимо ввести минимум ${minlength} ${suffix}`;\r\n  }\r\n\r\n  // todo  подумать а нужна ли такая проверка\r\n  if (value !== \"\" && maxlength && value.length > maxlength) {\r\n    let suffix;\r\n    if (\"234\".indexOf(maxlength[maxlength.length - 1]) !== -1) {\r\n      suffix = \"символа\";\r\n    } else if (\"1\".indexOf(maxlength[maxlength.length - 1]) !== -1) {\r\n      suffix = \"символ\";\r\n    } else {\r\n      suffix = \"символов\";\r\n    }\r\n    return `Необходимо ввести максимум ${maxlength} ${suffix}`;\r\n  }\r\n\r\n  if (value !== \"\" && regular) {\r\n    let reconstructedRegular = regular;\r\n    if (regular.startsWith(\"/\")) {\r\n      reconstructedRegular = reconstructedRegular.replace(/^\\//, \"\");\r\n    }\r\n    if (reconstructedRegular.endsWith(\"/\")) {\r\n      reconstructedRegular = reconstructedRegular.replace(/\\/$/, \"\");\r\n    }\r\n    if (!RegExp(reconstructedRegular).test(value)) {\r\n      return \"Не удовлетворяет маске\";\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n};\r\n","import React from \"react\";\r\nimport { connect, Field, FieldArray } from \"formik\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport locale from \"date-fns/locale/ru\";\r\nimport axios from \"axios\";\r\nimport { Fab, Paper, Grid } from \"@material-ui/core\";\r\nimport { Add, Delete } from \"@material-ui/icons\";\r\nimport { get, hasIn } from \"lodash\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport defineItemVisibility from \"../utils/dependenciesUt\";\r\nimport constructKeyForRow from \"../utils/constructKeyForRow\";\r\nimport { WrappedReactSelect } from \"../../../wrappedComponents/wrappedReactSelect\";\r\nimport IMaskedRegExpFilteredTextField from \"../../../wrappedComponents/IMaskedRegExpFilteredTextField\";\r\nimport getMask from \"../utils/getMask\";\r\nimport RegExpFilteredTextField from \"../../../../regExpFilteredTextField\";\r\nimport { WrappedReactDropZoneMUI } from \"../../../wrappedComponents/wrappedReactDropZoneMUI\";\r\nimport { IntegrateDatePickerWithMUI } from \"../../../../IntegrateDatePickerWithMUI\";\r\nimport IntegrateDateRangePickerWithMUI from \"../../../../IntegrateDateRangePickerWithMUI\";\r\nimport { WrappedCheckBoxMUI } from \"../../../wrappedComponents/wrappedCheckBoxMUI\";\r\nimport { validateField } from \"../utils/validateField\";\r\nimport { defaultErrorHandler } from \"../../../../../utils/defaultErrorHandler\";\r\nimport {\r\n  findAllAttributesByPredicate,\r\n  findAttributeByPredicate,\r\n  findByNamePredicate,\r\n  findBySuperAttributeNamePredicate\r\n} from \"../utils/find\";\r\nimport { urlToDownLoadClaimAttachmentFromFtp } from \"../../../utils/downLoad\";\r\n\r\nconst customOnChange = formObj => ({ name, setFieldValue }) => {\r\n  const foundLowerAttrs = findAllAttributesByPredicate(\r\n    formObj,\r\n    findBySuperAttributeNamePredicate(name)\r\n  );\r\n  if (foundLowerAttrs && Array.isArray(foundLowerAttrs)) {\r\n    foundLowerAttrs.forEach(({ name: lowerAttrName }) =>\r\n      setFieldValue(lowerAttrName, null)\r\n    );\r\n  }\r\n};\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  field: {\r\n    width: \"100%\"\r\n  }\r\n}));\r\n\r\nexport const saveFile = (data, claimUuid) =>\r\n  axios({\r\n    method: \"post\",\r\n    url: `/api/claim/attachment/save/${claimUuid}`,\r\n    data,\r\n    config: {\r\n      \"Content-Type\": \"multipart/form-data\"\r\n    }\r\n  });\r\n\r\nconst loadNsiOptions = (nsiName, superNsiName, superNsiValue) =>\r\n  axios\r\n    .get(\"/api/nsi/getNsiContent\", {\r\n      params: {\r\n        nsiName,\r\n        superNsiName,\r\n        superNsiValue\r\n      }\r\n    })\r\n    .then(({ data: { dictionary } }) => dictionary)\r\n    .catch(e => {\r\n      defaultErrorHandler(e);\r\n    });\r\n\r\nconst renderMultyItems = (\r\n  props,\r\n  name,\r\n  multiItems,\r\n  readOnly,\r\n  classes,\r\n  additionalProps\r\n) => {\r\n  const {\r\n    form: { values, initialValues },\r\n    push,\r\n    remove\r\n  } = props;\r\n  const fieldArrValues = get(values, name);\r\n\r\n  const renderedMultyItems = fieldArrValues.map((item, index) => (\r\n    <Paper\r\n      style={{\r\n        backgroundColor: \"#e4f5fc\",\r\n        padding: \"8px\",\r\n        marginTop: \"8px\",\r\n        marginBottom: \"8px\"\r\n      }}\r\n      key={`${name}.${index}`}\r\n    >\r\n      {multiItems[0].group.map(\r\n        row =>\r\n          defineItemVisibility(\r\n            row,\r\n            multiItems[index],\r\n            fieldArrValues[index]\r\n          ) && (\r\n            <Grid item key={constructKeyForRow(row)}>\r\n              <Grid container spacing={8}>\r\n                {row.attribute.map((field, fIndex) =>\r\n                  typeof field.name !== \"undefined\" ? (\r\n                    <Grid\r\n                      item\r\n                      key={`${name}.${index}.${field.name}`}\r\n                      lg={12 / row.attribute.length}\r\n                      md={12 / row.attribute.length}\r\n                      xl={12 / row.attribute.length}\r\n                    >\r\n                      <RenderField\r\n                        field={field}\r\n                        name={`${name}.${index}.${field.name}`}\r\n                        classes={classes}\r\n                        additionalProps={additionalProps}\r\n                      />\r\n                    </Grid>\r\n                  ) : (\r\n                    <Grid\r\n                      item\r\n                      key={`${name}.${index}.${fIndex}`}\r\n                      lg={12 / row.attribute.length}\r\n                      md={12 / row.attribute.length}\r\n                      xl={12 / row.attribute.length}\r\n                    />\r\n                  )\r\n                )}\r\n              </Grid>\r\n            </Grid>\r\n          )\r\n      )}\r\n      {fieldArrValues.length > 1 && !readOnly ? (\r\n        <Fab color=\"secondary\" size=\"small\" onClick={() => remove(index)}>\r\n          <Delete />\r\n        </Fab>\r\n      ) : null}\r\n    </Paper>\r\n  ));\r\n\r\n  return (\r\n    <>\r\n      {renderedMultyItems}\r\n      {!readOnly && (\r\n        <Fab\r\n          onClick={() => push({ ...get(initialValues, name)[0] })}\r\n          color=\"primary\"\r\n          size=\"small\"\r\n        >\r\n          <Add />\r\n        </Fab>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst PrivateRenderField = ({\r\n  field,\r\n  name: customName,\r\n  additionalProps,\r\n  formik: {\r\n    status: { optionsMap, readOnly },\r\n    status,\r\n    values,\r\n    setStatus,\r\n    setFieldValue,\r\n    errors\r\n  },\r\n  formObj\r\n}) => {\r\n  const classes = getStyles();\r\n  if (field === \"\" || field === null || typeof field === \"undefined\") {\r\n    return null;\r\n  }\r\n  const {\r\n    label,\r\n    type: { name: typeName, allowedpattern, maxlength, mask },\r\n    name\r\n  } = field;\r\n  switch (typeName) {\r\n    case \"dictionary\": {\r\n      const {\r\n        type: {\r\n          elements: { element: options }\r\n        }\r\n      } = field;\r\n      return (\r\n        <Field\r\n          key={customName || name}\r\n          label={label}\r\n          name={customName || name}\r\n          validate={value => validateField({ value, field })}\r\n          component={WrappedReactSelect}\r\n          options={options}\r\n          isMulti={false}\r\n          isDisabled={readOnly}\r\n          classes={{ root: classes.field }}\r\n        />\r\n      );\r\n    }\r\n    case \"dictionary-nsi\": {\r\n      const { nameTag, superAttributeName } = field.type;\r\n      const superFieldValue = get(values, superAttributeName);\r\n      // Обработчик для селектов низших порядков, т.е. значения доступные для выбора в которых зависимы от некоторого другого селекта\r\n      if (superAttributeName) {\r\n        if (\r\n          superFieldValue &&\r\n          !hasIn(\r\n            optionsMap,\r\n            `${nameTag}.${superAttributeName}.${superFieldValue.value}`\r\n          )\r\n        ) {\r\n          // тут умышленно без проверок, упадет -> Xml структура не валидна\r\n          const {\r\n            type: { nameTag: nsiMasterName }\r\n          } = findAttributeByPredicate(\r\n            formObj,\r\n            findByNamePredicate(superAttributeName)\r\n          );\r\n\r\n          // помечает поле как заблокированное\r\n          setStatus({\r\n            ...status,\r\n            optionsMap: {\r\n              ...optionsMap,\r\n              [`${nameTag}.${superAttributeName}.${superFieldValue.value}`]: {\r\n                options: [],\r\n                loaded: false\r\n              }\r\n            }\r\n          });\r\n\r\n          loadNsiOptions(nameTag, nsiMasterName, superFieldValue.value).then(\r\n            r => {\r\n              setStatus({\r\n                ...status,\r\n                optionsMap: {\r\n                  ...optionsMap,\r\n                  [`${nameTag}.${superAttributeName}.${\r\n                    superFieldValue.value\r\n                  }`]: {\r\n                    options: r,\r\n                    loaded: true\r\n                  }\r\n                }\r\n              });\r\n            }\r\n          );\r\n        }\r\n      }\r\n      // todo если этот обработчик перенесется в другое место то его стоит удалить\r\n      // Обработчик для селектов с Высших порядков, т.е. не зависимых\r\n      else if (!hasIn(optionsMap, nameTag)) {\r\n        // помечает поле как заблокированное\r\n        setStatus({\r\n          ...status,\r\n          optionsMap: {\r\n            ...optionsMap,\r\n            [nameTag]: {\r\n              options: [],\r\n              loaded: false\r\n            }\r\n          }\r\n        });\r\n\r\n        loadNsiOptions(nameTag).then(r => {\r\n          setStatus({\r\n            ...status,\r\n            optionsMap: {\r\n              ...optionsMap,\r\n              [nameTag]: {\r\n                options: r,\r\n                loaded: true\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n      return (\r\n        <Field\r\n          key={customName || name}\r\n          label={label}\r\n          name={customName || name}\r\n          validate={value => validateField({ value, field })}\r\n          component={WrappedReactSelect}\r\n          customOptionsName={\r\n            superAttributeName && superFieldValue\r\n              ? `${nameTag}.${superAttributeName}.${superFieldValue.value}`\r\n              : nameTag\r\n          }\r\n          customOnChange={\r\n            !superAttributeName ? customOnChange(formObj) : undefined\r\n          }\r\n          isMulti={false}\r\n          closeMenuOnSelect\r\n          isDisabled={readOnly}\r\n          classes={{ root: classes.field }}\r\n        />\r\n      );\r\n    }\r\n    case \"string-32\": {\r\n      if (mask) {\r\n        // mask начинается с \"_\" - regExp Imask, replace\r\n        // mask начинается с \"#\" - mask\r\n        return (\r\n          <Field\r\n            key={customName || name}\r\n            label={label}\r\n            name={customName || name}\r\n            validate={value => validateField({ value, field })}\r\n            component={TextField}\r\n            InputProps={{\r\n              readOnly,\r\n              name: customName || name,\r\n              inputComponent: IMaskedRegExpFilteredTextField,\r\n              inputProps: {\r\n                mask: getMask(mask),\r\n                setFieldValue,\r\n                name: customName || name\r\n              }\r\n            }}\r\n            classes={{ root: classes.field }}\r\n          />\r\n        );\r\n      }\r\n      if (allowedpattern || maxlength) {\r\n        return (\r\n          <Field\r\n            key={customName || name}\r\n            label={label}\r\n            name={customName || name}\r\n            validate={value => validateField({ value, field })}\r\n            component={RegExpFilteredTextField}\r\n            regExp={allowedpattern ? RegExp(allowedpattern, \"g\") : undefined}\r\n            maxLength={maxlength}\r\n            classes={{ root: classes.field }}\r\n            InputProps={{\r\n              readOnly\r\n            }}\r\n          />\r\n        );\r\n      }\r\n      return (\r\n        <Field\r\n          key={customName || name}\r\n          name={customName || name}\r\n          label={label}\r\n          validate={value => validateField({ value, field })}\r\n          component={TextField}\r\n          classes={{ root: classes.field }}\r\n          InputProps={{\r\n            readOnly\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    case \"string-256\": {\r\n      if (mask) {\r\n        // mask начинается с \"_\" - regExp Imask, replace\r\n        // mask начинается с \"#\" - mask\r\n        return (\r\n          <Field\r\n            key={customName || name}\r\n            label={label}\r\n            name={customName || name}\r\n            validate={value => validateField({ value, field })}\r\n            component={TextField}\r\n            InputProps={{\r\n              readOnly,\r\n              name: customName || name,\r\n              inputComponent: IMaskedRegExpFilteredTextField,\r\n              inputProps: {\r\n                mask: getMask(mask),\r\n                setFieldValue,\r\n                name: customName || name\r\n              }\r\n            }}\r\n            classes={{ root: classes.field }}\r\n          />\r\n        );\r\n      }\r\n      if (allowedpattern) {\r\n        return (\r\n          <Field\r\n            key={customName || name}\r\n            label={label}\r\n            name={customName || name}\r\n            validate={value => validateField({ value, field })}\r\n            component={RegExpFilteredTextField}\r\n            regExp={allowedpattern ? RegExp(allowedpattern, \"g\") : undefined}\r\n            maxLength={maxlength}\r\n            classes={{ root: classes.field }}\r\n            InputProps={{\r\n              readOnly\r\n            }}\r\n          />\r\n        );\r\n      }\r\n      return (\r\n        <Field\r\n          key={customName || name}\r\n          name={customName || name}\r\n          label={label}\r\n          validate={value => validateField({ value, field })}\r\n          component={TextField}\r\n          classes={{ root: classes.field }}\r\n          InputProps={{\r\n            readOnly\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    case \"string\": {\r\n      return (\r\n        <Field\r\n          key={customName || name}\r\n          name={customName || name}\r\n          label={label}\r\n          multiline\r\n          rowsMax={6}\r\n          validate={value => validateField({ value, field })}\r\n          component={TextField}\r\n          classes={{ root: classes.field }}\r\n          InputProps={{\r\n            readOnly\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    case \"attachment\": {\r\n      const { claimUuid } = status;\r\n      return (\r\n        <Field\r\n          key={customName || name}\r\n          name={customName || name}\r\n          label={label}\r\n          component={WrappedReactDropZoneMUI}\r\n          validate={value => validateField({ value, field })}\r\n          onDrop={files => {\r\n            const data = new FormData();\r\n            data.append(\"file\", files[0]);\r\n            saveFile(data, claimUuid)\r\n              .then(({ data: { name } }) => {\r\n                // [{\"label\":\"dug.jpg\",\"value\":\"998160b8-95f8-4af6-868e-646d96480be7\",\"lastModified\":1531486007949,\"progress\":100,\"complete\":true,\"name\":\"dug.jpg\"}]\r\n                setFieldValue(field.name, {\r\n                  label: files[0].name,\r\n                  value: [\r\n                    {\r\n                      uuidClaim: claimUuid,\r\n                      label: name,\r\n                      name,\r\n                      lastModified: new Date().valueOf(),\r\n                      progress: 100,\r\n                      complete: true\r\n                    }\r\n                  ]\r\n                });\r\n              })\r\n              .catch(error => {\r\n                defaultErrorHandler(error);\r\n              });\r\n          }}\r\n          customUrlToDownLoadFile={urlToDownLoadClaimAttachmentFromFtp}\r\n          disabled={readOnly || false}\r\n        />\r\n      );\r\n    }\r\n    case \"date\": {\r\n      const pickerProps = {\r\n        locale: { ...locale },\r\n        moveRangeOnFirstSelection: false,\r\n        showDateDisplay: false\r\n      };\r\n      const {\r\n        type: { more, less }\r\n      } = field;\r\n      // Внимание принимается дата формата \"23.01.2018\"\r\n      if (typeof more !== \"undefined\") {\r\n        pickerProps.minDate =\r\n          more === \"now\" ? new Date() : new Date(...more.split(\".\").reverse());\r\n      }\r\n      if (typeof less !== \"undefined\") {\r\n        pickerProps.maxDate =\r\n          less === \"now\" ? new Date() : new Date(...less.split(\".\").reverse());\r\n      }\r\n      return (\r\n        <Field\r\n          key={customName || name}\r\n          name={customName || name}\r\n          label={label}\r\n          component={IntegrateDatePickerWithMUI}\r\n          readOnly={readOnly || false}\r\n          validate={value => validateField({ value, field })}\r\n          pickerProps={pickerProps}\r\n        />\r\n      );\r\n    }\r\n    case \"daterange\": {\r\n      const pickerProps = {\r\n        locale: { ...locale },\r\n        moveRangeOnFirstSelection: false,\r\n        showDateDisplay: false\r\n      };\r\n      return (\r\n        <Field\r\n          key={customName || name}\r\n          name={customName || name}\r\n          label={label}\r\n          pickerProps={pickerProps}\r\n          component={IntegrateDateRangePickerWithMUI}\r\n          readOnly={readOnly || false}\r\n        />\r\n      );\r\n    }\r\n    case \"boolean\": {\r\n      return (\r\n        <Field\r\n          name={customName || name}\r\n          key={customName || name}\r\n          label={label}\r\n          validate={value => validateField({ value, field })}\r\n          component={WrappedCheckBoxMUI}\r\n          disabled={readOnly}\r\n          error={errors[customName || name]}\r\n        />\r\n      );\r\n    }\r\n    case \"multy-items\": {\r\n      const multiItems = field.type[\"multy-items\"];\r\n      return (\r\n        <FieldArray\r\n          validateOnChange={false}\r\n          key={customName || name}\r\n          name={customName || name}\r\n          render={props =>\r\n            renderMultyItems(\r\n              props,\r\n              customName || name,\r\n              multiItems,\r\n              readOnly,\r\n              classes,\r\n              additionalProps\r\n            )\r\n          }\r\n        />\r\n      );\r\n    }\r\n    default: {\r\n      throw new Error(\r\n        `Не найдено такого типа \"${typeName}\" для поля \"${name}\"`\r\n      );\r\n    }\r\n  }\r\n};\r\n\r\nexport const RenderField = connect(PrivateRenderField);\r\n","export const findAttributeByPredicate = (\r\n  {\r\n    statement: {\r\n      blocks: { block }\r\n    }\r\n  },\r\n  predicate\r\n) => {\r\n  let foundAtr;\r\n  block.forEach(({ attributes: { group } }) => {\r\n    if (foundAtr) {\r\n      return \"\";\r\n    }\r\n    group.forEach(({ attribute }) => {\r\n      if (foundAtr) {\r\n        return \"\";\r\n      }\r\n      foundAtr = attribute.find(field => {\r\n        if (typeof predicate === \"function\") {\r\n          return predicate(field);\r\n        }\r\n        throw new Error(\"Не верный тип предиката ожидалась функция\");\r\n      });\r\n      return undefined;\r\n    });\r\n    return undefined;\r\n  });\r\n  return foundAtr;\r\n};\r\n\r\nexport const findAllAttributesByPredicate = (\r\n  {\r\n    statement: {\r\n      blocks: { block }\r\n    }\r\n  },\r\n  predicate\r\n) => {\r\n  if (typeof predicate === \"function\") {\r\n    const foundAttrs = [];\r\n    block.forEach(({ attributes: { group } }) => {\r\n      group.forEach(({ attribute }) => {\r\n        attribute.forEach(field => {\r\n          if (predicate(field)) {\r\n            foundAttrs.push(field);\r\n          }\r\n        });\r\n      });\r\n    });\r\n    return foundAttrs;\r\n  }\r\n  throw new Error(\"Не верный тип предиката ожидалась функция\");\r\n};\r\n\r\nexport const findByNamePredicate = value => ({ name }) => name === value;\r\n\r\nexport const findBySuperAttributeNamePredicate = value => ({\r\n  type: { superAttributeName }\r\n}) => superAttributeName === value;\r\n","import React from \"react\";\r\nimport uuidv4 from \"uuid/v4\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { RenderField } from \"./renderField\";\r\n\r\nexport const RenderRow = ({ row, formObj }) => {\r\n  const { attribute } = row;\r\n  return (\r\n    <>\r\n      {attribute.map(field => {\r\n        if (\r\n          field === \"\" ||\r\n          field === null ||\r\n          typeof field.name === \"undefined\"\r\n        ) {\r\n          return (\r\n            <Grid\r\n              item\r\n              key={uuidv4()}\r\n              lg={12 / attribute.length}\r\n              md={12 / attribute.length}\r\n              xl={12 / attribute.length}\r\n            />\r\n          );\r\n        }\r\n        return (\r\n          <Grid\r\n            item\r\n            key={field.name}\r\n            lg={12 / attribute.length}\r\n            md={12 / attribute.length}\r\n            xl={12 / attribute.length}\r\n          >\r\n            <RenderField field={field} formObj={formObj} />\r\n          </Grid>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nRenderRow.propTypes = {\r\n  row: PropTypes.shape({}).isRequired,\r\n  formObj: PropTypes.shape({}).isRequired\r\n};\r\n","import HtmlToReact from \"html-to-react\";\r\n\r\nconst HtmlToReactParser = new HtmlToReact.Parser();\r\n\r\nconst getRegEx = search => new RegExp(search, \"g\");\r\n\r\nconst ReconstructDescription = ({ htmlInput }) =>\r\n  HtmlToReactParser.parse(\r\n    htmlInput.replace(getRegEx(\"&lt;\"), \"<\").replace(getRegEx(\"&gt;\"), \">\")\r\n  );\r\n\r\nexport default ReconstructDescription;\r\n","import React from \"react\";\r\nimport { Divider, Typography, Grid } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { RenderRow } from \"./renderRow\";\r\nimport ReconstructDescription from \"../utils/reconstructDescription\";\r\nimport defineItemVisibility from \"../utils/dependenciesUt\";\r\nimport constructKeyForRow from \"../utils/constructKeyForRow\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  divider: {\r\n    marginLeft: theme.spacing.unit,\r\n    height: \"1px\",\r\n    backgroundColor: theme.palette.primary.light,\r\n    flex: \"1  1 auto\"\r\n  }\r\n}));\r\n\r\nexport const RenderBlock = props => {\r\n  const {\r\n    block: { label, attributes, description },\r\n    formObj,\r\n    values\r\n  } = props;\r\n  const classes = getStyles();\r\n  return (\r\n    <Grid item>\r\n      <Grid container spacing={8} direction=\"column\">\r\n        <Grid item>\r\n          <Grid container alignItems=\"center\">\r\n            <Typography variant=\"subtitle2\" style={{ fontSize: \"15px\" }}>\r\n              {label.toUpperCase()}\r\n            </Typography>\r\n            <Divider className={classes.divider} />\r\n          </Grid>\r\n        </Grid>\r\n        {description !== label && typeof description !== \"undefined\" && (\r\n          <Grid item>\r\n            <Typography component=\"div\">\r\n              <ReconstructDescription htmlInput={description} />\r\n            </Typography>\r\n          </Grid>\r\n        )}\r\n        {\r\n          <>\r\n            {attributes.group.map(\r\n              row =>\r\n                defineItemVisibility(row, formObj, values) && (\r\n                  <Grid\r\n                    item\r\n                    key={constructKeyForRow(row)}\r\n                    xl={12}\r\n                    lg={12}\r\n                    md={12}\r\n                    xs={12}\r\n                  >\r\n                    <Grid container spacing={8}>\r\n                      <RenderRow row={row} formObj={formObj} />\r\n                    </Grid>\r\n                  </Grid>\r\n                )\r\n            )}\r\n          </>\r\n        }\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nRenderBlock.propTypes = {\r\n  formObj: PropTypes.shape({}).isRequired,\r\n  block: PropTypes.shape({\r\n    label: PropTypes.string,\r\n    attributes: PropTypes.shape({}).isRequired,\r\n    description: PropTypes.string\r\n  }).isRequired,\r\n  values: PropTypes.shape({}).isRequired\r\n};\r\n","import React from \"react\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { Form } from \"formik\";\r\nimport { RenderBlock } from \"./elementRenders/renderBlock\";\r\nimport defineItemVisibility from \"./utils/dependenciesUt\";\r\nimport ReconstructDescription from \"./utils/reconstructDescription\";\r\n\r\nexport const RenderXmlDescribedForm = ({ formObj, values }) => (\r\n  <Form>\r\n    <Grid container spacing={32} direction=\"column\">\r\n      <Grid item>\r\n        <Typography variant=\"h6\">{formObj.info.name}</Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <Typography component=\"div\">\r\n          <ReconstructDescription htmlInput={formObj.info.description} />\r\n        </Typography>\r\n      </Grid>\r\n      {formObj.statement.blocks.block.map(\r\n        block =>\r\n          defineItemVisibility(block, formObj, values) && (\r\n            <RenderBlock\r\n              key={block.name}\r\n              block={block}\r\n              formObj={formObj}\r\n              values={values}\r\n            />\r\n          )\r\n      )}\r\n    </Grid>\r\n  </Form>\r\n);\r\n\r\nRenderXmlDescribedForm.propTypes = {\r\n  formObj: PropTypes.shape({}).isRequired,\r\n  values: PropTypes.shape({}).isRequired\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"formik\";\r\n\r\nclass ErrorFocus extends React.Component {\r\n  componentDidUpdate(prevProps) {\r\n    const { isSubmitting, isValidating, errors } = prevProps.formik;\r\n    const keys = Object.keys(errors);\r\n    if (keys.length > 0 && isSubmitting && !isValidating) {\r\n      const selector = `[name=\"${keys[0]}\"]`;\r\n      const errorElement = document.querySelector(selector);\r\n      // todo подумать почему фокус на вложенных multy items не работает\r\n      if (errorElement) {\r\n        errorElement.focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport const ValidationErrorFocus = connect(ErrorFocus);\r\n","import React from \"react\";\r\nimport { Formik } from \"formik\";\r\nimport { set, isEqual } from \"lodash\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { RenderTableForm } from \"./variants/table/renderTableForm\";\r\nimport { RenderBlockForm } from \"./variants/block/blockForm\";\r\nimport { RenderXmlDescribedForm } from \"./variants/xmlToForm/renderXmlDescribedForm\";\r\nimport { ValidationErrorFocus } from \"./validationErrorFocus\";\r\n\r\nconst initRegisteredFields = (formObj, variant, initialValues) => {\r\n  const result = {};\r\n  if (variant === \"block\") {\r\n    formObj.blocks.forEach(({ fields }) =>\r\n      fields.forEach(({ name, hidden, customInitialRegister }) => {\r\n        const check = customInitialRegister\r\n          ? customInitialRegister(initialValues)\r\n          : true;\r\n        set(result, name, hidden !== true && check);\r\n      })\r\n    );\r\n  }\r\n  if (variant === \"table\") {\r\n    formObj.fields.forEach(({ name, hidden }) => {\r\n      set(result, name, hidden !== true);\r\n    });\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const FormikMUI = ({\r\n  formObj,\r\n  onSubmit,\r\n  bindFormSubmit,\r\n  initialValues,\r\n  optionsMap,\r\n  readOnly,\r\n  variant,\r\n  enableReinitialize,\r\n  additionalStatusProps,\r\n  bindIsSubmitting,\r\n  bindDirty,\r\n  enableStatusReinitialize,\r\n  style\r\n}) => {\r\n  const registeredFields = initRegisteredFields(\r\n    formObj,\r\n    variant,\r\n    initialValues\r\n  );\r\n  return (\r\n    <Formik\r\n      enableReinitialize={enableReinitialize}\r\n      onSubmit={onSubmit}\r\n      validateOnChange={false}\r\n      validateOnBlur={!readOnly}\r\n      validationSchema={formObj.validationSchema}\r\n      initialValues={initialValues}\r\n      initialStatus={{\r\n        registeredFields,\r\n        optionsMap,\r\n        readOnly,\r\n        ...additionalStatusProps\r\n      }}\r\n      render={({\r\n        handleSubmit,\r\n        submitForm,\r\n        setFieldValue,\r\n        values,\r\n        isSubmitting,\r\n        setStatus,\r\n        status,\r\n        dirty\r\n      }) => {\r\n        if (\r\n          enableStatusReinitialize &&\r\n          (!isEqual(optionsMap, status.optionsMap) ||\r\n            readOnly !== status.readOnly)\r\n        ) {\r\n          setStatus({ ...status, optionsMap, readOnly });\r\n        }\r\n        if (bindFormSubmit) {\r\n          // bind the submission handler remotely\r\n          bindFormSubmit(submitForm);\r\n        }\r\n        if (bindIsSubmitting) {\r\n          bindIsSubmitting(isSubmitting);\r\n        }\r\n        if (bindDirty) {\r\n          bindDirty(dirty);\r\n        }\r\n        return (\r\n          <>\r\n            {variant === \"block\" ? (\r\n              <RenderBlockForm\r\n                formObj={formObj}\r\n                handleSubmit={handleSubmit}\r\n                style={style}\r\n              />\r\n            ) : null}\r\n            {variant === \"table\" ? (\r\n              <RenderTableForm\r\n                confObj={formObj}\r\n                handleSubmit={handleSubmit}\r\n                values={values}\r\n                initialValues={initialValues}\r\n                readOnly={readOnly}\r\n                setFieldValue={setFieldValue}\r\n              />\r\n            ) : null}\r\n            {variant === \"xmlToForm\" ? (\r\n              <RenderXmlDescribedForm\r\n                formObj={formObj}\r\n                values={values}\r\n                initialValues={initialValues}\r\n              />\r\n            ) : null}\r\n            <ValidationErrorFocus />\r\n          </>\r\n        );\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nFormikMUI.defaultProps = {\r\n  bindFormSubmit: undefined,\r\n  optionsMap: {},\r\n  readOnly: false,\r\n  variant: \"block\",\r\n  enableReinitialize: false,\r\n  onSubmit: undefined,\r\n  additionalStatusProps: undefined,\r\n  bindIsSubmitting: undefined,\r\n  bindDirty: undefined,\r\n  enableStatusReinitialize: false,\r\n  style: undefined\r\n};\r\n\r\nFormikMUI.propTypes = {\r\n  formObj: PropTypes.shape({}).isRequired,\r\n  onSubmit(props, propName, componentName) {\r\n    if (props.readOnly !== true && typeof props[propName] !== \"function\") {\r\n      return new Error(\r\n        `prop \\`${propName}\\` should Be supplied if props[readOnly] is true to` +\r\n          ` \\`${componentName}\\`. Validation failed.`\r\n      );\r\n    }\r\n    return undefined;\r\n  },\r\n  bindDirty: PropTypes.func,\r\n  bindFormSubmit: PropTypes.func,\r\n  initialValues: PropTypes.shape({}).isRequired,\r\n  optionsMap: PropTypes.shape({}),\r\n  readOnly: PropTypes.bool,\r\n  variant: PropTypes.oneOf([\"block\", \"table\", \"xmlToForm\"]),\r\n  enableReinitialize: PropTypes.bool,\r\n  additionalStatusProps: PropTypes.shape({}),\r\n  bindIsSubmitting: PropTypes.func,\r\n  enableStatusReinitialize: PropTypes.bool,\r\n  style: PropTypes.shape({})\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  DialogTitle,\r\n  IconButton,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  Tabs,\r\n  Tab,\r\n  Grid,\r\n  Typography,\r\n  LinearProgress\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\n\r\nconst getStyles = makeStyles({\r\n  DialogTitleRoot: {\r\n    paddingBottom: \"10px\"\r\n  },\r\n  closeBtn: {\r\n    position: \"absolute\",\r\n    right: \"24px\",\r\n    top: \"15px\"\r\n  },\r\n  tabTitle: {\r\n    fontSize: \"15px\"\r\n  }\r\n});\r\n\r\nexport const RenderModalContent = ({\r\n  title,\r\n  closeHandler,\r\n  tabs,\r\n  firstFormInitialValues,\r\n  optionsMap,\r\n  actionButtons,\r\n  additionalActionButtonsDependedOnProps,\r\n  modal\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const arrayOfRefsToFormSubmitFunc = tabs.map(() => null);\r\n  const classes = getStyles();\r\n  const {\r\n    tabContent: { functionToExecuteThenPassResultAsProps }\r\n  } = tabs[activeTab];\r\n  const propsDependedOnFirstFormInitialValuesOrModal = functionToExecuteThenPassResultAsProps\r\n    ? functionToExecuteThenPassResultAsProps({\r\n        firstFormInitialValues,\r\n        modal\r\n      })\r\n    : {};\r\n  return (\r\n    <>\r\n      <DialogTitle classes={{ root: classes.DialogTitleRoot }}>\r\n        <Grid container justify=\"space-between\" alignItems=\"center\">\r\n          <Typography variant=\"h6\" style={{ width: \"90%\" }}>\r\n            {`${\r\n              typeof title === \"function\"\r\n                ? title(firstFormInitialValues)\r\n                : title\r\n            }${\r\n              firstFormInitialValues[\r\n                tabs[0].tabContent.passProps.formObj.headerText\r\n              ]\r\n            }`.toUpperCase()}\r\n          </Typography>\r\n          <IconButton className={classes.closeBtn} onClick={closeHandler}>\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </Grid>\r\n        <Tabs\r\n          value={activeTab}\r\n          onChange={(e, v) => setActiveTab(v)}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          variant={tabs.length > 3 ? \"scrollable\" : \"fullWidth\"}\r\n        >\r\n          {tabs.map(\r\n            ({\r\n              tabTitle,\r\n              conditionallyDisable,\r\n              disabled,\r\n              conditionallyRender\r\n            }) => {\r\n              if (\r\n                conditionallyRender &&\r\n                typeof conditionallyRender === \"function\" &&\r\n                conditionallyRender({ firstFormInitialValues, modal })\r\n              ) {\r\n                return null;\r\n              }\r\n              const computedIsDisabled =\r\n                disabled ||\r\n                (conditionallyDisable &&\r\n                  conditionallyDisable({ firstFormInitialValues, modal })) ||\r\n                false;\r\n              return (\r\n                <Tab\r\n                  fullWidth\r\n                  label={tabTitle}\r\n                  key={tabTitle}\r\n                  disabled={computedIsDisabled}\r\n                  classes={{ label: classes.tabTitle }}\r\n                />\r\n              );\r\n            }\r\n          )}\r\n        </Tabs>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {tabs.map(\r\n          (\r\n            {\r\n              tabContent: {\r\n                Component,\r\n                passProps,\r\n                functionToExecuteThenPassResultAsProps\r\n              },\r\n              tabTitle,\r\n              disabled\r\n            },\r\n            index\r\n          ) => {\r\n            if (disabled === true || activeTab !== index) {\r\n              return null;\r\n            }\r\n            return (\r\n              <div\r\n                style={!(activeTab === index) ? { display: \"none\" } : undefined}\r\n                key={tabTitle}\r\n              >\r\n                {index === 0 ? (\r\n                  <Component\r\n                    bindFormSubmit={refToFormSubmitFunc => {\r\n                      arrayOfRefsToFormSubmitFunc[index] = refToFormSubmitFunc;\r\n                    }}\r\n                    bindIsSubmitting={setIsSubmitting}\r\n                    {...passProps}\r\n                    initialValues={firstFormInitialValues}\r\n                    optionsMap={optionsMap}\r\n                    {...propsDependedOnFirstFormInitialValuesOrModal}\r\n                  />\r\n                ) : (\r\n                  <Component\r\n                    bindFormSubmit={refToFormSubmitFunc => {\r\n                      arrayOfRefsToFormSubmitFunc[index] = refToFormSubmitFunc;\r\n                    }}\r\n                    bindIsSubmitting={setIsSubmitting}\r\n                    {...passProps}\r\n                    firstFormInitialValues={firstFormInitialValues}\r\n                    modal={modal}\r\n                    {...propsDependedOnFirstFormInitialValuesOrModal}\r\n                  />\r\n                )}\r\n              </div>\r\n            );\r\n          }\r\n        )}\r\n        {isSubmitting && <LinearProgress />}\r\n      </DialogContent>\r\n      <DialogActions\r\n        style={modal.mode === \"edit\" ? { marginRight: \"8px\" } : undefined}\r\n      >\r\n        {/* Рендерит общие кнопки для всей модалки */}\r\n        {actionButtons}\r\n        {additionalActionButtonsDependedOnProps &&\r\n          additionalActionButtonsDependedOnProps.map(\r\n            ({ text, onClick, style, color, variant, conditionallyRender }) => {\r\n              if (\r\n                conditionallyRender &&\r\n                !conditionallyRender({ firstFormInitialValues, modal })\r\n              ) {\r\n                return null;\r\n              }\r\n              return (\r\n                <Button\r\n                  key={text}\r\n                  disabled={isSubmitting}\r\n                  variant={variant}\r\n                  onClick={() => {\r\n                    onClick({ modal, firstFormInitialValues });\r\n                  }}\r\n                  style={style}\r\n                  color={color}\r\n                >\r\n                  {text}\r\n                </Button>\r\n              );\r\n            }\r\n          )}\r\n        {tabs.map(\r\n          ({ tabButtons }, index) =>\r\n            activeTab === index &&\r\n            tabButtons && (\r\n              <React.Fragment key={index}>\r\n                {tabButtons.map(\r\n                  (\r\n                    { Btn, requiresFormSubmitRef, conditionallyRender },\r\n                    bIndex\r\n                  ) => {\r\n                    if (\r\n                      conditionallyRender &&\r\n                      !conditionallyRender({ modal, firstFormInitialValues })\r\n                    ) {\r\n                      return null;\r\n                    }\r\n                    if (requiresFormSubmitRef) {\r\n                      return (\r\n                        <Btn\r\n                          disabled={isSubmitting}\r\n                          actionHandler={() => {\r\n                            if (arrayOfRefsToFormSubmitFunc[activeTab])\r\n                              arrayOfRefsToFormSubmitFunc[activeTab]();\r\n                          }}\r\n                          key={`${index}-${bIndex}`}\r\n                        />\r\n                      );\r\n                    }\r\n                    return (\r\n                      <Btn key={`${index}-${bIndex}`} disabled={isSubmitting} />\r\n                    );\r\n                  }\r\n                )}\r\n              </React.Fragment>\r\n            )\r\n        )}\r\n      </DialogActions>\r\n    </>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Button,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Grid,\r\n  IconButton,\r\n  LinearProgress,\r\n  Typography\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { FormikMUI } from \"../formikMUi/formikNewRealisation\";\r\n\r\nconst getStyles = makeStyles({\r\n  DialogTitleRoot: {\r\n    paddingBottom: \"10px\"\r\n  },\r\n  closeBtn: {\r\n    position: \"absolute\",\r\n    right: \"24px\",\r\n    top: \"15px\"\r\n  },\r\n  tabTitle: {\r\n    fontSize: \"15px\"\r\n  }\r\n});\r\n\r\nexport const RenderModalCreateForm = ({\r\n  initialValues,\r\n  formObj,\r\n  title,\r\n  optionsMap,\r\n  closeHandler,\r\n  onSubmit,\r\n  actionButtons\r\n}) => {\r\n  let refToFormSubmitFunc;\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const classes = getStyles();\r\n  return (\r\n    <>\r\n      <DialogTitle classes={{ root: classes.DialogTitleRoot }}>\r\n        <Grid container justify=\"space-between\" alignItems=\"center\">\r\n          <Typography variant=\"h6\">\r\n            {`${typeof title === \"function\" ? title(initialValues) : title}${\r\n              initialValues[formObj.headerText]\r\n            }`.toUpperCase()}\r\n          </Typography>\r\n          <IconButton className={classes.closeBtn} onClick={closeHandler}>\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </Grid>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <FormikMUI\r\n          onSubmit={onSubmit}\r\n          formObj={formObj}\r\n          bindFormSubmit={ref => {\r\n            refToFormSubmitFunc = ref;\r\n          }}\r\n          bindIsSubmitting={setIsSubmitting}\r\n          initialValues={initialValues}\r\n          optionsMap={optionsMap}\r\n        />\r\n        {isSubmitting && <LinearProgress />}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {/* Рендерит общие кнопки для всей модалки */}\r\n        {actionButtons}\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          disabled={isSubmitting}\r\n          onClick={() => refToFormSubmitFunc()}\r\n        >\r\n          Сохранить\r\n        </Button>\r\n      </DialogActions>\r\n    </>\r\n  );\r\n};\r\n","import { get, set } from \"lodash\";\r\nimport React from \"react\";\r\nimport { AutoSizer } from \"react-virtualized\";\r\nimport MuiTable from \"mui-virtualized-table\";\r\nimport { constructRequest } from \"./constructRequest\";\r\nimport {\r\n  cancelButton,\r\n  deleteButton,\r\n  openEditButton,\r\n  PrimaryButton\r\n} from \"../buttons\";\r\nimport CompletePromiseThenRenderComponent, {\r\n  defaultPreloader\r\n} from \"../../completePromiseThenRenderComponent\";\r\nimport { findFieldsWithDictThenConstructArrayToDownload } from \"../../../utils/commonFormFunctions\";\r\nimport { getInitialValues } from \"./constructConfigArrayForLoaderComponent\";\r\nimport { FormikMUI } from \"../../formikMUi/formikNewRealisation\";\r\nimport {\r\n  allowedActions,\r\n  callDefaultErrorHandlerThenPopModal,\r\n  disableConfirmDialogPrimaryBtn,\r\n  dispatchFetchJournalData,\r\n  dispatchOpenSnackBar,\r\n  dispatchPopHeadModal\r\n} from \"../../../constants\";\r\nimport { store } from \"../../../store\";\r\nimport { closeConfirmDialog, openConfirmDialog } from \"../../../actions\";\r\nimport { RenderModalContent } from \"../renderModalContent\";\r\nimport { RenderModalCreateForm } from \"../renderModalContentWithOutTabs\";\r\nimport { constructInitialValuesForEmptyForm } from \"../../formikMUi/utils/initialValuesUtils\";\r\n\r\nexport const rebuildValues = (values, form) => {\r\n  let keysToRefactor = [];\r\n  form.blocks.forEach(({ fields }) => {\r\n    keysToRefactor = [\r\n      ...keysToRefactor,\r\n      ...fields.filter(\r\n        field =>\r\n          (field.type === \"select\" && get(values, field.name) !== null) ||\r\n          (field.type === \"file\" && get(values, field.name) !== null)\r\n      )\r\n    ];\r\n  });\r\n  const reconstructedValues = { ...values };\r\n  keysToRefactor.forEach(({ name, dictUrl, type }) => {\r\n    const fieldValue = get(values, name);\r\n    if (Array.isArray(fieldValue)) {\r\n      set(\r\n        reconstructedValues,\r\n        name,\r\n        fieldValue.map(\r\n          form.doBeforeSend && form.doBeforeSend[type]\r\n            ? value => form.doBeforeSend[type](value)\r\n            : ({ value }) => `${dictUrl.split(\"/search\")[0]}/${value}`\r\n        )\r\n      );\r\n    } else {\r\n      set(\r\n        reconstructedValues,\r\n        name,\r\n        form.doBeforeSend && form.doBeforeSend[type]\r\n          ? form.doBeforeSend[type](fieldValue)\r\n          : `${dictUrl}/${fieldValue.value}`\r\n      );\r\n    }\r\n  });\r\n\r\n  return reconstructedValues;\r\n};\r\n\r\nconst historyTableConfigObj = [\r\n  { dataKey: \"createdTimestamp\", label: \"Дата события\", relativeWidth: 1 },\r\n  { dataKey: \"initUser\", label: \"Инициатор\", relativeWidth: 1 },\r\n  { dataKey: \"text\", label: \"Описание\", relativeWidth: 2 }\r\n];\r\n\r\nconst HistoryTable = ({ data, ...props }) => {\r\n  return (\r\n    <AutoSizer>\r\n      {({ width, height }) => (\r\n        <MuiTable\r\n          data={data}\r\n          columns={historyTableConfigObj.map(\r\n            ({ label, dataKey, relativeWidth }) => ({\r\n              name: dataKey,\r\n              header: label,\r\n              width: `${(100 / 4) * relativeWidth}%`,\r\n              cellProps: { style: { paddingRight: 0 } }\r\n            })\r\n          )}\r\n          isCellHovered={(column, rowData, hoveredColumn, hoveredRowData) =>\r\n            rowData.uniqueId && rowData.uniqueId === hoveredRowData.uniqueId\r\n          }\r\n          {...props}\r\n          includeHeaders\r\n          fixedRowCount={1}\r\n          width={width}\r\n          height={height}\r\n        />\r\n      )}\r\n    </AutoSizer>\r\n  );\r\n};\r\n\r\nconst constructHistoryTab = () => ({\r\n  tabTitle: \"История\",\r\n  tabContent: {\r\n    Component: ({ modal }) => (\r\n      <div style={{ minHeight: \"40vh\", width: \"100%\" }}>\r\n        <CompletePromiseThenRenderComponent\r\n          config={[\r\n            {\r\n              whereToStore: \"data\",\r\n              urlToDownload: `/api/commonHistory/search/allPresentByUuid?uuid=${\r\n                modal.item.uuid\r\n              }&projection=tab`,\r\n              rebuildReceivedValue: ({ _embedded }) =>\r\n                Object.values(_embedded)[0]\r\n            }\r\n          ]}\r\n          Component={HistoryTable}\r\n          PreloaderComponent={defaultPreloader}\r\n          errorHandler={callDefaultErrorHandlerThenPopModal}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n});\r\n\r\nconst constructTabsArray = ({\r\n  formObj,\r\n  passProps,\r\n  functionToExecuteThenPassResultAsProps,\r\n  tabButtons,\r\n  historyTab\r\n}) => {\r\n  const { additionalTabs = [] } = formObj;\r\n  return [\r\n    {\r\n      tabTitle: \"Общая информация\",\r\n      tabContent: {\r\n        Component: FormikMUI,\r\n        passProps: { formObj, ...passProps },\r\n        functionToExecuteThenPassResultAsProps\r\n      },\r\n      tabButtons\r\n    },\r\n    ...additionalTabs,\r\n    historyTab\r\n  ];\r\n};\r\n\r\n// todo -Приоритет-Низкий- избавиться от дубляжа кода, например при открытиии в режиме редактирования профиля и редактироавнии пользователся\r\n// Эта жуткая функция выступает в роли \"Адаптера\" между кофиг-м объектом и необходимыми свойствами для отрисовки той или иной карточки\r\nexport const computePropsForFormikMUI = ({ formObj, mode }) => {\r\n  const resultingConfigObj = {\r\n    component: CompletePromiseThenRenderComponent,\r\n    forwardedProps: {\r\n      Component: RenderModalContent,\r\n      tabs: constructTabsArray({\r\n        formObj,\r\n        passProps: {\r\n          readOnly: mode === \"view\"\r\n        },\r\n        functionToExecuteThenPassResultAsProps: ({ modal }) => {\r\n          return {\r\n            onSubmit: (values, { setSubmitting }) => {\r\n              const urlId = formObj.customId\r\n                ? modal.item[formObj.customId]\r\n                : modal.item.uniqueId;\r\n\r\n              constructRequest(\r\n                {\r\n                  url: formObj.primaryActionUrl\r\n                    ? `${formObj.primaryActionUrl}/${urlId}`\r\n                    : `${formObj.url}/${urlId}`,\r\n                  method: formObj.method,\r\n                  data: rebuildValues(values, formObj)\r\n                },\r\n                ({ status }) => {\r\n                  if (status === 200 || status === 201) {\r\n                    dispatchOpenSnackBar(\r\n                      `Объект \"${formObj.titleItem}\" успешно изменен`\r\n                    );\r\n                  }\r\n                  setSubmitting(false);\r\n                  dispatchPopHeadModal();\r\n                  dispatchFetchJournalData();\r\n                },\r\n                dispatchOpenSnackBar,\r\n                dispatchPopHeadModal,\r\n                setSubmitting\r\n              );\r\n            }\r\n          };\r\n        },\r\n        tabButtons:\r\n          mode === \"edit\"\r\n            ? [\r\n                {\r\n                  Btn: PrimaryButton,\r\n                  requiresFormSubmitRef: true\r\n                }\r\n              ]\r\n            : [],\r\n        historyTab: constructHistoryTab()\r\n      }),\r\n      // такая фигня появилась из-за струтуры БД (они намешали обеъкты разной природы в 1 таблицу....)\r\n      title:\r\n        typeof formObj.title === \"function\"\r\n          ? firstFormInitialValues =>\r\n              `Карточка просмотра ${formObj.title(firstFormInitialValues)}: `\r\n          : `Карточка просмотра ${formObj.title}: `,\r\n      actionButtons: [cancelButton(() => dispatchPopHeadModal())],\r\n      additionalActionButtonsDependedOnProps:\r\n        formObj.additionalActionButtonsDependedOnProps,\r\n      PreloaderComponent: defaultPreloader,\r\n      errorHandler: er => callDefaultErrorHandlerThenPopModal(er)\r\n    },\r\n    functionsToExecute: []\r\n  };\r\n  if (mode === \"create\") {\r\n    resultingConfigObj.forwardedProps = {\r\n      Component: RenderModalCreateForm,\r\n      formObj,\r\n      title: `Карточка создания ${formObj.title}`,\r\n      actionButtons: [cancelButton(() => dispatchPopHeadModal())],\r\n      readOnly: false,\r\n      PreloaderComponent: defaultPreloader,\r\n      errorHandler: er => callDefaultErrorHandlerThenPopModal(er)\r\n    };\r\n\r\n    resultingConfigObj.forwardedProps.config = findFieldsWithDictThenConstructArrayToDownload(\r\n      formObj\r\n    );\r\n    resultingConfigObj.forwardedProps.initialValues = constructInitialValuesForEmptyForm(\r\n      formObj\r\n    );\r\n\r\n    resultingConfigObj.forwardedProps.onSubmit = (values, { setSubmitting }) =>\r\n      constructRequest(\r\n        {\r\n          url: formObj.primaryActionUrl\r\n            ? formObj.primaryActionUrl\r\n            : formObj.url,\r\n          method: formObj.method,\r\n          data: rebuildValues(values, formObj)\r\n        },\r\n        ({ status }) => {\r\n          if (status === 201) {\r\n            dispatchOpenSnackBar(\r\n              `Объект \"${formObj.titleItem}\" успешно создан`\r\n            );\r\n          }\r\n          setSubmitting(false);\r\n          dispatchPopHeadModal();\r\n          dispatchFetchJournalData();\r\n        },\r\n        dispatchOpenSnackBar,\r\n        dispatchPopHeadModal,\r\n        setSubmitting\r\n      );\r\n  }\r\n  if (mode === \"view\") {\r\n    resultingConfigObj.functionsToExecute = [\r\n      ...resultingConfigObj.functionsToExecute,\r\n      {\r\n        func: modal => {\r\n          const { category, page } = modal;\r\n          const {\r\n            forwardedProps: { actionButtons }\r\n          } = resultingConfigObj;\r\n\r\n          let resActionBtns = [...actionButtons];\r\n          const allowedActionsVar = allowedActions();\r\n          if (\r\n            (allowedActionsVar[category] &&\r\n              allowedActionsVar[category].includes &&\r\n              allowedActionsVar[category].includes(\"delete\")) ||\r\n            (allowedActionsVar[category] &&\r\n              allowedActionsVar[category][page] &&\r\n              allowedActionsVar[category][page].includes(\"delete\"))\r\n          ) {\r\n            resActionBtns = [\r\n              ...actionButtons,\r\n              deleteButton(() => {\r\n                store.dispatch(\r\n                  openConfirmDialog({\r\n                    mainText: `удалить объект \"${\r\n                      formObj.titleItem ? formObj.titleItem : formObj.title\r\n                    }\": ${modal.item.label ||\r\n                      modal.item.shortName ||\r\n                      modal.item.surnameInitials ||\r\n                      modal.item.uuid}?`,\r\n                    primaryButtonHandler: () => {\r\n                      disableConfirmDialogPrimaryBtn(true);\r\n                      constructRequest(\r\n                        {\r\n                          url: `${formObj.url}/${modal.item.uniqueId}`,\r\n                          method: \"delete\"\r\n                        },\r\n                        ({ status }) => {\r\n                          disableConfirmDialogPrimaryBtn(true);\r\n                          if (status === 204) {\r\n                            dispatchOpenSnackBar(\r\n                              `Объект \"${\r\n                                formObj.titleItem\r\n                                  ? formObj.titleItem\r\n                                  : formObj.title\r\n                              }\" успешно удален`\r\n                            );\r\n                          }\r\n                          store.dispatch(closeConfirmDialog());\r\n                          dispatchPopHeadModal();\r\n                          dispatchFetchJournalData();\r\n                        },\r\n                        dispatchOpenSnackBar,\r\n                        dispatchPopHeadModal\r\n                      );\r\n                    }\r\n                  })\r\n                );\r\n              })\r\n            ];\r\n          }\r\n\r\n          if (\r\n            (allowedActionsVar[category].includes &&\r\n              allowedActionsVar[category].includes(\"delete\")) ||\r\n            (allowedActionsVar[category] &&\r\n              allowedActionsVar[category][page] &&\r\n              allowedActionsVar[category][page].includes(\"edit\"))\r\n          ) {\r\n            resActionBtns = [\r\n              ...resActionBtns,\r\n              openEditButton({\r\n                modal: { ...modal, mode: \"edit\" }\r\n              })\r\n            ];\r\n          }\r\n\r\n          return resActionBtns;\r\n        },\r\n        passResultAs: \"actionButtons\"\r\n      }\r\n    ];\r\n  }\r\n  if (mode === \"view\" || mode === \"edit\") {\r\n    /* такая конструкция строит массив объектов на основе которых в последствии компонент \"загрузчик\" скачает необходимые данные,\r\n     расчёт должен происходить позднее т.к. на момент вызова не известны некоторые данные необходимые для идентификации */\r\n    // resultingConfigObj.forwardedProps.tabs = constructTabsArray(formObj);\r\n    resultingConfigObj.functionsToExecute = [\r\n      ...resultingConfigObj.functionsToExecute,\r\n      {\r\n        func: modal => [\r\n          ...findFieldsWithDictThenConstructArrayToDownload(formObj),\r\n          getInitialValues(modal, formObj)\r\n        ],\r\n        passResultAs: \"config\"\r\n      }\r\n    ];\r\n  }\r\n  if (mode === \"edit\") {\r\n    resultingConfigObj.forwardedProps.title = `Карточка редактирования ${\r\n      formObj.title\r\n    }: `;\r\n  }\r\n\r\n  if (mode === \"profile\") {\r\n    resultingConfigObj.forwardedProps = {\r\n      Component: RenderModalCreateForm,\r\n      formObj,\r\n      title: `Карточка редактирования профиля ${formObj.title}: `,\r\n      actionButtons: [cancelButton(() => dispatchPopHeadModal())],\r\n      readOnly: false,\r\n      PreloaderComponent: defaultPreloader,\r\n      errorHandler: er => callDefaultErrorHandlerThenPopModal(er)\r\n    };\r\n    resultingConfigObj.functionsToExecute = [\r\n      ...resultingConfigObj.functionsToExecute,\r\n      {\r\n        func: modal => [\r\n          ...findFieldsWithDictThenConstructArrayToDownload(formObj),\r\n          {\r\n            ...getInitialValues(modal, formObj, \"initialValues\")\r\n          }\r\n        ],\r\n        passResultAs: \"config\"\r\n      },\r\n      {\r\n        func: modal => (values, { setSubmitting }) =>\r\n          constructRequest(\r\n            {\r\n              url: formObj.primaryActionUrl\r\n                ? `${formObj.primaryActionUrl}/${modal.item.uniqueId}`\r\n                : `${formObj.url}/${modal.item.uniqueId}`,\r\n              method: formObj.method,\r\n              data: rebuildValues(values, formObj)\r\n            },\r\n            ({ status }) => {\r\n              if (status === 201) {\r\n                dispatchOpenSnackBar(`Изменения были успешно применены`);\r\n              }\r\n              setSubmitting(false);\r\n              dispatchPopHeadModal();\r\n            },\r\n            dispatchOpenSnackBar,\r\n            dispatchPopHeadModal,\r\n            setSubmitting\r\n          ),\r\n        passResultAs: \"onSubmit\"\r\n      }\r\n    ];\r\n\r\n    resultingConfigObj.forwardedProps.renderSubmitButton = true;\r\n    resultingConfigObj.forwardedProps.isInitialValid = true;\r\n  }\r\n  return resultingConfigObj;\r\n};\r\n","export const phoneMask = [\r\n  \"+\",\r\n  \"7\",\r\n  \"(\",\r\n  /\\d/,\r\n  /\\d/,\r\n  /\\d/,\r\n  \")\",\r\n  \" \",\r\n  /\\d/,\r\n  /\\d/,\r\n  /\\d/,\r\n  \"-\",\r\n  /\\d/,\r\n  /\\d/,\r\n  \"-\",\r\n  /\\d/,\r\n  /\\d/\r\n];\r\n\r\nexport const snilsMask = [\r\n  /\\d/,\r\n  /\\d/,\r\n  /\\d/,\r\n  \"-\",\r\n  /\\d/,\r\n  /\\d/,\r\n  /\\d/,\r\n  \"-\",\r\n  /\\d/,\r\n  /\\d/,\r\n  /\\d/,\r\n  \" \",\r\n  /\\d/,\r\n  /\\d/\r\n];\r\n\r\nexport const time24HMask = value => {\r\n  if (value.charAt(0) === \"2\") {\r\n    return [/[0-2]/, /[0-3]/, \":\", /[0-5]/, /[0-9]/];\r\n  }\r\n  return [/[0-2]/, /[0-9]/, \":\", /[0-5]/, /[0-9]/];\r\n};\r\n","export const fullWidth = { md: 12, lg: 12, xl: 12 };\r\nexport const halfWith = { md: 6, lg: 6, xl: 6 };\r\n","import { extractPayloadFromBaseSpringDateRestStructure } from \"../../utils/commonFormFunctions\";\r\n\r\nexport const rebuildReceivedValueLabelFullNameValueUniqueId = ({\r\n  uniqueId,\r\n  fullName\r\n}) => ({\r\n  label: fullName,\r\n  value: uniqueId\r\n});\r\n\r\nexport const rebuildReceivedValueLabelLabelValueUniqueId = ({\r\n  uniqueId,\r\n  label,\r\n  enum: enumName\r\n}) => ({\r\n  label,\r\n  value: uniqueId,\r\n  enum: enumName\r\n});\r\n\r\nexport const rebuildReceivedValueLabelLabelValueLabel = ({ label }) => ({\r\n  label,\r\n  value: label\r\n});\r\n\r\nexport const rebuildReceivedOptionsLabelAsLabelUniqueIdAsValue = data =>\r\n  data.map(rebuildReceivedValueLabelLabelValueUniqueId);\r\n\r\nexport const constructRebuildReceivedOptions = functionToCallForEach => data =>\r\n  extractPayloadFromBaseSpringDateRestStructure(data).map(\r\n    functionToCallForEach\r\n  );\r\n\r\nexport const constructRebuildReceivedOptionsLabelFullNameValueUniqueId = data =>\r\n  extractPayloadFromBaseSpringDateRestStructure(data).map(\r\n    rebuildReceivedValueLabelFullNameValueUniqueId\r\n  );\r\n\r\nexport const constructRebuildReceivedOptionsLabelLabelValueUniqueId = data =>\r\n  rebuildReceivedOptionsLabelAsLabelUniqueIdAsValue(\r\n    extractPayloadFromBaseSpringDateRestStructure(data)\r\n  );\r\n\r\nexport const constructRebuildReceivedOptionsLabelLabelValueLabel = data =>\r\n  extractPayloadFromBaseSpringDateRestStructure(data).map(\r\n    rebuildReceivedValueLabelLabelValueLabel\r\n  );\r\n","import axios from \"axios\";\r\nimport { createNumberMask } from \"text-mask-addons\";\r\nimport { time24HMask } from \"../masks\";\r\n\r\nexport const baseTextAreaProps = {\r\n  type: \"text\",\r\n  additionalProps: {\r\n    multiline: true,\r\n    fullWidth: true,\r\n    rowsMax: 6\r\n  }\r\n};\r\n\r\nexport const saveFileInCommonFiles = value =>\r\n  axios.post(\"/api/file/save\", value, {\r\n    \"Content-Type\": \"multipart/form-data\"\r\n  });\r\n\r\nexport const baseTimeFieldProps = {\r\n  type: \"formatted\",\r\n  mask: time24HMask\r\n};\r\n\r\nexport const baseNumberProps = ({\r\n  prefix = \"\",\r\n  includeThousandsSeparator = false,\r\n  ...rest\r\n} = {}) => ({\r\n  type: \"formatted\",\r\n  mask: createNumberMask({\r\n    prefix,\r\n    includeThousandsSeparator,\r\n    ...rest\r\n  })\r\n});\r\n","import { emailMask } from \"text-mask-addons/dist/textMaskAddons\";\r\nimport Yup from \"../../yup\";\r\nimport { computePropsForFormikMUI } from \"../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport { phoneMask } from \"../../masks\";\r\nimport { fullWidth, halfWith } from \"../../widths\";\r\nimport {\r\n  constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n  rebuildReceivedOptionsLabelAsLabelUniqueIdAsValue,\r\n  rebuildReceivedValueLabelLabelValueUniqueId\r\n} from \"../../rebuildRecieved\";\r\nimport { saveFileInCommonFiles } from \"../../baseFieldProps\";\r\n\r\nconst baseForm = {\r\n  title: \"Пользователя\",\r\n  titleItem: \"Пользователь\",\r\n  headerText: \"fullname\",\r\n  url: \"/api/sysUsers\",\r\n  projection: \"formSysUser\",\r\n  primaryActionUrl: \"/api/user/sysUser\",\r\n  method: \"post\",\r\n  doBeforeSend: { select: ({ value }) => value },\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Фотография\",\r\n          name: \"photo\",\r\n          type: \"file\",\r\n          doBeforeSetFieldValue: saveFileInCommonFiles,\r\n          accept: \"image/*\",\r\n          widths: fullWidth\r\n        },\r\n        { name: \"accost\", type: \"text\", label: \"Обращение\", widths: halfWith },\r\n        {\r\n          name: \"sanCode\",\r\n          label: \"Сан\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/sysDictSan/search/present\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          name: \"firstname\",\r\n          type: \"text\",\r\n          label: \"Имя\"\r\n        },\r\n        {\r\n          name: \"surname\",\r\n          type: \"text\",\r\n          label: \"Фамилия\"\r\n        },\r\n        {\r\n          name: \"middlename\",\r\n          type: \"text\",\r\n          label: \"Отчество\"\r\n        },\r\n        {\r\n          name: \"fullname\",\r\n          type: \"text\",\r\n          label: \"ФИО\",\r\n          hidden: true\r\n        },\r\n        {\r\n          name: \"birthday\",\r\n          label: \"Дата рождения\",\r\n          type: \"date\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          name: \"hirotonyday\",\r\n          label: \"Дата хиротонии\",\r\n          type: \"date\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          name: \"member\",\r\n          label: \"Место служения\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          name: \"specializationCode\",\r\n          label: \"Специализация\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/sysDictSpecialization/search/present\",\r\n          widths: halfWith\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      blockTitle: \"Авторизационная информация\",\r\n      fields: [\r\n        {\r\n          name: \"phone\",\r\n          label: \"Телефон\\\\Имя для входа\",\r\n          type: \"formatted\",\r\n          mask: phoneMask,\r\n          uniqueCheck: {\r\n            url: \"/api/sysAuthen/search/existsByName\",\r\n            constructParams: (v, value) => ({\r\n              name: value\r\n            })\r\n          }\r\n        },\r\n        {\r\n          name: \"password\",\r\n          type: \"password\",\r\n          label: \"Пароль\"\r\n        },\r\n        {\r\n          name: \"isActiveLogin\",\r\n          label: \"Активная учётная запись\",\r\n          type: \"checkbox\",\r\n          defaultValue: true\r\n        },\r\n        {\r\n          name: \"role\",\r\n          label: \"Роль\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/user/role\",\r\n          rebuildReceivedOptions: rebuildReceivedOptionsLabelAsLabelUniqueIdAsValue,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      blockTitle: \"Дополнительная информация\",\r\n      fields: [\r\n        {\r\n          name: \"email\",\r\n          label: \"E-mail\",\r\n          type: \"formatted\",\r\n          mask: emailMask\r\n        },\r\n        {\r\n          name: \"isSendEmail\",\r\n          label: \"Использовать email уведомления \",\r\n          type: \"checkbox\"\r\n        },\r\n        {\r\n          name: \"isSendMessage\",\r\n          label: \"Использовать push уведомления\",\r\n          type: \"checkbox\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    surname: Yup.string().required(),\r\n    firstname: Yup.string().required(),\r\n    middlename: Yup.string(),\r\n    // fullName: Yup.string(),\r\n    accost: Yup.string(),\r\n    phone: Yup.string().required(),\r\n    email: Yup.string(),\r\n    password: Yup.string().required(),\r\n    san: Yup.object().nullable(),\r\n    role: Yup.object()\r\n      .nullable()\r\n      .required(),\r\n    isActiveLogin: Yup.bool(),\r\n    specializationCode: Yup.object().nullable(),\r\n    member: Yup.object().nullable()\r\n  })\r\n};\r\n\r\nconst profile = {\r\n  title: \"Пользователя\",\r\n  titleItem: \"Пользователь\",\r\n  headerText: \"fullname\",\r\n  url: \"/api/sysUsers\",\r\n  projection: \"formSysUser\",\r\n  primaryActionUrl: \"/api/user/sysUser\",\r\n  method: \"patch\",\r\n  doBeforeSend: { select: ({ value }) => value },\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Фотография\",\r\n          name: \"photo\",\r\n          type: \"file\",\r\n          doBeforeSetFieldValue: saveFileInCommonFiles,\r\n          accept: \"image/*\",\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          name: \"firstname\",\r\n          type: \"text\",\r\n          label: \"Имя\"\r\n        },\r\n        {\r\n          name: \"surname\",\r\n          type: \"text\",\r\n          label: \"Фамилия\"\r\n        },\r\n        {\r\n          name: \"middlename\",\r\n          type: \"text\",\r\n          label: \"Отчество\"\r\n        },\r\n        { name: \"accost\", type: \"text\", label: \"Обращение\" },\r\n        {\r\n          name: \"fullname\",\r\n          type: \"text\",\r\n          label: \"ФИО\",\r\n          hidden: true\r\n        },\r\n        {\r\n          name: \"birthday\",\r\n          label: \"Дата рождения\",\r\n          type: \"date\",\r\n          widths: { md: 2, lg: 2, xl: 2 }\r\n        },\r\n        {\r\n          name: \"sanCode\",\r\n          label: \"Сан\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/sysDictSan/search/present\",\r\n          widths: halfWith,\r\n          readOnly: true\r\n        },\r\n        {\r\n          name: \"hirotonyday\",\r\n          label: \"Дата хиротонии\",\r\n          type: \"date\"\r\n        },\r\n        {\r\n          name: \"member\",\r\n          label: \"Место служения\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: fullWidth,\r\n          readOnly: true\r\n        },\r\n        {\r\n          name: \"specializationCode\",\r\n          label: \"Специализация\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/sysDictSpecialization/search/present\",\r\n          widths: halfWith,\r\n          readOnly: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      blockTitle: \"Авторизационная информация\",\r\n      fields: [\r\n        {\r\n          name: \"phone\",\r\n          label: \"Телефон\\\\Имя для входа\",\r\n          type: \"formatted\",\r\n          mask: phoneMask,\r\n          uniqueCheck: {\r\n            url: \"/api/sysAuthen/search/existsByName\",\r\n            constructParams: (v, value) => ({\r\n              name: value\r\n            })\r\n          }\r\n        },\r\n        {\r\n          name: \"password\",\r\n          type: \"password\",\r\n          label: \"Пароль\"\r\n        },\r\n        {\r\n          name: \"role\",\r\n          label: \"Роль\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/user/role\",\r\n          rebuildReceivedOptions: rebuildReceivedOptionsLabelAsLabelUniqueIdAsValue,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          readOnly: true,\r\n          widths: halfWith\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      blockTitle: \"Дополнительная информация\",\r\n      fields: [\r\n        {\r\n          name: \"email\",\r\n          label: \"E-mail\",\r\n          type: \"formatted\",\r\n          mask: emailMask\r\n        },\r\n        {\r\n          name: \"isSendEmail\",\r\n          label: \"Использовать email уведомления \",\r\n          type: \"checkbox\"\r\n        },\r\n        {\r\n          name: \"isSendMessage\",\r\n          label: \"Использовать push уведомления\",\r\n          type: \"checkbox\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    surname: Yup.string().required(),\r\n    firstname: Yup.string().required(),\r\n    middlename: Yup.string(),\r\n    // fullName: Yup.string(),\r\n    accost: Yup.string(),\r\n    phone: Yup.string().required(),\r\n    email: Yup.string(),\r\n    password: Yup.string().required(),\r\n    san: Yup.object().nullable(),\r\n    role: Yup.object()\r\n      .nullable()\r\n      .required(),\r\n    specializationCode: Yup.object().nullable(),\r\n    member: Yup.object().nullable()\r\n  })\r\n};\r\n\r\nconst forms = {\r\n  create: computePropsForFormikMUI({ formObj: baseForm, mode: \"create\" }),\r\n  view: computePropsForFormikMUI({ formObj: baseForm, mode: \"view\" }),\r\n  edit: computePropsForFormikMUI({\r\n    formObj: {\r\n      ...baseForm,\r\n      method: \"patch\",\r\n      doBeforeSend: { select: ({ value }) => value },\r\n      validationSchema: Yup.object({\r\n        surname: Yup.string().required(),\r\n        firstname: Yup.string().required(),\r\n        middlename: Yup.string(),\r\n        // fullName: Yup.string(),\r\n        accost: Yup.string(),\r\n        phone: Yup.string().required(),\r\n        email: Yup.string(),\r\n        password: Yup.string(),\r\n        san: Yup.object().nullable(),\r\n        role: Yup.object()\r\n          .nullable()\r\n          .required(),\r\n        isActiveLogin: Yup.bool(),\r\n        specializationCode: Yup.object().nullable(),\r\n        member: Yup.object().nullable()\r\n      })\r\n    },\r\n    mode: \"edit\"\r\n  }),\r\n  profile: computePropsForFormikMUI({ formObj: profile, mode: \"profile\" })\r\n};\r\nexport default forms;\r\n","import forms from \"./form\";\r\nimport { phoneMask } from \"../../masks\";\r\nimport {\r\n  constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n  rebuildReceivedOptionsLabelAsLabelUniqueIdAsValue\r\n} from \"../../rebuildRecieved\";\r\n\r\nconst users = {\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administration_user_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"administrator_hram_user_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"member_user_view\",\r\n      allowedActions: [\"view\"]\r\n    }\r\n  ],\r\n  title: \"Журнал Пользователей\",\r\n  url: \"/api/journalUsers\",\r\n  filtersPanel: {\r\n    filters: [\r\n      { label: \"ФИО\", name: \"surnameInitials\", type: \"text\" },\r\n      {\r\n        label: \"Обращение\",\r\n        name: \"accost\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Место служения\",\r\n        name: \"memberId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/strMember/search/present\",\r\n        rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId\r\n      },\r\n      {\r\n        label: \"Роль\",\r\n        name: \"role\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/user/role\",\r\n        rebuildReceivedOptions: rebuildReceivedOptionsLabelAsLabelUniqueIdAsValue\r\n      },\r\n      {\r\n        label: \"Телефон\",\r\n        name: \"phone\",\r\n        type: \"formatted\",\r\n        mask: phoneMask\r\n      }\r\n    ]\r\n  },\r\n  tableHeader: [\r\n    {\r\n      label: \"ФИО\",\r\n      sortable: true,\r\n      path: \"fullName\",\r\n      width: \"20%\"\r\n    },\r\n    {\r\n      label: \"Обращение\",\r\n      sortable: false,\r\n      path: \"accost\",\r\n      width: \"20%\"\r\n    },\r\n    {\r\n      label: \"Место служения\",\r\n      sortable: true,\r\n      path: \"memberName\",\r\n      width: \"35%\"\r\n    },\r\n    {\r\n      label: \"Роль\",\r\n      sortable: true,\r\n      path: \"role\",\r\n      width: \"15%\"\r\n    },\r\n    {\r\n      label: \"Телефон\",\r\n      sortable: false,\r\n      path: \"phone\",\r\n      width: \"15%\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\nexport default users;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress/CircularProgress\";\r\nimport Grid from \"@material-ui/core/Grid/Grid\";\r\nimport Typography from \"@material-ui/core/Typography/Typography\";\r\nimport Paper from \"@material-ui/core/Paper/Paper\";\r\nimport { connect } from \"react-redux\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { Button, DialogActions } from \"@material-ui/core\";\r\nimport { TOGGLE_SNACKBAR } from \"../constants\";\r\nimport { FormikMUI } from \"./formikMUi/formikNewRealisation\";\r\nimport { defaultErrorHandler } from \"../utils/defaultErrorHandler\";\r\nimport { baseRebuildReceivedInitialValues } from \"./formikMUi/utils/initialValuesUtils\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  header: {\r\n    padding: theme.spacing.unit\r\n  },\r\n  cntr: { width: \"100%\", height: \"100%\" },\r\n  mainContainer: {\r\n    padding: \"8px\",\r\n    marginBottom: \"8px\",\r\n    height: \" 100%\",\r\n    width: \"100%\",\r\n    overflowY: \"auto\"\r\n  }\r\n}));\r\n\r\nconst PrivateSysSettingsConfig = ({\r\n  confObj: { initialValuesUrl, title },\r\n  confObj,\r\n  openSnackBar\r\n}) => {\r\n  const [state, setState] = useState({ isLoading: true });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [dirty, setDirty] = useState(true);\r\n  const classes = getStyles();\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source();\r\n    try {\r\n      axios\r\n        .get(initialValuesUrl, { cancelToken: source.token })\r\n        .then(({ data }) => {\r\n          const keys = [];\r\n          confObj.blocks.forEach(({ fields }) =>\r\n            fields.forEach(({ name }) => keys.push(name))\r\n          );\r\n\r\n          const downloaded = Object.values(data._embedded)[0].filter(\r\n            settingObj => keys.includes(settingObj.name)\r\n          );\r\n          const pathLabelIdMap = {};\r\n          const tempInitialValues = {};\r\n          downloaded.forEach(\r\n            ({ name, description, uniqueId, valueOfAttribute }) => {\r\n              pathLabelIdMap[name] = { uniqueId, label: description };\r\n              tempInitialValues[name] = valueOfAttribute;\r\n            }\r\n          );\r\n\r\n          const tempForm = { ...confObj };\r\n\r\n          tempForm.blocks.forEach(({ fields }) =>\r\n            fields.forEach(field => {\r\n              field.label =\r\n                pathLabelIdMap[field.name] && pathLabelIdMap[field.name].label;\r\n            })\r\n          );\r\n\r\n          setState({\r\n            formObj: tempForm,\r\n            initialValues: baseRebuildReceivedInitialValues(\r\n              tempForm,\r\n              tempInitialValues\r\n            ),\r\n            isLoading: false,\r\n            pathLabelIdMap\r\n          });\r\n        });\r\n    } catch (error) {\r\n      if (!axios.isCancel(error)) {\r\n        defaultErrorHandler(error);\r\n      }\r\n    }\r\n    return () => {\r\n      source.cancel(\"Cancelling in cleanup\");\r\n    };\r\n  }, [confObj, initialValuesUrl]);\r\n\r\n  const { isLoading, formObj, initialValues, pathLabelIdMap } = state;\r\n  let refToFormSubmitFunc = null;\r\n  return isLoading && !initialValues && !formObj ? (\r\n    <Grid\r\n      justify=\"center\"\r\n      alignContent=\"center\"\r\n      direction=\"column\"\r\n      alignItems=\"center\"\r\n      container\r\n      className={classes.cntr}\r\n    >\r\n      <Typography variant=\"h6\">Идет загрузка данных с сервера</Typography>\r\n      <CircularProgress size={120} />\r\n    </Grid>\r\n  ) : (\r\n    <Paper square className={classes.mainContainer} elevation={5}>\r\n      <Typography variant=\"h6\" className={classes.header}>\r\n        {title.toUpperCase()}\r\n      </Typography>\r\n      <FormikMUI\r\n        enableReinitialize\r\n        formObj={formObj}\r\n        initialValues={initialValues}\r\n        bindFormSubmit={ref => {\r\n          refToFormSubmitFunc = ref;\r\n        }}\r\n        bindDirty={setDirty}\r\n        bindIsSubmitting={setIsSubmitting}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          const changedFields = [];\r\n\r\n          formObj.blocks.forEach(({ fields }) => {\r\n            fields.forEach(({ name, type }) => {\r\n              const currentValue = values[name];\r\n              if (initialValues[name] !== currentValue) {\r\n                let resultValue;\r\n                if (\r\n                  formObj.doBeforeSend &&\r\n                  (type === \"file\" || type === \"select\")\r\n                ) {\r\n                  resultValue = formObj.doBeforeSend[type]\r\n                    ? formObj.doBeforeSend[type](values[name])\r\n                    : values[name];\r\n                } else {\r\n                  resultValue = currentValue;\r\n                }\r\n                changedFields.push({\r\n                  value: resultValue,\r\n                  uniqueId: pathLabelIdMap[name].uniqueId\r\n                });\r\n              }\r\n            });\r\n          });\r\n\r\n          axios\r\n            .all(\r\n              changedFields.map(({ value, uniqueId }) =>\r\n                axios.patch(`${formObj.url}/${uniqueId}`, {\r\n                  valueOfAttribute: value\r\n                })\r\n              )\r\n            )\r\n            .then(() => {\r\n              setSubmitting(false);\r\n              openSnackBar(\"Системные настройки успешно изменены\");\r\n            })\r\n            .catch(er => {\r\n              openSnackBar(\r\n                \"Во время сохранения изменений в системных настройках произошла ошибка\"\r\n              );\r\n              setSubmitting(false);\r\n            });\r\n        }}\r\n      />\r\n      <DialogActions>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          disabled={!dirty || isSubmitting}\r\n          onClick={() => {\r\n            if (\r\n              refToFormSubmitFunc &&\r\n              typeof refToFormSubmitFunc === \"function\"\r\n            ) {\r\n              refToFormSubmitFunc();\r\n            }\r\n          }}\r\n        >\r\n          Сохранить\r\n        </Button>\r\n      </DialogActions>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nPrivateSysSettingsConfig.propTypes = {\r\n  confObj: PropTypes.shape({\r\n    title: PropTypes.string.isRequired,\r\n    initialValuesUrl: PropTypes.string.isRequired\r\n  }).isRequired,\r\n  openSnackBar: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  openSnackBar: message =>\r\n    dispatch({\r\n      type: TOGGLE_SNACKBAR,\r\n      payload: { message, isSnackBarOpened: true }\r\n    })\r\n});\r\n\r\nexport const SysSettingsConfig = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PrivateSysSettingsConfig);\r\n","import { emailMask } from \"text-mask-addons\";\r\nimport Yup from \"../../yup\";\r\nimport { fullWidth, halfWith } from \"../../widths\";\r\nimport { SysSettingsConfig } from \"../../../components/sysSettingsConfig\";\r\nimport { baseNumberProps, baseTextAreaProps } from \"../../baseFieldProps\";\r\nimport { saveFileInCommonFiles } from \"../../baseFieldProps\";\r\n\r\nconst rebuildReceivedValue = v => {\r\n  if (v) {\r\n    return JSON.parse(v);\r\n  }\r\n  return null;\r\n};\r\n\r\nconst settings = {\r\n  requiresFunction: [\r\n    { functionName: \"administration_global_modifier\", allowedActions: [\"edit\"] }\r\n  ],\r\n  title: \"Системные настройки\",\r\n  passProps: {\r\n    confObj: {\r\n      title: \"Системные настройки\",\r\n      url: \"/api/sysSystemConfig\",\r\n      method: \"patch\",\r\n      doBeforeSend: {\r\n        file: v => JSON.stringify(v)\r\n      },\r\n      initialValuesUrl: \"/api/sysSystemConfig/search/present\",\r\n      blocks: [\r\n        {\r\n          blockTitle: \"СИНХРОНИЗАЦИЯ ПРАВОСЛАВНОГО КАЛЕНДАРЯ\",\r\n          fields: [\r\n            {\r\n              name: \"sync_server_host\",\r\n              label: \"\",\r\n              type: \"text\"\r\n            },\r\n            {\r\n              name: \"sync_frequency_cron\",\r\n              label: \"\",\r\n              type: \"text\"\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          blockTitle: \"ПАРАМЕТРЫ ПОЧТОВОГО СЕРВЕРА\",\r\n          fields: [\r\n            {\r\n              name: \"mail_server_username\",\r\n              label: \"\",\r\n              type: \"text\"\r\n            },\r\n            {\r\n              name: \"mail_server_password\",\r\n              label: \"\",\r\n              type: \"password\"\r\n            },\r\n            {\r\n              name: \"mail_server_port\",\r\n              label: \"\",\r\n              ...baseNumberProps({ allowLeadingZeroes: true })\r\n            },\r\n            {\r\n              name: \"mail_server_host\",\r\n              label: \"\",\r\n              type: \"text\"\r\n            },\r\n            {\r\n              name: \"mail_delivery_from_personal\",\r\n              label: \"\",\r\n              type: \"text\"\r\n            },\r\n            {\r\n              name: \"mail_delivery_from_address\",\r\n              label: \"\",\r\n              type: \"formatted\",\r\n              mask: emailMask\r\n            },\r\n\r\n            {\r\n              name: \"mail_server_ssl\",\r\n              label: \"\",\r\n              type: \"checkbox\"\r\n            },\r\n            {\r\n              name: \"mail_server_auth\",\r\n              label: \"\",\r\n              type: \"checkbox\"\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          blockTitle: \"БЛОК НАСТРОЙКИ ЧАСТОТЫ УВЕДОМЛЕНИЙ\",\r\n          fields: [\r\n            {\r\n              name: \"notification_frequency_event\",\r\n              label: \"\",\r\n              ...baseNumberProps()\r\n            },\r\n            {\r\n              name: \"notification_frequency_raw_claim\",\r\n              label: \"\",\r\n              ...baseNumberProps()\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          blockTitle: \"АНКЕТИРОВАНИЕ\",\r\n          fields: [\r\n            {\r\n              name: \"questioning_baptism\",\r\n              label: \"\",\r\n              type: \"file\",\r\n              rebuildReceivedValue,\r\n              doBeforeSetFieldValue: saveFileInCommonFiles,\r\n              widths: fullWidth\r\n            },\r\n            {\r\n              name: \"questioning_wedding\",\r\n              label: \"\",\r\n              type: \"file\",\r\n              rebuildReceivedValue,\r\n              doBeforeSetFieldValue: saveFileInCommonFiles,\r\n              widths: fullWidth\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          blockTitle: \"РАБОТА С БЕСЕДАМИ\",\r\n          fields: [\r\n            {\r\n              name: \"conversation_frequency_recording_person\",\r\n              label: \"\",\r\n              ...baseNumberProps(),\r\n              widths: halfWith\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          blockTitle: \"РАБОТА С ЗАЯВКАМИ\",\r\n          fields: [\r\n            {\r\n              name: \"claim_not_less_days\",\r\n              label: \"\",\r\n              ...baseNumberProps(),\r\n              widths: halfWith\r\n            },\r\n            {\r\n              name: \"claim_not_more_days\",\r\n              label: \"\",\r\n              ...baseNumberProps(),\r\n              widths: halfWith\r\n            },\r\n            {\r\n              name: \"claim_auto_remove\",\r\n              label: \"\",\r\n              ...baseNumberProps(),\r\n              widths: fullWidth\r\n            },\r\n            {\r\n              name: \"claim_auto_transfer_to_free\",\r\n              label: \"\",\r\n              ...baseNumberProps(),\r\n              widths: fullWidth\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          blockTitle: \"ПАРАМЕТРЫ СМС СЕРВИСА\",\r\n          fields: [\r\n            {\r\n              name: \"sms_server_host\",\r\n              label: \"\",\r\n              type: \"text\"\r\n            },\r\n            {\r\n              name: \"sms_database_login\",\r\n              label: \"\",\r\n              type: \"text\"\r\n            },\r\n            {\r\n              name: \"sms_database_password\",\r\n              label: \"\",\r\n              type: \"text\"\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          blockTitle: \"ИНОЕ\",\r\n          fields: [\r\n            {\r\n              name: \"other_count_lock\",\r\n              label: \"\",\r\n              ...baseNumberProps()\r\n            },\r\n            {\r\n              name: \"other_disclaimer_text\",\r\n              label: \"\",\r\n              ...baseTextAreaProps\r\n            },\r\n            {\r\n              name: \"other_disclaimer_enable\",\r\n              label: \"\",\r\n              type: \"checkbox\"\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      validationSchema: Yup.object({\r\n        sync_server_host: Yup.string().required(),\r\n        sync_frequency_cron: Yup.string().required(),\r\n        mail_server_username: Yup.string().required(),\r\n        mail_server_password: Yup.string().required(),\r\n        mail_server_port: Yup.string().required(),\r\n        mail_server_host: Yup.string().required(),\r\n        mail_delivery_from_personal: Yup.string().required(),\r\n        mail_delivery_from_address: Yup.string().required(),\r\n        mail_server_ssl: Yup.string().required(),\r\n        mail_server_auth: Yup.string().required(),\r\n        notification_frequency_event: Yup.string().required(),\r\n        notification_frequency_raw_claim: Yup.string().required(),\r\n        questioning_baptism: Yup.string().required(),\r\n        questioning_wedding: Yup.string().required(),\r\n        conversation_frequency_recording_person: Yup.string().required(),\r\n        claim_not_less_days: Yup.string().required(),\r\n        claim_not_more_days: Yup.string().required(),\r\n        claim_auto_remove: Yup.string().required(),\r\n        claim_auto_transfer_to_free: Yup.string().required(),\r\n        sms_server_host: Yup.string().required(),\r\n        sms_database_login: Yup.string().required(),\r\n        sms_database_password: Yup.string().required(),\r\n        other_count_lock: Yup.string().required(),\r\n        other_disclaimer_text: Yup.string().required(),\r\n        other_disclaimer_enable: Yup.string().required()\r\n      })\r\n    }\r\n  },\r\n  Component: SysSettingsConfig\r\n};\r\nexport default settings;\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport axios from \"axios\";\r\nimport { createNumberMask } from \"text-mask-addons/dist/textMaskAddons\";\r\nimport {\r\n  dispatchCloseConfirmDialogFormik,\r\n  disableConfirmDialogPrimaryBtn,\r\n  dispatchFetchJournalData,\r\n  dispatchOpenConfirmDialogFormik,\r\n  dispatchOpenSnackBar\r\n} from \"../../../index\";\r\nimport Yup from \"../../../yup\";\r\n\r\nconst additionalActionPanelButtons = [\r\n  <Button\r\n    variant=\"contained\"\r\n    color=\"secondary\"\r\n    style={{ backgroundColor: \"#357a38\" }}\r\n    onClick={() =>\r\n      dispatchOpenConfirmDialogFormik({\r\n        title: \"Синхронизировать сведения об Участнике\",\r\n        formObj: {\r\n          blocks: [\r\n            {\r\n              fields: [\r\n                {\r\n                  label: \"Идентификатор Участника в РГУ\",\r\n                  name: \"rguId\",\r\n                  type: \"formatted\",\r\n                  mask: createNumberMask({\r\n                    prefix: \"\",\r\n                    includeThousandsSeparator: false,\r\n                    allowLeadingZeroes: true\r\n                  }),\r\n                  widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          validationSchema: Yup.object({\r\n            rguId: Yup.number()\r\n              .positive()\r\n              .required()\r\n          })\r\n        },\r\n        initialValues: {\r\n          rguId: \"\"\r\n        },\r\n        primaryButtonText: \"Синхронизировать\",\r\n        primaryButtonHandler: (values, { setSubmitting }) => {\r\n          const { rguId } = values;\r\n          axios\r\n            .post(`/api/members/syncMemberById/${rguId}`)\r\n            .then(({ status }) => {\r\n              disableConfirmDialogPrimaryBtn(true);\r\n              if (status === 201 || status === 200) {\r\n                dispatchOpenSnackBar(\r\n                  `Участник с идентификатором \"${rguId} был успешно синхронизирован`\r\n                );\r\n              }\r\n              // не знаю как но статус 204 относится к успешному завершению\r\n              if (status === 204 || status === 404) {\r\n                dispatchOpenSnackBar(\r\n                  `Участника с идентификатором \"${rguId}\" не найдено`\r\n                );\r\n              }\r\n              setSubmitting(false);\r\n              dispatchCloseConfirmDialogFormik();\r\n              dispatchFetchJournalData();\r\n            })\r\n            .catch(error => {\r\n              setSubmitting(false);\r\n              if (\r\n                error.response.status === 204 ||\r\n                error.response.status === 404 ||\r\n                error.status === 204\r\n              ) {\r\n                dispatchOpenSnackBar(\r\n                  `Не найдено участника с таким идентификатором \"${rguId}\"`\r\n                );\r\n              }\r\n            });\r\n        }\r\n      })\r\n    }\r\n  >\r\n    Синхронизировать\r\n  </Button>\r\n];\r\n\r\nexport default additionalActionPanelButtons;\r\n","import React from \"react\";\r\nimport createNumberMask from \"text-mask-addons/dist/createNumberMask\";\r\nimport Yup from \"../../../yup\";\r\nimport { computePropsForFormikMUI } from \"../../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport { findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks } from \"../../../../utils/commonFormFunctions\";\r\nimport {\r\n  callDefaultErrorHandlerThenPopModal,\r\n  dispatchPopHeadModal\r\n} from \"../../../index\";\r\nimport CompletePromiseThenRenderComponent, {\r\n  defaultPreloader\r\n} from \"../../../../components/completePromiseThenRenderComponent\";\r\nimport { FormikMUI } from \"../../../../components/formikMUi/formikNewRealisation\";\r\nimport { constructRequest } from \"../../../../actions\";\r\nimport { PrimaryButton } from \"../../../../components/modalWrapper/buttons\";\r\nimport {\r\n  constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n  rebuildReceivedValueLabelFullNameValueUniqueId\r\n} from \"../../../rebuildRecieved\";\r\n\r\nconst baseForm = {\r\n  title: \"Участника\",\r\n  titleItem: \"Участник\",\r\n  headerText: \"fullName\",\r\n  url: \"/api/members/structureMember\",\r\n  doBeforeSend: {\r\n    select: ({ value }) => value\r\n  },\r\n  projection: \"formMember\",\r\n  method: \"post\",\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          name: \"shortName\",\r\n          label: \"Краткое наименование\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          name: \"fullName\",\r\n          type: \"text\",\r\n          label: \"Полное наименование\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          name: \"rguId\",\r\n          label: \"Идентификатор в РГУ\",\r\n          type: \"text\",\r\n          readOnly: true\r\n        },\r\n        {\r\n          name: \"synchronizeTimestamp\",\r\n          label: \"Дата синхронизации с РГУ\",\r\n          type: \"text\",\r\n          readOnly: true\r\n        },\r\n        {\r\n          name: \"parentId\",\r\n          label: \"Вышестоящее подразделение\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/structureMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelFullNameValueUniqueId,\r\n          widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          name: \"supremeParentId\",\r\n          label: \"Головное подразделение\",\r\n          readOnly: true,\r\n          type: \"select\",\r\n          dictUrl: \"/api/structureMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelFullNameValueUniqueId,\r\n          widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      blockTitle: \"Дополнительная информация\",\r\n      fields: [\r\n        {\r\n          name: \"memberInfo.orgHead\",\r\n          label: \"ФИО руководителя\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          name: \"memberInfo.orgPhone\",\r\n          label: \"Телефон\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          name: \"memberInfo.web\",\r\n          label: \"Интернет-сайт\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          name: \"memberInfo.post\",\r\n          label: \"Почтовый адрес\",\r\n          type: \"text\",\r\n          widths: { lg: 8, xl: 8 }\r\n        },\r\n        {\r\n          name: \"memberInfo.inn\",\r\n          label: \"ИНН\",\r\n          type: \"formatted\",\r\n          mask: createNumberMask({\r\n            prefix: \"\",\r\n            includeThousandsSeparator: false,\r\n            allowLeadingZeroes: true,\r\n            integerLimit: 10\r\n          })\r\n        },\r\n        {\r\n          name: \"memberInfo.ogrn\",\r\n          label: \"ОГРН\",\r\n          type: \"formatted\",\r\n          mask: createNumberMask({\r\n            prefix: \"\",\r\n            includeThousandsSeparator: false,\r\n            allowLeadingZeroes: true,\r\n            integerLimit: 13\r\n          })\r\n        },\r\n\r\n        {\r\n          name: \"memberInfo.workTime\",\r\n          label: \"График работы\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    shortName: Yup.string().required(),\r\n    fullName: Yup.string().required(),\r\n    rguId: Yup.string(),\r\n    synchronizeTimestamp: Yup.string(),\r\n    parentId: Yup.object().nullable(),\r\n    supremeParentId: Yup.object().nullable(),\r\n    memberInfo: Yup.object({\r\n      orgHead: Yup.string(),\r\n      orgPhone: Yup.string(),\r\n      web: Yup.string(),\r\n      post: Yup.string(),\r\n      ogrn: Yup.string(),\r\n      workTime: Yup.string(),\r\n      inn: Yup.string()\r\n    })\r\n  })\r\n};\r\n\r\nconst memberMvFormObj = {\r\n  doBeforeSend: {\r\n    select: ({ value }) => value,\r\n    file: ({ value }) => value\r\n  },\r\n  fields: [\r\n    {\r\n      name: \"mvList\",\r\n      label: \"mvList\",\r\n      type: \"fieldArray\",\r\n      fields: [\r\n        {\r\n          name: \"uniqueId\",\r\n          label: \"Идентификатор\",\r\n          type: \"text\",\r\n          hidden: true\r\n        },\r\n        {\r\n          name: \"mvObjectId\",\r\n          label: \"Наименование вида сведений\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mv/objects\",\r\n          rebuildReceivedOptions: data =>\r\n            data.map(({ label, uniqueId }) => ({\r\n              label,\r\n              value: uniqueId\r\n            })),\r\n          width: 2\r\n        },\r\n        {\r\n          name: \"isDeleted\",\r\n          label: \"isDeleted\",\r\n          type: \"checkbox\",\r\n          hidden: true\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    mvList: Yup.array()\r\n      .of(\r\n        Yup.object({\r\n          mvObjectId: Yup.object().when(\"isDeleted\", {\r\n            is: true,\r\n            then: Yup.object().nullable(),\r\n            otherwise: Yup.object()\r\n              .nullable()\r\n              .required()\r\n          }),\r\n          isDeleted: Yup.bool(),\r\n          uniqueId: Yup.string()\r\n        })\r\n      )\r\n      .min(1)\r\n  })\r\n};\r\n\r\nconst baseViewEdit = {\r\n  ...baseForm,\r\n  url: \"/api/structureMember\",\r\n  primaryActionUrl: \"/api/members/structureMember\",\r\n  additionalTabs: [\r\n    {\r\n      tabTitle: \"Перечень Видов сведений\",\r\n      tabContent: {\r\n        Component: ({\r\n          modal: {\r\n            item: { uniqueId }\r\n          },\r\n          ...rest\r\n        }) => (\r\n          <CompletePromiseThenRenderComponent\r\n            Component={FormikMUI}\r\n            variant=\"table\"\r\n            config={[\r\n              {\r\n                urlToDownload: `/api/memberMv/structureMemberMv/${uniqueId}`,\r\n                whereToStore: \"rawInitialValues\",\r\n                postLoadDoSomethingThenPassResultAsProp: {\r\n                  func: data => ({\r\n                    mvList: data.map(\r\n                      ({\r\n                        mvObject: { label, uniqueId: mvUniqueId },\r\n                        ...restO\r\n                      }) => ({\r\n                        mvObjectId: {\r\n                          label,\r\n                          value: mvUniqueId\r\n                        },\r\n                        ...restO\r\n                      })\r\n                    ),\r\n                    procedureId: uniqueId\r\n                  }),\r\n                  passResultAs: \"initialValues\"\r\n                }\r\n              },\r\n              ...findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks(\r\n                memberMvFormObj\r\n              )\r\n            ]}\r\n            formObj={memberMvFormObj}\r\n            errorHandler={callDefaultErrorHandlerThenPopModal}\r\n            PreloaderComponent={defaultPreloader}\r\n            {...rest}\r\n          />\r\n        ),\r\n        passProps: {\r\n          enableReinitialize: true\r\n        },\r\n        functionToExecuteThenPassResultAsProps: ({\r\n          modal: {\r\n            item: { uniqueId },\r\n            mode\r\n          },\r\n          firstFormInitialValues: { supremeParentId }\r\n        }) => ({\r\n          onSubmit: ({ mvList }, { setSubmitting }) => {\r\n            constructRequest(\r\n              {\r\n                method: \"post\",\r\n                url: `/api/memberMv/structureMemberMv/${uniqueId}`,\r\n                data: mvList\r\n                  .filter(item => {\r\n                    if (item === null) {\r\n                      return false;\r\n                    }\r\n                    const { uniqueId: listId, isDeleted } = item;\r\n                    return !(listId === null && isDeleted === true);\r\n                  })\r\n                  .map(item => ({ ...item, mvObjectId: item.mvObjectId.value }))\r\n              },\r\n              () => {\r\n                dispatchPopHeadModal();\r\n                setSubmitting(false);\r\n              },\r\n              () => setSubmitting(false)\r\n            );\r\n          },\r\n          readOnly: mode !== \"edit\" || supremeParentId !== null\r\n        })\r\n      },\r\n      tabButtons: [\r\n        {\r\n          Btn: PrimaryButton,\r\n          requiresFormSubmitRef: true,\r\n          conditionallyRender: ({\r\n            modal: { mode },\r\n            firstFormInitialValues: { supremeParentId }\r\n          }) => mode === \"edit\" && supremeParentId === null\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n\r\nconst forms = {\r\n  create: computePropsForFormikMUI({ formObj: baseForm, mode: \"create\" }),\r\n  view: computePropsForFormikMUI({\r\n    formObj: baseViewEdit,\r\n    mode: \"view\"\r\n  }),\r\n  edit: computePropsForFormikMUI({\r\n    formObj: {\r\n      ...baseViewEdit,\r\n      method: \"patch\"\r\n    },\r\n    mode: \"edit\"\r\n  })\r\n};\r\n\r\nexport default forms;\r\n","import { Domain } from \"@material-ui/icons\";\r\nimport additionalActionPanelButtons from \"./additionalButtons\";\r\nimport forms from \"./form\";\r\nimport { baseDictResponseRefactor } from \"../../../index\";\r\nimport { extractPayloadFromBaseSpringDateRestStructure } from \"../../../../utils/commonFormFunctions\";\r\n\r\nconst members = {\r\n  navigationLabel: \"Участники\",\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administration_member_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"member_member_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    }\r\n  ],\r\n  url: \"/api/journalMembers\",\r\n  icon: Domain,\r\n  additionalActionPanelButtons,\r\n  filtersPanel: {\r\n    filters: [\r\n      {\r\n        label: \"Участник\",\r\n        name: \"uniqueId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/structureMember/search/present\",\r\n        rebuildReceivedOptions: data => {\r\n          const extractedData = extractPayloadFromBaseSpringDateRestStructure(\r\n            data\r\n          );\r\n          return Array.isArray(extractedData)\r\n            ? extractedData.map(({ uniqueId, fullName }) => ({\r\n                label: fullName,\r\n                value: uniqueId\r\n              }))\r\n            : [];\r\n        }\r\n      },\r\n      { label: \"Идентификатор в РГУ\", name: \"rguId\", type: \"text\" },\r\n      {\r\n        label: \"Вышестоящее подразделение\",\r\n        name: \"supremeParentId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/structureMember/search/present\",\r\n        rebuildReceivedOptions: data =>\r\n          baseDictResponseRefactor(data).map(({ fullName, uniqueId }) => ({\r\n            label: fullName,\r\n            value: uniqueId\r\n          }))\r\n      }\r\n    ]\r\n  },\r\n  tableHeader: [\r\n    {\r\n      label: \"Участник\",\r\n      sortable: true,\r\n      path: \"fullName\",\r\n      width: \"40%\"\r\n    },\r\n    {\r\n      label: \"Идентификатор в РГУ\",\r\n      sortable: true,\r\n      path: \"rguId\",\r\n      width: \"15%\"\r\n    },\r\n    {\r\n      label: \"Вышестоящее подразделение\",\r\n      sortable: true,\r\n      path: \"supremeParentFullName\",\r\n      width: \"45%\"\r\n    },\r\n    {\r\n      label: \"Дата и время синхронизации с РГУ\",\r\n      sortable: true,\r\n      path: \"synchronizeTimestamp\",\r\n      width: \"20%\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\nexport default members;\r\n","import axios from \"axios\";\r\nimport React from \"react\";\r\nimport { computePropsForFormikMUI } from \"../../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport Yup from \"../../../yup\";\r\nimport { findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks } from \"../../../../utils/commonFormFunctions\";\r\nimport {\r\n  baseDictResponseRefactor,\r\n  dispatchOpenSnackBar,\r\n  dispatchPopHeadModal\r\n} from \"../../../index\";\r\nimport CompletePromiseThenRenderComponent, {\r\n  defaultPreloader\r\n} from \"../../../../components/completePromiseThenRenderComponent\";\r\nimport { defaultErrorHandler } from \"../../../../utils/defaultErrorHandler\";\r\nimport { constructRequest } from \"../../../../actions\";\r\nimport { PrimaryButton } from \"../../../../components/modalWrapper/buttons\";\r\nimport { FormikMUI } from \"../../../../components/formikMUi/formikNewRealisation\";\r\nimport {\r\n  constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n  rebuildReceivedValueLabelFullNameValueUniqueId\r\n} from \"../../../rebuildRecieved\";\r\n\r\nconst baseForm = {\r\n  title: \"Подуслуги\",\r\n  titleItem: \"Подуслуга\",\r\n  headerText: \"fullName\",\r\n  url: \"/api/procedures/structureProcedures\",\r\n  projection: \"formStructureProcedure\",\r\n  doBeforeSend: {\r\n    file: ({ value }) => value,\r\n    select: ({ value }) => value\r\n  },\r\n  method: \"post\",\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Наименование подуслуги\",\r\n          name: \"fullName\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          label: \"Идентификатор подуслуги в РГУ\",\r\n          name: \"rguId\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Идентификатор услуги в РГУ\",\r\n          name: \"serviceId\",\r\n          readOnly: true,\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Наименование услуги\",\r\n          name: \"serviceShortName\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          label: \"Участник\",\r\n          name: \"organizationId\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/structureMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelFullNameValueUniqueId,\r\n          widths: { lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          label: \"Дата синхронизации\",\r\n          name: \"synchronizeTimestamp\",\r\n          readOnly: true,\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Файл описания шаблона заявления\",\r\n          name: \"claimFile\",\r\n          type: \"file\",\r\n          doBeforeSetFieldValue: value =>\r\n            axios.post(\"/api/file/save\", value, {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }),\r\n          widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          label: \"Файл описания шаблона БП\",\r\n          name: \"bpmnFile\",\r\n          type: \"file\",\r\n          doBeforeSetFieldValue: value =>\r\n            axios.post(\"/api/file/save\", value, {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }),\r\n          widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          label: \"Функция\",\r\n          name: \"isFunction\",\r\n          type: \"checkbox\",\r\n          widths: { lg: 6, xl: 6 }\r\n        },\r\n        {\r\n          label: \"Признак платности\",\r\n          name: \"isPaid\",\r\n          type: \"checkbox\",\r\n          widths: { lg: 6, xl: 6 },\r\n          customOnChange: ({ value, status, setStatus }) => {\r\n            if (value === true) {\r\n              setStatus({\r\n                registeredFields: {\r\n                  ...status.registeredFields,\r\n                  gisgmpId: true,\r\n                  gisgmpMemberUrn: true\r\n                }\r\n              });\r\n            } else {\r\n              setStatus({\r\n                registeredFields: {\r\n                  ...status.registeredFields,\r\n                  gisgmpId: false,\r\n                  gisgmpMemberUrn: false\r\n                }\r\n              });\r\n            }\r\n          }\r\n        },\r\n        {\r\n          label: \"ИД процедуры в ГИС СО СГМП\",\r\n          name: \"gisgmpId\",\r\n          type: \"text\",\r\n          widths: { lg: 6, xl: 6 },\r\n          customInitialRegister: ({ isPaid }) => isPaid === true\r\n        },\r\n        {\r\n          label: \"УРН участника в ГИС СО СГМП\",\r\n          name: \"gisgmpMemberUrn\",\r\n          type: \"text\",\r\n          widths: { lg: 6, xl: 6 },\r\n          customInitialRegister: ({ isPaid }) => isPaid === true\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    fullName: Yup.string().required(),\r\n    rguId: Yup.string().required(),\r\n    isFunction: Yup.bool(),\r\n    serviceId: Yup.string(),\r\n    serviceShortName: Yup.string(),\r\n    organizationId: Yup.object()\r\n      .nullable()\r\n      .required(),\r\n    synchronizeTimestamp: Yup.string(),\r\n    claimFile: Yup.object()\r\n      .nullable()\r\n      .required(),\r\n    bpmnFile: Yup.object()\r\n      .nullable()\r\n      .required(),\r\n    gisgmpId: Yup.string().when(\"isPaid\", {\r\n      is: true,\r\n      then: Yup.string().required(),\r\n      otherwise: Yup.string()\r\n    }),\r\n    gisgmpMemberUrn: Yup.string().when(\"isPaid\", {\r\n      is: true,\r\n      then: Yup.string().required(),\r\n      otherwise: Yup.string()\r\n    })\r\n  })\r\n};\r\n\r\nconst confObj = {\r\n  doBeforeSend: {\r\n    select: ({ value }) => value,\r\n    file: ({ value }) => value\r\n  },\r\n  fields: [\r\n    {\r\n      name: \"mvList\",\r\n      label: \"mvList\",\r\n      type: \"fieldArray\",\r\n      fields: [\r\n        {\r\n          name: \"uniqueId\",\r\n          label: \"Идентификатор\",\r\n          type: \"text\",\r\n          hidden: true\r\n        },\r\n        {\r\n          name: \"mvObjectId\",\r\n          label: \"Наименование вида сведений\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mv/objects\",\r\n          rebuildReceivedOptions: data =>\r\n            data.map(({ label, uniqueId }) => ({ label, value: uniqueId })),\r\n          width: 2\r\n        },\r\n        {\r\n          name: \"autoDelivered\",\r\n          label: \"Способ отправки\",\r\n          type: \"select\",\r\n          options: [\r\n            { label: \"Авто\", value: true },\r\n            { label: \"Ручной\", value: false }\r\n          ],\r\n          placeholder: \" \"\r\n        },\r\n        {\r\n          name: \"claimMvXml\",\r\n          label: \"Атрибуты запроса\",\r\n          doBeforeSetFieldValue: value =>\r\n            axios.post(\"/api/file/save\", value, {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }),\r\n          type: \"file\"\r\n        },\r\n        {\r\n          name: \"isDeleted\",\r\n          label: \"isDeleted\",\r\n          type: \"checkbox\",\r\n          hidden: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      name: \"procedureId\",\r\n      label: \"procedureId\",\r\n      type: \"text\",\r\n      hidden: true\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    mvList: Yup.array()\r\n      .of(\r\n        Yup.object({\r\n          mvObjectId: Yup.object().when(\"isDeleted\", {\r\n            is: true,\r\n            then: Yup.object().nullable(),\r\n            otherwise: Yup.object()\r\n              .nullable()\r\n              .required()\r\n          }),\r\n          autoDelivered: Yup.object().when(\"isDeleted\", {\r\n            is: true,\r\n            then: Yup.object().nullable(),\r\n            otherwise: Yup.object()\r\n              .nullable()\r\n              .required()\r\n          }),\r\n          claimMvXml: Yup.object()\r\n            .nullable()\r\n            .when(\"autoDelivered\", (autoDelivered, schema) =>\r\n              autoDelivered !== null && autoDelivered.value\r\n                ? schema.required()\r\n                : schema\r\n            ),\r\n          isDeleted: Yup.bool(),\r\n          uniqueId: Yup.string()\r\n        })\r\n      )\r\n      .min(1)\r\n  })\r\n};\r\n\r\nconst baseViewEdit = {\r\n  ...baseForm,\r\n  url: \"/api/structureProcedure\",\r\n  primaryActionUrl: \"/api/procedures/structureProcedures\",\r\n  additionalTabs: [\r\n    {\r\n      tabTitle: \"Перечень видов сведений\",\r\n      tabContent: {\r\n        Component: ({\r\n          modal: {\r\n            item: { uniqueId }\r\n          },\r\n          ...rest\r\n        }) => (\r\n          <CompletePromiseThenRenderComponent\r\n            config={[\r\n              {\r\n                urlToDownload: `/api/procedureMv/search/presentByProcedure?procedureId=${uniqueId}&projection=procedureMvList`,\r\n                whereToStore: \"rawInitialValues\",\r\n                postLoadDoSomethingThenPassResultAsProp: {\r\n                  func: data => ({\r\n                    mvList: baseDictResponseRefactor(data).map(\r\n                      ({\r\n                        mvObject: { label, uniqueId: mvUniqueId },\r\n                        autoDelivered,\r\n                        ...restO\r\n                      }) => ({\r\n                        mvObjectId: {\r\n                          label,\r\n                          value: mvUniqueId\r\n                        },\r\n                        autoDelivered:\r\n                          autoDelivered === true\r\n                            ? { label: \"Авто\", value: true }\r\n                            : { label: \"Ручное\", value: false },\r\n                        ...restO\r\n                      })\r\n                    ),\r\n                    procedureId: uniqueId\r\n                  }),\r\n                  passResultAs: \"initialValues\"\r\n                }\r\n              },\r\n              ...findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks(\r\n                confObj\r\n              )\r\n            ]}\r\n            PreloaderComponent={defaultPreloader}\r\n            Component={FormikMUI}\r\n            errorHandler={defaultErrorHandler}\r\n            {...rest}\r\n          />\r\n        ),\r\n        passProps: {\r\n          formObj: confObj,\r\n          variant: \"table\"\r\n        },\r\n        functionToExecuteThenPassResultAsProps: ({\r\n          modal: {\r\n            item: { uniqueId },\r\n            mode\r\n          }\r\n        }) => ({\r\n          onSubmit: ({ procedureId, mvList }, { setSubmitting }) => {\r\n            constructRequest(\r\n              {\r\n                method: \"post\",\r\n                url: \"/api/procedureMv/structureProcedureMvList\",\r\n                data: mvList\r\n                  .filter(\r\n                    item => !(item.isDeleted === true && item.uniqueId === \"\")\r\n                  )\r\n                  .map(item => ({\r\n                    ...item,\r\n                    autoDelivered: item.autoDelivered.value,\r\n                    mvObjectId: item.mvObjectId.value,\r\n                    claimMvXml:\r\n                      item.claimMvXml !== null ? item.claimMvXml.value : null,\r\n                    procedureId\r\n                  }))\r\n              },\r\n              () => {\r\n                dispatchPopHeadModal();\r\n                dispatchOpenSnackBar(\"Атрибуты МВ успешно изменены\");\r\n                setSubmitting(false);\r\n              },\r\n              () => setSubmitting(false)\r\n            );\r\n          },\r\n          readOnly: mode !== \"edit\"\r\n        })\r\n      },\r\n      tabButtons: [\r\n        {\r\n          Btn: PrimaryButton,\r\n          requiresFormSubmitRef: true,\r\n          conditionallyRender: ({ modal: { mode } }) => mode === \"edit\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n\r\nconst forms = {\r\n  create: computePropsForFormikMUI({ formObj: baseForm, mode: \"create\" }),\r\n  view: computePropsForFormikMUI({\r\n    formObj: baseViewEdit,\r\n    mode: \"view\"\r\n  }),\r\n  edit: computePropsForFormikMUI({\r\n    formObj: { ...baseViewEdit, method: \"patch\" },\r\n    mode: \"edit\"\r\n  })\r\n};\r\n\r\nexport default forms;\r\n","import { BusinessCenterSharp } from \"@material-ui/icons\";\r\nimport forms from \"./form\";\r\nimport { extractPayloadFromBaseSpringDateRestStructure } from \"../../../../utils/commonFormFunctions\";\r\n\r\nconst services = {\r\n  navigationLabel: \"Услуги\",\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administration_service_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"member_service_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    }\r\n  ],\r\n  url: \"/api/journalStructureProcedures\",\r\n  icon: BusinessCenterSharp,\r\n  filtersPanel: {\r\n    filters: [\r\n      {\r\n        label: \"Идентификатор подуслуги в РГУ\",\r\n        name: \"rguId\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Наименование подуслуги\",\r\n        type: \"text\",\r\n        name: \"fullName\"\r\n      },\r\n      {\r\n        label: \"Идентификатор услуги в РГУ\",\r\n        name: \"serviceRguId\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Наименование услуги\",\r\n        name: \"serviceFullName\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Участник\",\r\n        name: \"memberId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/structureMember/search/present\",\r\n        rebuildReceivedOptions: data => {\r\n          const extractedData = extractPayloadFromBaseSpringDateRestStructure(\r\n            data\r\n          );\r\n          return Array.isArray(extractedData)\r\n            ? extractedData.map(({ uniqueId, fullName }) => ({\r\n                label: fullName,\r\n                value: uniqueId\r\n              }))\r\n            : [];\r\n        }\r\n      }\r\n    ]\r\n  },\r\n  tableHeader: [\r\n    {\r\n      label: \"Участник\",\r\n      sortable: true,\r\n      path: \"memberFullName\"\r\n    },\r\n    {\r\n      label: \"Наименование подуслуги\",\r\n      sortable: true,\r\n      path: \"fullName\"\r\n    },\r\n    {\r\n      label: \"Идентификатор подуслуги в РГУ\",\r\n      sortable: true,\r\n      path: \"rguId\"\r\n    },\r\n    {\r\n      label: \"Наименование услуги\",\r\n      sortable: true,\r\n      path: \"serviceFullName\"\r\n    },\r\n    {\r\n      label: \"Идентификатор услуги в РГУ\",\r\n      sortable: true,\r\n      path: \"serviceRguId\"\r\n    },\r\n    {\r\n      label: \"Функция\",\r\n      sortable: true,\r\n      path: \"isFunction\",\r\n      width: \"15%\"\r\n    },\r\n    {\r\n      label: \"Дата и время синхронизации с РГУ\",\r\n      sortable: true,\r\n      path: \"synchronizeTimestamp\",\r\n      width: \"20%\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\nexport default services;\r\n","import axios from \"axios\";\r\nimport { computePropsForFormikMUI } from \"../../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport Yup from \"../../../yup\";\r\nimport { extractPayloadFromBaseSpringDateRestStructure } from \"../../../../utils/commonFormFunctions\";\r\nimport {\r\n  constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n  rebuildReceivedValueLabelFullNameValueUniqueId\r\n} from \"../../../rebuildRecieved\";\r\n\r\nconst baseForm = {\r\n  title: \"Вида сведения\",\r\n  titleItem: \"Вид сведения\",\r\n  headerText: \"label\",\r\n  url: \"/api/mvObject\",\r\n  projection: \"formMvObject\",\r\n  method: \"post\",\r\n  doBeforeSend: {\r\n    file: ({ value }) => value,\r\n    select: ({ value }) => value\r\n  },\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Наименование\",\r\n          name: \"label\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          label: \"Описание\",\r\n          name: \"description\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          label: \"Направление\",\r\n          name: \"direction\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mvDirection/search/present\",\r\n          readOnly: true\r\n        },\r\n        {\r\n          label: \"Версия\",\r\n          name: \"version\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Пространство имен\",\r\n          name: \"mainCode\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Тип\",\r\n          name: \"mvType\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mvType/search/present\",\r\n          rebuildReceivedOptions: data => {\r\n            const extractedData = extractPayloadFromBaseSpringDateRestStructure(\r\n              data\r\n            );\r\n            return Array.isArray(extractedData)\r\n              ? extractedData.map(({ code, label }) => ({\r\n                  label,\r\n                  value: code\r\n                }))\r\n              : [];\r\n          },\r\n          rebuildReceivedValue: data => ({\r\n            label: data.label,\r\n            value: data.code\r\n          })\r\n        },\r\n        {\r\n          label: \"Поставщик сведений\",\r\n          name: \"provider\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mvProvider/search/present\",\r\n          widths: { md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          label: \"Адрес доставки\",\r\n          name: \"directionUrl\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Участник\",\r\n          name: \"member\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/structureMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelFullNameValueUniqueId,\r\n          widths: { md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          label: \"Внутренний межвед\",\r\n          name: \"isInternal\",\r\n          type: \"checkbox\",\r\n          hidden: true\r\n        },\r\n        {\r\n          label: \"XML файл описания запроса\",\r\n          name: \"xmlIn\",\r\n          type: \"file\",\r\n          doBeforeSetFieldValue: value =>\r\n            axios.post(\"/api/file/save\", value, {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }),\r\n          widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          label: \"XML файл описания ответа\",\r\n          name: \"xmlOut\",\r\n          type: \"file\",\r\n          doBeforeSetFieldValue: value =>\r\n            axios.post(\"/api/file/save\", value, {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }),\r\n          widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          label: \"Наличие ЭП-СП\",\r\n          name: \"needEs\",\r\n          type: \"checkbox\"\r\n        },\r\n        {\r\n          label: \"Заблокирован\",\r\n          name: \"isBlock\",\r\n          type: \"checkbox\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    direction: Yup.object()\r\n      .nullable()\r\n      .required(),\r\n    isInternal: Yup.bool(),\r\n    version: Yup.string().when(\"isInternal\", {\r\n      is: true,\r\n      then: Yup.string(),\r\n      otherwise: Yup.string().required()\r\n    }),\r\n    mainCode: Yup.string().required(),\r\n    mvType: Yup.object().when(\"isInternal\", {\r\n      is: true,\r\n      then: Yup.object().nullable(),\r\n      otherwise: Yup.object()\r\n        .nullable()\r\n        .required()\r\n    }),\r\n    provider: Yup.object().when(\"isInternal\", {\r\n      is: true,\r\n      then: Yup.object().nullable(),\r\n      otherwise: Yup.object()\r\n        .nullable()\r\n        .required()\r\n    })\r\n  })\r\n};\r\n\r\nconst forms = {\r\n  create: computePropsForFormikMUI({\r\n    formObj: {\r\n      ...baseForm,\r\n      url: \"/api/mv/structureMv\",\r\n      blocks: [\r\n        {\r\n          blockTitle: \"Основная информация\",\r\n          fields: [\r\n            {\r\n              label: \"Наименование\",\r\n              name: \"label\",\r\n              type: \"text\",\r\n              additionalProps: {\r\n                multiline: true,\r\n                fullWidth: true,\r\n                rowsMax: 6\r\n              }\r\n            },\r\n            {\r\n              label: \"Описание\",\r\n              name: \"description\",\r\n              type: \"text\",\r\n              additionalProps: {\r\n                multiline: true,\r\n                fullWidth: true,\r\n                rowsMax: 6\r\n              },\r\n              widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n            },\r\n            {\r\n              label: \"Поставщик вида сведений(Участник)\",\r\n              name: \"member\",\r\n              type: \"select\",\r\n              dictUrl: \"/api/structureMember/search/present\",\r\n              rebuildReceivedOptions: data => {\r\n                const extractedData = extractPayloadFromBaseSpringDateRestStructure(\r\n                  data\r\n                );\r\n                return Array.isArray(extractedData)\r\n                  ? extractedData.map(({ uniqueId, fullName }) => ({\r\n                      label: fullName,\r\n                      value: uniqueId\r\n                    }))\r\n                  : [];\r\n              },\r\n              rebuildReceivedValue: data => ({\r\n                label: data.fullName,\r\n                value: data.uniqueId\r\n              }),\r\n              widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n            },\r\n            {\r\n              label: \"Пространство имен\",\r\n              name: \"mainCode\",\r\n              type: \"text\",\r\n              uniqueCheck: {\r\n                url: \"/api/mvObject/search/existsByMainCode\",\r\n                constructParams: (v, value) => ({\r\n                  mainCode: value\r\n                })\r\n              },\r\n              widths: { xs: 8, sm: 8, md: 8, lg: 8, xl: 8 }\r\n            },\r\n            {\r\n              label: \"Заблокирован\",\r\n              name: \"isBlock\",\r\n              type: \"checkbox\"\r\n            },\r\n            {\r\n              label: \"XML файл описания запроса\",\r\n              name: \"xmlIn\",\r\n              type: \"file\",\r\n              doBeforeSetFieldValue: value =>\r\n                axios.post(\"/api/file/save\", value, {\r\n                  \"Content-Type\": \"multipart/form-data\"\r\n                }),\r\n              widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n            },\r\n            {\r\n              label: \"XML файл описания ответа\",\r\n              name: \"xmlOut\",\r\n              type: \"file\",\r\n              doBeforeSetFieldValue: value =>\r\n                axios.post(\"/api/file/save\", value, {\r\n                  \"Content-Type\": \"multipart/form-data\"\r\n                }),\r\n              widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      validationSchema: Yup.object({\r\n        label: Yup.string().required(),\r\n        mainCode: Yup.string().required(),\r\n        member: Yup.object()\r\n          .nullable()\r\n          .required(),\r\n        xmlIn: Yup.object()\r\n          .nullable()\r\n          .required(),\r\n        xmlOut: Yup.object()\r\n          .nullable()\r\n          .required()\r\n      })\r\n    },\r\n    mode: \"create\"\r\n  }),\r\n  view: computePropsForFormikMUI({ formObj: baseForm, mode: \"view\" }),\r\n  edit: computePropsForFormikMUI({\r\n    formObj: {\r\n      ...baseForm,\r\n      url: \"/api/mvObject\",\r\n      method: \"patch\",\r\n      primaryActionUrl: \"/api/mv/structureMv\"\r\n    },\r\n    mode: \"edit\"\r\n  })\r\n};\r\n\r\nexport default forms;\r\n","import { OpenInNew } from \"@material-ui/icons\";\r\nimport forms from \"./form\";\r\nimport { baseDictResponseRefactor } from \"../../../index\";\r\nimport { extractPayloadFromBaseSpringDateRestStructure } from \"../../../../utils/commonFormFunctions\";\r\n\r\nconst mvExchange = {\r\n  navigationLabel: \"Виды сведений\",\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administration_mv_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\"]\r\n    },\r\n    { functionName: \"member_mv_view\", allowedActions: [\"view\"] },\r\n    {\r\n      functionName: \"member_mv_modifier\",\r\n      allowedActions: [\"view\"]\r\n    }\r\n  ],\r\n  url: \"/api/journalMvObjects\",\r\n  icon: OpenInNew,\r\n  filtersPanel: {\r\n    filters: [\r\n      {\r\n        label: \"Наименование вида сведений\",\r\n        name: \"name\",\r\n        type: \"text\"\r\n      },\r\n      /* {\r\n        label: \"Функция\",\r\n        name: \"isFunction\",\r\n        type: \"text\"\r\n      }, */\r\n      {\r\n        label: \"Пространство имён\",\r\n        name: \"mainCode\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Поставщик сведений\",\r\n        name: \"providerId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/mvProvider/search/present\",\r\n        rebuildReceivedOptions: data =>\r\n          baseDictResponseRefactor(data).map(({ label, uniqueId }) => ({\r\n            label,\r\n            value: uniqueId\r\n          }))\r\n      },\r\n      {\r\n        label: \"Участник\",\r\n        name: \"memberId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/structureMember/search/present\",\r\n        rebuildReceivedOptions: data => {\r\n          const extractedData = extractPayloadFromBaseSpringDateRestStructure(\r\n            data\r\n          );\r\n          return Array.isArray(extractedData)\r\n            ? extractedData.map(({ uniqueId, fullName }) => ({\r\n                label: fullName,\r\n                value: uniqueId\r\n              }))\r\n            : [];\r\n        }\r\n      },\r\n      {\r\n        label: \"Направление\",\r\n        name: \"directionId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/mvDirection/search/present\",\r\n        rebuildReceivedOptions: data =>\r\n          baseDictResponseRefactor(data).map(({ label, uniqueId }) => ({\r\n            label,\r\n            value: uniqueId\r\n          }))\r\n      }\r\n    ]\r\n  },\r\n  tableHeader: [\r\n    {\r\n      label: \"Наименование вида сведений\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"name\"\r\n    },\r\n    /* {\r\n      label: \"Функция\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"isFunction\"\r\n    }, */\r\n    {\r\n      label: \"Пространство имён\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"mainCode\"\r\n    },\r\n    {\r\n      label: \"Поставщик сведений\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"provider\"\r\n    },\r\n    {\r\n      label: \"Участник\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"member\"\r\n    },\r\n    {\r\n      label: \"Направление\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"direction\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\nexport default mvExchange;\r\n","import React from \"react\";\r\nimport Yup from \"../../../yup\";\r\nimport { computePropsForFormikMUI } from \"../../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport {\r\n  extractPayloadFromBaseSpringDateRestStructure,\r\n  findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks\r\n} from \"../../../../utils/commonFormFunctions\";\r\nimport { constructRequest } from \"../../../../actions\";\r\nimport { PrimaryButton } from \"../../../../components/modalWrapper/buttons\";\r\nimport CompletePromiseThenRenderComponent, {\r\n  defaultPreloader\r\n} from \"../../../../components/completePromiseThenRenderComponent\";\r\nimport { defaultErrorHandler } from \"../../../../utils/defaultErrorHandler\";\r\nimport { baseDictResponseRefactor, dispatchPopHeadModal } from \"../../../index\";\r\nimport { FormikMUI } from \"../../../../components/formikMUi/formikNewRealisation\";\r\n\r\nconst confObj = {\r\n  fields: [\r\n    {\r\n      name: \"nsiSlaves\",\r\n      label: \"nsiSlaves\",\r\n      type: \"fieldArray\",\r\n      fields: [\r\n        {\r\n          name: \"uniqueId\",\r\n          label: \"Идентификатор\",\r\n          type: \"text\",\r\n          hidden: true\r\n        },\r\n        {\r\n          name: \"label\",\r\n          label: \"Наименование атрибута\",\r\n          type: \"text\",\r\n          uniqueCheck: {\r\n            url: \"/api/nsiSlave/search/existByNsiMasterAndLabel\",\r\n            constructParams: ({ nsiMasterId }, value) => ({\r\n              value,\r\n              nsiMasterId\r\n            })\r\n          }\r\n        },\r\n        {\r\n          name: \"value\",\r\n          label: \"Код атрибута\",\r\n          type: \"text\",\r\n          uniqueCheck: {\r\n            url: \"/api/nsiSlave/search/existByNsiMasterAndValue\",\r\n            constructParams: ({ nsiMasterId }, value) => ({\r\n              nsiMasterId,\r\n              value\r\n            })\r\n          }\r\n        },\r\n        {\r\n          name: \"isDeleted\",\r\n          label: \"isDeleted\",\r\n          type: \"checkbox\",\r\n          hidden: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      name: \"nsiMasterId\",\r\n      label: \"nsiMasterId\",\r\n      type: \"text\",\r\n      hidden: true\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    nsiSlaves: Yup.array()\r\n      .of(\r\n        Yup.object({\r\n          value: Yup.string().when(\"isDeleted\", {\r\n            is: true,\r\n            then: Yup.string(),\r\n            otherwise: Yup.string().required()\r\n          }),\r\n          label: Yup.string().when(\"isDeleted\", {\r\n            is: true,\r\n            then: Yup.string(),\r\n            otherwise: Yup.string().required()\r\n          }),\r\n          isDeleted: Yup.bool(),\r\n          uniqueId: Yup.string()\r\n        })\r\n      )\r\n      .min(1)\r\n  })\r\n};\r\n\r\nconst baseForm = {\r\n  title: \"НСИ\",\r\n  titleItem: \"НСИ\",\r\n  url: \"/api/nsiMaster\",\r\n  projection: \"formNsiMaster\",\r\n  method: \"post\",\r\n  headerText: \"label\",\r\n  doBeforeSend: {\r\n    select: ({ value }) => value\r\n  },\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          name: \"uniqueId\",\r\n          label: \"uniqueId\",\r\n          type: \"text\",\r\n          hidden: true\r\n        },\r\n        {\r\n          name: \"label\",\r\n          label: \"Наименование\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          name: \"name\",\r\n          label: \"Мнемоника\",\r\n          type: \"text\",\r\n          uniqueCheck: {\r\n            url: \"/api/nsiMaster/search/existsByName\",\r\n            constructParams: (v, value) => ({\r\n              name: value\r\n            })\r\n          },\r\n          widths: { xs: 4, sm: 4, md: 4, lg: 4, xl: 4 }\r\n        },\r\n        {\r\n          name: \"description\",\r\n          label: \"Описание\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          label: \"Участник\",\r\n          name: \"member\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/structureMember/search/present\",\r\n          rebuildReceivedOptions: data => {\r\n            const extractedData = extractPayloadFromBaseSpringDateRestStructure(\r\n              data\r\n            );\r\n            return Array.isArray(extractedData)\r\n              ? extractedData.map(({ uniqueId, fullName }) => ({\r\n                  label: fullName,\r\n                  value: uniqueId\r\n                }))\r\n              : [];\r\n          },\r\n          rebuildReceivedValue: data => ({\r\n            label: data.fullName,\r\n            value: data.uniqueId\r\n          }),\r\n          widths: { md: 12, lg: 12, xl: 12 }\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    name: Yup.string().required(),\r\n    label: Yup.string().required()\r\n  }),\r\n  additionalTabs: [\r\n    {\r\n      tabTitle: \"Справочные значения\",\r\n      tabContent: {\r\n        Component: ({\r\n          modal: {\r\n            item: { uniqueId }\r\n          },\r\n          modal,\r\n          ...rest\r\n        }) => (\r\n          <CompletePromiseThenRenderComponent\r\n            config={[\r\n              {\r\n                urlToDownload: `/api/nsiSlave/search/presentByNsiMaster?nsiMasterId=${uniqueId}`,\r\n                whereToStore: \"rawInitialValues\",\r\n                postLoadDoSomethingThenPassResultAsProp: {\r\n                  func: data => ({\r\n                    nsiSlaves: baseDictResponseRefactor(data),\r\n                    nsiMasterId: uniqueId\r\n                  }),\r\n                  passResultAs: \"initialValues\"\r\n                }\r\n              },\r\n              ...findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks(\r\n                confObj\r\n              )\r\n            ]}\r\n            PreloaderComponent={defaultPreloader}\r\n            Component={FormikMUI}\r\n            errorHandler={defaultErrorHandler}\r\n            {...rest}\r\n          />\r\n        ),\r\n        passProps: {\r\n          formObj: confObj,\r\n          variant: \"table\"\r\n        },\r\n        functionToExecuteThenPassResultAsProps: ({\r\n          modal: {\r\n            item: { uniqueId },\r\n            mode\r\n          }\r\n        }) => ({\r\n          onSubmit: ({ nsiSlaves }, { setSubmitting }) => {\r\n            constructRequest(\r\n              {\r\n                method: \"post\",\r\n                url: \"/api/nsi/nsiSlaves\",\r\n                data: nsiSlaves.map(item => ({\r\n                  ...item,\r\n                  nsiMaster: uniqueId\r\n                }))\r\n              },\r\n              () => {\r\n                dispatchPopHeadModal();\r\n                setSubmitting(false);\r\n              },\r\n              () => setSubmitting(false)\r\n            );\r\n          },\r\n          readOnly: mode !== \"edit\"\r\n        })\r\n      },\r\n      tabButtons: [\r\n        {\r\n          Btn: PrimaryButton,\r\n          requiresFormSubmitRef: true,\r\n          conditionallyRender: ({ modal: { mode } }) => mode === \"edit\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n\r\nconst forms = {\r\n  create: computePropsForFormikMUI({\r\n    formObj: {\r\n      ...baseForm,\r\n      method: \"post\",\r\n      url: \"/api/nsiMaster\",\r\n      primaryActionUrl: \"/api/nsi/nsiMaster\"\r\n    },\r\n    mode: \"create\"\r\n  }),\r\n  view: computePropsForFormikMUI({ formObj: baseForm, mode: \"view\" }),\r\n  edit: computePropsForFormikMUI({\r\n    formObj: {\r\n      ...baseForm,\r\n      method: \"patch\",\r\n      url: \"/api/nsiMaster\",\r\n      primaryActionUrl: \"/api/nsi/nsiMaster\"\r\n    },\r\n    mode: \"edit\"\r\n  })\r\n};\r\n\r\nexport default forms;\r\n","import { LibraryBooks } from \"@material-ui/icons\";\r\nimport forms from \"./form\";\r\nimport { baseDictResponseRefactor } from \"../../../index\";\r\n\r\nconst nsi = {\r\n  navigationLabel: \"НСИ\",\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administration_nsi_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\"]\r\n    },\r\n    {\r\n      functionName: \"member_nsi_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\"]\r\n    }\r\n  ],\r\n  title: \"Журнал НСИ\",\r\n  url: \"/api/journalNsiMasters\",\r\n  icon: LibraryBooks,\r\n  filtersPanel: {\r\n    filters: [\r\n      { label: \"Наименование справочника\", name: \"label\", type: \"text\" },\r\n      { label: \"Мнемоника справочника\", name: \"name\", type: \"text\" },\r\n      {\r\n        label: \"Участник\",\r\n        name: \"memberId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/structureMember/search/present\",\r\n        rebuildReceivedOptions: data =>\r\n          baseDictResponseRefactor(data).map(({ uniqueId, fullName }) => ({\r\n            label: fullName,\r\n            value: uniqueId\r\n          }))\r\n      }\r\n    ]\r\n  },\r\n  tableHeader: [\r\n    {\r\n      label: \"Наименование справочника\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"label\",\r\n      width: \"30%\"\r\n    },\r\n    {\r\n      label: \"Мнемоника справочника\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"name\",\r\n      width: \"20%\"\r\n    },\r\n    {\r\n      label: \"Участник\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"member\",\r\n      width: \"30%\"\r\n    },\r\n    {\r\n      label: \"Дата создания\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"createdTimestamp\",\r\n      width: \"20%\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\n\r\nexport default nsi;\r\n","export const initialState = {\r\n  activeStep: 0,\r\n  stepsPassProps: [],\r\n  isLoading: true\r\n};\r\n\r\nexport const init = stepsConfig => {\r\n  return {\r\n    ...initialState,\r\n    stepsPassProps: stepsConfig.map(() => ({}))\r\n  };\r\n};\r\n\r\nexport const setIsLoading = () => ({ type: \"setIsLoading\" });\r\nexport const decreaseActiveStep = dispatch => dispatch({ type: \"decrement\" });\r\n\r\nexport const setStepPassProps = (index, value) => ({\r\n  type: \"setStepPassProps\",\r\n  payload: { index, value: { ...value } }\r\n});\r\n\r\nexport const increaseActiveStep = passPropsToNextStep => ({\r\n  type: \"increment\",\r\n  payload: passPropsToNextStep\r\n});\r\n\r\nexport function reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"increment\": {\r\n      const copy = state.stepsPassProps.slice();\r\n      const nextActiveStepIndex = state.activeStep + 1;\r\n      copy[state.activeStep] = {\r\n        ...state.stepsPassProps[state.activeStep]\r\n      };\r\n      copy[nextActiveStepIndex] = {\r\n        ...state.stepsPassProps[nextActiveStepIndex],\r\n        ...action.payload\r\n      };\r\n      return {\r\n        ...state,\r\n        activeStep: nextActiveStepIndex,\r\n        stepsPassProps: copy\r\n      };\r\n    }\r\n    case \"decrement\": {\r\n      const copy = state.stepsPassProps.slice();\r\n      const prevActiveStep = state.activeStep - 1;\r\n      copy[prevActiveStep] = {\r\n        ...state.stepsPassProps[prevActiveStep]\r\n      };\r\n      copy[state.activeStep] = {};\r\n      return {\r\n        ...state,\r\n        activeStep: prevActiveStep,\r\n        setStepPassProps: copy\r\n      };\r\n    }\r\n    case \"setStepPassProps\": {\r\n      const { index, value } = action.payload;\r\n      const copy = state.stepsPassProps.slice();\r\n      copy[index] = { ...state.stepsPassProps[index], ...value };\r\n      return {\r\n        ...state,\r\n        stepsPassProps: copy,\r\n        isLoading: false\r\n      };\r\n    }\r\n    case \"setIsLoading\": {\r\n      return {\r\n        ...state,\r\n        isLoading: action.payload\r\n      };\r\n    }\r\n    default:\r\n      throw new Error(`Не найдено такого обработчика: ${action.type}`);\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport { set } from \"lodash\";\r\nimport { defaultErrorHandler } from \"../../utils/defaultErrorHandler\";\r\n\r\nexport const createAxiosCancelToken = () => {\r\n  return axios.CancelToken.source();\r\n};\r\n\r\nexport const downLoadStuff = (config, source) =>\r\n  axios\r\n    .all(\r\n      config.map(item =>\r\n        axios.get(item.urlToDownload, { cancelToken: source.token })\r\n      )\r\n    )\r\n    .then(response => {\r\n      const downloaded = {};\r\n      config.forEach(\r\n        (\r\n          {\r\n            whereToStore,\r\n            rebuildReceivedValue,\r\n            postLoadDoSomethingThenPassResultAsProp\r\n          },\r\n          index\r\n        ) => {\r\n          const { data } = response[index];\r\n\r\n          set(\r\n            downloaded,\r\n            whereToStore,\r\n            rebuildReceivedValue ? rebuildReceivedValue(data) : data\r\n          );\r\n\r\n          if (postLoadDoSomethingThenPassResultAsProp) {\r\n            const {\r\n              func,\r\n              passResultAs\r\n            } = postLoadDoSomethingThenPassResultAsProp;\r\n            set(downloaded, passResultAs, func(data));\r\n          }\r\n        }\r\n      );\r\n      return downloaded;\r\n    })\r\n    .catch(error => {\r\n      if (axios.isCancel(error)) {\r\n        return;\r\n      }\r\n      defaultErrorHandler(error);\r\n    });\r\n","import { FormikActions, FormikValues } from \"formik\";\r\nimport { DispatchType } from \"./ScheduleTable\";\r\n\r\nexport interface IOption {\r\n  label: string;\r\n  value: any;\r\n  [any: string]: any;\r\n}\r\n\r\nexport enum TypeEnum {\r\n  ministration = \"ministration\",\r\n  slot = \"slot\",\r\n  workItem = \"workItem\"\r\n}\r\n\r\nexport interface EventType {\r\n  // может быть uuid v4 поэтому тут используется union\r\n  uniqueId: number | string;\r\n  from: string;\r\n  to: string;\r\n  type: IOption;\r\n  performers: Array<IOption>;\r\n  canEdit: boolean;\r\n  typeEnum?: TypeEnum;\r\n  isFree?: boolean;\r\n}\r\n\r\nexport type dutiesType = Array<IOption>;\r\n\r\nexport type RowType = {\r\n  day: string;\r\n  mothWord: IOption;\r\n  duties: IOption | null;\r\n  events: Array<EventType>;\r\n  canEdit?: boolean;\r\n};\r\n\r\nexport type collectionType = Array<RowType>;\r\n\r\nexport type OtionsMapT = {\r\n  [fieldName: string]: {\r\n    loaded: boolean;\r\n    options: Array<IOption>;\r\n  };\r\n};\r\n\r\nexport interface ScheduleTableProps {\r\n  collection: collectionType;\r\n  dispatch: DispatchType;\r\n  omitDutiesColumn?: boolean;\r\n  optionsMap: OtionsMapT;\r\n}\r\n\r\nexport type FormikOnSubmit = (\r\n  values: FormikValues,\r\n  formikActions: FormikActions<FormikValues>\r\n) => void;\r\n","import React, { useEffect, useReducer, useState } from \"react\";\r\nimport {\r\n  Paper,\r\n  Stepper,\r\n  Button,\r\n  StepContent,\r\n  StepLabel,\r\n  Step,\r\n  LinearProgress\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { defaultPreloader } from \"../completePromiseThenRenderComponent\";\r\nimport {\r\n  decreaseActiveStep,\r\n  increaseActiveStep,\r\n  init,\r\n  reducer,\r\n  setIsLoading,\r\n  setStepPassProps\r\n} from \"./reducer\";\r\nimport { createAxiosCancelToken, downLoadStuff } from \"./until\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  button: {\r\n    marginTop: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit\r\n  },\r\n  actionsContainer: {\r\n    marginLeft: theme.spacing.unit * 2\r\n  },\r\n  resetContainer: {\r\n    padding: theme.spacing.unit * 3\r\n  }\r\n}));\r\n\r\nexport const StepperMUI = ({ stepsConfig }) => {\r\n  const [state, dispatch] = useReducer(reducer, init(stepsConfig));\r\n\r\n  const { activeStep, stepsPassProps, isLoading } = state;\r\n\r\n  useEffect(() => {\r\n    const source = createAxiosCancelToken();\r\n    if (\r\n      (stepsConfig[activeStep] && stepsConfig[activeStep].config) ||\r\n      (stepsPassProps[activeStep] && stepsPassProps[activeStep].config)\r\n    ) {\r\n      if (!isLoading) {\r\n        dispatch(setIsLoading());\r\n      }\r\n      downLoadStuff(\r\n        stepsConfig[activeStep].config || stepsPassProps[activeStep].config,\r\n        source\r\n      ).then(downLoaded => {\r\n        dispatch(setStepPassProps(activeStep, { ...downLoaded }));\r\n      });\r\n    }\r\n    return () => {\r\n      source.cancel(\"Cancelling in cleanup\");\r\n    };\r\n  }, [activeStep, isLoading, stepsConfig, stepsPassProps]);\r\n\r\n  const classes = getStyles();\r\n\r\n  // Ссылка на на рефернс формика текущего шага\r\n  let submitRef = null;\r\n  const [isDisabled, setIsDisabled] = useState(false);\r\n  return (\r\n    <Paper>\r\n      <Stepper activeStep={activeStep} orientation=\"vertical\">\r\n        {stepsConfig.map(\r\n          (\r\n            {\r\n              label,\r\n              Component,\r\n              additionalProps,\r\n              requiresFormSubmitRef,\r\n              stepButtons: StepButtons\r\n            },\r\n            index\r\n          ) => {\r\n            const { onSubmit, ...restAdditionalProps } = additionalProps || {};\r\n            const currentStepPassProps = stepsPassProps[index];\r\n            const wrappedSubmit = onSubmit\r\n              ? onSubmit({\r\n                  passProps: currentStepPassProps,\r\n                  dispatch\r\n                })\r\n              : () => {};\r\n            return (\r\n              <Step active={activeStep >= index} key={label}>\r\n                <StepLabel>{label}</StepLabel>\r\n                <StepContent active={activeStep >= index}>\r\n                  {isLoading ? (\r\n                    defaultPreloader({})\r\n                  ) : (\r\n                    <>\r\n                      <Component\r\n                        onSubmit={wrappedSubmit}\r\n                        {...restAdditionalProps}\r\n                        bindFormSubmit={ref => {\r\n                          submitRef = ref;\r\n                        }}\r\n                        enableReinitialize\r\n                        {...currentStepPassProps}\r\n                        readOnly={activeStep !== index}\r\n                      />\r\n                      {isDisabled && activeStep === index && <LinearProgress />}\r\n                      {activeStep === index && (\r\n                        <div className={classes.actionsContainer}>\r\n                          <Button\r\n                            disabled={activeStep === 0}\r\n                            onClick={() => decreaseActiveStep(dispatch)}\r\n                            className={classes.button}\r\n                            variant=\"contained\"\r\n                          >\r\n                            Назад\r\n                          </Button>\r\n                          {activeStep !== stepsConfig.length - 1 && (\r\n                            <Button\r\n                              variant=\"contained\"\r\n                              color=\"primary\"\r\n                              onClick={() => {\r\n                                if (requiresFormSubmitRef === true) {\r\n                                  // Удаленный вызов отправки в форме\r\n                                  if (typeof submitRef === \"function\") {\r\n                                    submitRef();\r\n                                  }\r\n                                } else {\r\n                                  dispatch(increaseActiveStep());\r\n                                }\r\n                              }}\r\n                              className={classes.button}\r\n                            >\r\n                              Далее\r\n                            </Button>\r\n                          )}\r\n                          {StepButtons && (\r\n                            <StepButtons\r\n                              {...currentStepPassProps}\r\n                              isDisabled={isDisabled}\r\n                              setIsDisabled={setIsDisabled}\r\n                            />\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </StepContent>\r\n              </Step>\r\n            );\r\n          }\r\n        )}\r\n      </Stepper>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nStepperMUI.propTypes = {\r\n  stepsConfig: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      Component: PropTypes.func.isRequired,\r\n      label: PropTypes.string\r\n    })\r\n  ).isRequired\r\n};\r\n","import React from \"react\";\r\nimport { Button, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport classNames from \"classnames\";\r\nimport { addFiltersToUrl } from \"../../actions\";\r\nimport { baseUrlsToDownLoadReport } from \"../../constants/pages/statistics/reports/journal\";\r\nimport { downloadFile } from \"../formikMUi/utils/downLoad\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  xlsBtn: {\r\n    color: theme.palette.getContrastText(\"#2c5d2d\"),\r\n    backgroundColor: \"#2c5d2d\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#204020\"\r\n    }\r\n  },\r\n  pdfBtn: {\r\n    color: theme.palette.getContrastText(\"#820b09\"),\r\n    backgroundColor: \"#820b09\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#500b09\"\r\n    }\r\n  },\r\n  btn: {\r\n    marginTop: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit\r\n  },\r\n  textCont: {\r\n    marginLeft: theme.spacing.unit * 2\r\n  }\r\n}));\r\n\r\nexport const DownloadReportButtons = ({ reportName, filters, ...rest }) => {\r\n  const classes = getStyles();\r\n  const url = baseUrlsToDownLoadReport[reportName];\r\n  if (typeof url === \"undefined\") {\r\n    throw new Error(`Не найдено Url для отчёта с таким именем: ${reportName}`);\r\n  }\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classNames(classes.xlsBtn, classes.btn)}\r\n        variant=\"contained\"\r\n        onClick={() => {\r\n          if (typeof url === \"function\") {\r\n            if (filters) {\r\n              downloadFile(\r\n                addFiltersToUrl(filters, url(\"xlsx\")),\r\n                `${reportName}.xlsx`\r\n              );\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        Скачать в Xls\r\n      </Button>\r\n      <Button\r\n        className={classNames(classes.pdfBtn, classes.btn)}\r\n        variant=\"contained\"\r\n        onClick={() => {\r\n          if (typeof url === \"function\") {\r\n            if (filters) {\r\n              downloadFile(\r\n                addFiltersToUrl(filters, url(\"pdf\")),\r\n                `${reportName}.pdf`\r\n              );\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        Скачать в Pdf\r\n      </Button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const DownLoadReportStep = () => {\r\n  const classes = getStyles();\r\n  return (\r\n    <Typography variant=\"body1\" className={classes.textCont}>\r\n      Для формирования отчёта нажмите на соответствующую кнопку\r\n    </Typography>\r\n  );\r\n};\r\n","import { constructRebuildReceivedOptionsLabelFullNameValueUniqueId } from \"../../../rebuildRecieved\";\r\nimport { getAuth } from \"../../../index\";\r\nimport { extractPayloadFromBaseSpringDateRestStructure } from \"../../../../utils/commonFormFunctions\";\r\n\r\nexport const report_1 = {\r\n  blocks: [\r\n    {\r\n      fields: [\r\n        {\r\n          name: \"dateRecording\",\r\n          label: \"Дата создания заявления\",\r\n          type: \"date-range\"\r\n        },\r\n        {\r\n          name: \"memberId\",\r\n          label: \"Участник\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/structureMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n          readOnly: userFunctions =>\r\n            !userFunctions.some(x => x === \"administration_statistics\"),\r\n          defaultValue: userFunctions => {\r\n            if (!userFunctions.some(x => x === \"administration_statistics\")) {\r\n              const { memberFullName, memberId } = getAuth();\r\n              return { label: memberFullName, value: memberId };\r\n            }\r\n            return null;\r\n          },\r\n          widths: { md: 8, lg: 8, xl: 8 }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\nexport const report_2 = {\r\n  blocks: [\r\n    {\r\n      fields: [\r\n        {\r\n          name: \"period\",\r\n          label: \"Дата создания заявления\",\r\n          type: \"date-range\"\r\n        },\r\n        {\r\n          name: \"memberId\",\r\n          label: \"Участник\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/structureMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelFullNameValueUniqueId,\r\n          widths: { md: 8, lg: 8, xl: 8 },\r\n          readOnly: userFunctions =>\r\n            !userFunctions.some(x => x === \"administration_statistics\"),\r\n          defaultValue: userFunctions => {\r\n            if (!userFunctions.some(x => x === \"administration_statistics\")) {\r\n              const { memberFullName, memberId } = getAuth();\r\n              return { label: memberFullName, value: memberId };\r\n            }\r\n            return null;\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\nexport const report_3 = {\r\n  blocks: [\r\n    {\r\n      fields: [\r\n        {\r\n          name: \"requestTime\",\r\n          label: \"Дата формирования запроса\",\r\n          type: \"date-range\"\r\n        },\r\n        {\r\n          name: \"consumerId\",\r\n          label: \"Потребитель\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mvActionLogs/getConsumerList\",\r\n          rebuildReceivedOptions: data => data,\r\n          widths: { md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          name: \"wrappedProvider\",\r\n          label: \"Поставщик\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mvActionLogs/getProviderList\",\r\n          rebuildReceivedOptions: data => data,\r\n          widths: { md: 12, lg: 12, xl: 12 }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\nexport const report_4 = {\r\n  blocks: [\r\n    {\r\n      fields: [\r\n        {\r\n          name: \"memberId\",\r\n          label: \"Участник\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/structureMember/search/present\",\r\n          rebuildReceivedOptions: data =>\r\n            extractPayloadFromBaseSpringDateRestStructure(data).map(\r\n              ({ fullName }) => ({ label: fullName, value: fullName })\r\n            ),\r\n          widths: { md: 12, lg: 12, xl: 12 }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\nexport const report_5 = {\r\n  blocks: [\r\n    {\r\n      fields: [\r\n        {\r\n          name: \"dateRequest\",\r\n          label: \"Дата формирования запроса\",\r\n          type: \"date-range\"\r\n        },\r\n        {\r\n          name: \"wrappedProvider\",\r\n          label: \"Поставщик\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mvActionLogs/getProviderList\",\r\n          rebuildReceivedOptions: data => data,\r\n          widths: { md: 8, lg: 8, xl: 8 }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n\r\nexport const report_6 = {\r\n  blocks: [\r\n    {\r\n      fields: [\r\n        {\r\n          name: \"period\",\r\n          label: \"Период\",\r\n          type: \"date-range\"\r\n        },\r\n        {\r\n          name: \"wrappedProvider\",\r\n          label: \"Поставщик\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/mvActionLogs/getProviderList\",\r\n          rebuildReceivedOptions: data => data,\r\n          widths: { md: 8, lg: 8, xl: 8 }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n\r\nexport const filters = {\r\n  report_1,\r\n  report_2,\r\n  report_3,\r\n  report_4,\r\n  report_5,\r\n  report_6\r\n};\r\n","import { SwapVert } from \"@material-ui/icons\";\r\nimport { format } from \"date-fns\";\r\nimport { FormikMUI } from \"../../../../components/formikMUi/formikNewRealisation\";\r\nimport { findFieldsWithDictThenConstructArrayToDownload } from \"../../../../utils/commonFormFunctions\";\r\nimport { constructInitialValuesForEmptyForm } from \"../../../../components/formikMUi/utils/initialValuesUtils\";\r\nimport Yup from \"../../../yup\";\r\nimport { StepperMUI } from \"../../../../components/stepperMUI\";\r\nimport {\r\n  DownloadReportButtons,\r\n  DownLoadReportStep\r\n} from \"../../../../components/reports/DownloadReportButtons\";\r\nimport { filters } from \"./filters\";\r\nimport { increaseActiveStep } from \"../../../../components/stepperMUI/reducer\";\r\n\r\nconst firstStep = {\r\n  blocks: [\r\n    {\r\n      fields: [\r\n        {\r\n          name: \"report\",\r\n          label: \"Отчет\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/reports/allowedReports\",\r\n          rebuildReceivedOptions: data =>\r\n            data.map(({ label, name }) => ({ label, value: name })),\r\n          widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    report: Yup.object()\r\n      .nullable()\r\n      .required()\r\n  })\r\n};\r\n\r\nconst stepsConfig = [\r\n  {\r\n    label: \"Выбор отчёта\",\r\n    Component: FormikMUI,\r\n    config: findFieldsWithDictThenConstructArrayToDownload(firstStep),\r\n    additionalProps: {\r\n      initialValues: constructInitialValuesForEmptyForm(firstStep),\r\n      formObj: firstStep,\r\n      onSubmit: ({ dispatch }) => (\r\n        { report: { value } },\r\n        { setSubmitting }\r\n      ) => {\r\n        setSubmitting(false);\r\n        const foundFiltersForReport = filters[value];\r\n        if (typeof foundFiltersForReport === \"undefined\") {\r\n          throw new Error(\r\n            `Не найдено фильтров для отчёта с таким именем: ${value}`\r\n          );\r\n        }\r\n        dispatch(\r\n          increaseActiveStep({\r\n            formObj: foundFiltersForReport,\r\n            initialValues: constructInitialValuesForEmptyForm(\r\n              foundFiltersForReport\r\n            ),\r\n            config: findFieldsWithDictThenConstructArrayToDownload(\r\n              foundFiltersForReport\r\n            ),\r\n            reportName: value\r\n          })\r\n        );\r\n      }\r\n    },\r\n    requiresFormSubmitRef: true\r\n  },\r\n  {\r\n    label: \"Выбор параметров фильтрации\",\r\n    Component: FormikMUI,\r\n    additionalProps: {\r\n      onSubmit: ({ dispatch, passProps: { reportName, formObj: localFO } }) => (\r\n        values,\r\n        { setSubmitting }\r\n      ) => {\r\n        const rebuildedFilters = { ...values };\r\n        localFO.blocks.forEach(({ fields }) =>\r\n          fields.forEach(({ name, type }) => {\r\n            if (type === \"date-range\") {\r\n              const value = values[name];\r\n              if (value && value[0] && value[1]) {\r\n                const rebuildDates = value.map(x =>\r\n                  format(x, \"DD.MM.YYYY HH:mm:ss\")\r\n                );\r\n                rebuildedFilters[name] = rebuildDates;\r\n                rebuildedFilters.startDate = rebuildDates[0];\r\n                rebuildedFilters.endDate = rebuildDates[1];\r\n              }\r\n            }\r\n            if (name === \"wrappedProvider\" && values[name]) {\r\n              const { uniqueId, type: providerType } = values[name].value;\r\n              rebuildedFilters[name] = undefined;\r\n              rebuildedFilters.providerId = uniqueId;\r\n              rebuildedFilters.providerType = providerType;\r\n            }\r\n            if (name === \"consumerId\" && values[name]) {\r\n              rebuildedFilters[name] = values[name].value;\r\n            }\r\n          })\r\n        );\r\n        setSubmitting(false);\r\n        dispatch(\r\n          // increaseActiveStep({ templateUrl: \"/api\" })\r\n          increaseActiveStep({ reportName, filters: { ...rebuildedFilters } })\r\n        );\r\n      }\r\n    },\r\n    requiresFormSubmitRef: true\r\n  },\r\n  {\r\n    label: \"Выбор формата отчета\",\r\n    Component: DownLoadReportStep,\r\n    stepButtons: DownloadReportButtons\r\n  }\r\n];\r\n\r\nexport const baseUrlsToDownLoadReport = {\r\n  report_1: type => `/api/reports/download/report1/${type}`,\r\n  report_2: type => `/api/reports/download/report2/${type}`,\r\n  report_3: type => `/api/reports/download/report3/${type}`,\r\n  report_4: type => `/api/reports/download/report4/${type}`,\r\n  report_5: type => `/api/reports/download/report5/${type}`,\r\n  report_6: type => `/api/reports/download/report6/${type}`\r\n};\r\n\r\nconst statMV = {\r\n  navigationLabel: \"Отчёты\",\r\n  icon: SwapVert,\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"member_administration_statistics\",\r\n      allowedActions: [\"view\"]\r\n    },\r\n    {\r\n      functionName: \"administration_statistics\",\r\n      allowedActions: [\"view\"]\r\n    }\r\n  ],\r\n  custom: true,\r\n  Component: StepperMUI,\r\n  passProps: {\r\n    stepsConfig\r\n  }\r\n};\r\nexport default statMV;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport CompletePromiseThenRenderComponent, {\r\n  defaultPreloader\r\n} from \"../../../../components/completePromiseThenRenderComponent\";\r\nimport { computePropsForFormikMUI } from \"../../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport { callDefaultErrorHandlerThenPopModal } from \"../../../index\";\r\nimport { FormikMUI } from \"../../../../components/formikMUi/formikNewRealisation\";\r\n\r\nconst baseForm = {\r\n  title: \"Объекта мониторинга\",\r\n  url: \"/api/mvLog\",\r\n  method: \"post\",\r\n  headerText: \"uuidReq\",\r\n  projection: \"formMvLog\",\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Идентификатор Запроса\",\r\n          name: \"uuidReq\",\r\n          type: \"text\",\r\n          widths: { xs: 6, sm: 6, md: 6, lg: 6, xl: 6 }\r\n        },\r\n        {\r\n          label: \"Идентификатор Ответа\",\r\n          name: \"uuidOut\",\r\n          type: \"text\",\r\n          widths: { xs: 6, sm: 6, md: 6, lg: 6, xl: 6 }\r\n        },\r\n        {\r\n          label: \"Идентификатор Заявления\",\r\n          name: \"serviceUuid\",\r\n          type: \"text\",\r\n          widths: { xs: 6, sm: 6, md: 6, lg: 6, xl: 6 }\r\n        },\r\n        {\r\n          type: \"spaceFiller\",\r\n          widths: { xs: 6, sm: 6, md: 6, lg: 6, xl: 6 }\r\n        },\r\n        {\r\n          label: \"Дата формирования Запроса\",\r\n          name: \"createdTimestamp\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          type: \"spaceFiller\",\r\n          widths: { xs: 4, sm: 4, md: 4, lg: 4, xl: 4 }\r\n        },\r\n        {\r\n          label: \"Дата формирования Ответа\",\r\n          name: \"outTimestamp\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Потребитель\",\r\n          name: \"consumer\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          label: \"Поставщик\",\r\n          name: \"provider\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          label: \"Вид сведения\",\r\n          name: \"mvObject\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          },\r\n          widths: { xs: 12, sm: 12, md: 12, lg: 12, xl: 12 }\r\n        },\r\n        {\r\n          label: \"Статус\",\r\n          name: \"status\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Код ошибки\",\r\n          name: \"errorCode\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Текст ошибки\",\r\n          name: \"errorText\",\r\n          type: \"text\",\r\n          additionalProps: {\r\n            multiline: true,\r\n            fullWidth: true,\r\n            rowsMax: 6\r\n          }\r\n        },\r\n        {\r\n          label: \"Файл межведомственного запроса\",\r\n          name: \"xmlIn\",\r\n          type: \"file\",\r\n          doBeforeSetFieldValue: value =>\r\n            axios.post(\"/api/file/save\", value, {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }),\r\n          widths: { xs: 6, sm: 6, md: 6, lg: 6, xl: 6 }\r\n        },\r\n        {\r\n          label: \"Файл межведомственного ответа\",\r\n          name: \"xmlOut\",\r\n          type: \"file\",\r\n          doBeforeSetFieldValue: value =>\r\n            axios.post(\"/api/file/save\", value, {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }),\r\n          widths: { xs: 6, sm: 6, md: 6, lg: 6, xl: 6 }\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  additionalTabs: [\r\n    {\r\n      tabTitle: \"Запрос\",\r\n      tabContent: {\r\n        Component: ({\r\n          modal: {\r\n            item: { uuid }\r\n          }\r\n        }) => (\r\n          <CompletePromiseThenRenderComponent\r\n            Component={FormikMUI}\r\n            readOnly\r\n            config={[\r\n              {\r\n                urlToDownload: `/api/claim/jsonMvClaimIn?uuid=${uuid}&mode=view`, // todo можно ли писать жестко view? тут всегдя только на просмотр\r\n                whereToStore: \"formObj\"\r\n              }\r\n            ]}\r\n            variant=\"xmlToForm\"\r\n            PreloaderComponent={defaultPreloader}\r\n            errorHandler={callDefaultErrorHandlerThenPopModal}\r\n          />\r\n        )\r\n      }\r\n    },\r\n    {\r\n      tabTitle: \"Ответ\",\r\n      tabContent: {\r\n        Component: ({\r\n          modal: {\r\n            item: { uuid }\r\n          }\r\n        }) => (\r\n          <CompletePromiseThenRenderComponent\r\n            Component={FormikMUI}\r\n            readOnly\r\n            config={[\r\n              {\r\n                urlToDownload: `/api/claim/jsonMvClaimOut?uuid=${uuid}`,\r\n                whereToStore: \"formObj\"\r\n              }\r\n            ]}\r\n            variant=\"xmlToForm\"\r\n            PreloaderComponent={defaultPreloader}\r\n            errorHandler={callDefaultErrorHandlerThenPopModal}\r\n          />\r\n        )\r\n      },\r\n      conditionallyDisable: ({ firstFormInitialValues: { uuidOut } }) =>\r\n        !uuidOut\r\n    }\r\n  ]\r\n};\r\n\r\nconst forms = {\r\n  view: computePropsForFormikMUI({ formObj: baseForm, mode: \"view\" })\r\n};\r\n\r\nexport default forms;\r\n","import { SwapVert } from \"@material-ui/icons\";\r\nimport { baseDictResponseRefactor } from \"../../../index\";\r\nimport forms from \"./forms\";\r\n\r\nconst logMv = {\r\n  navigationLabel: \"Журнал МВ\",\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administration_mv_log_view\",\r\n      allowedActions: [\"view\"]\r\n    },\r\n    { functionName: \"member_mv_log_view\", allowedActions: [\"view\"] }\r\n  ],\r\n  doBeforeSend: {\r\n    select: ({ value }) => value\r\n  },\r\n  url: \"/api/journalMvActionLogs\",\r\n  icon: SwapVert,\r\n  filtersPanel: {\r\n    filters: [\r\n      {\r\n        label: \"Наименование вида сведений\",\r\n        name: \"mvName\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Статус\",\r\n        name: \"status\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/mvActionStatuses/search/present\",\r\n        rebuildReceivedOptions: data =>\r\n          baseDictResponseRefactor(data).map(({ label }) => ({\r\n            label,\r\n            value: label\r\n          }))\r\n      },\r\n      {\r\n        label: \"Дата запроса\",\r\n        name: \"reqTimestamp\",\r\n        type: \"date-range\"\r\n      },\r\n      {\r\n        label: \"Дата ответа\",\r\n        name: \"outTimestamp\",\r\n        type: \"date-range\"\r\n      },\r\n      {\r\n        label: \"Поставщик\",\r\n        name: \"provider\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/mvActionLogs/getProviderList\",\r\n        rebuildReceivedOptions: data =>\r\n          data.map(({ label }) => ({ label, value: label }))\r\n      },\r\n      {\r\n        label: \"Потребитель\",\r\n        name: \"consumer\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/mvActionLogs/getConsumerList\",\r\n        rebuildReceivedOptions: data =>\r\n          data.map(({ label }) => ({ label, value: label }))\r\n      },\r\n      {\r\n        label: \"Идентификатор заявления\",\r\n        name: \"serviceUuid\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Идентификатор запроса\",\r\n        name: \"uuidIn\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Идентификатор ответа\",\r\n        name: \"uuidOut\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Код ошибки\",\r\n        name: \"errorCode\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Содержание ошибки\",\r\n        name: \"errorText\",\r\n        type: \"text\"\r\n      }\r\n    ]\r\n  },\r\n  tableHeader: [\r\n    {\r\n      label: \"Наименование вида сведений\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"mvName\",\r\n      width: \"30%\"\r\n    },\r\n    {\r\n      label: \"Дата запроса\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"reqTimestamp\",\r\n      width: \"15%\"\r\n    },\r\n    {\r\n      label: \"Дата ответа\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"outTimestamp\",\r\n      width: \"15%\"\r\n    },\r\n    {\r\n      label: \"Поставщик\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"provider\",\r\n      width: \"30%\"\r\n    },\r\n    {\r\n      label: \"Потребитель\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"consumer\",\r\n      width: \"30%\"\r\n    },\r\n    {\r\n      label: \"Идентификатор заявления\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"serviceUuid\"\r\n    },\r\n    {\r\n      label: \"Идентификатор запроса\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"uuidIn\"\r\n    },\r\n    {\r\n      label: \"Идентификатор ответа\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"uuidOut\"\r\n    },\r\n    {\r\n      label: \"Код ошибки\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"errorCode\",\r\n      width: \"15%\"\r\n    },\r\n    {\r\n      label: \"Содержание ошибки\",\r\n      sortable: true,\r\n      dynamicWidth: true,\r\n      path: \"errorText\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\n\r\nexport default logMv;\r\n","import React from \"react\";\r\nimport { Calendar } from \"react-date-range\";\r\nimport locale from \"date-fns/locale/ru\";\r\n\r\nexport const ReactDateRangeInline = ({ date, onChange, ...rest }) => {\r\n  return <Calendar onChange={onChange} date={date} locale={locale} {...rest} />;\r\n};\r\n","import React, { ReactElement } from \"react\";\r\nimport { IconButton, Typography, TableCell } from \"@material-ui/core\";\r\nimport { FileCopyOutlined } from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\n\r\ninterface DayCellProps {\r\n  text: string;\r\n  style?: any;\r\n}\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  tableCell: {\r\n    flex: 1,\r\n    flexDirection: \"column\"\r\n  },\r\n  TableCellRoot: {\r\n    borderBottom: \"none\"\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    boxSizing: \"border-box\"\r\n  }\r\n}));\r\n\r\nexport const DayCell = ({ text, style }: DayCellProps): ReactElement => {\r\n  const classes = getStyles();\r\n  return (\r\n    <TableCell\r\n      component=\"div\"\r\n      variant=\"body\"\r\n      classes={{ root: classes.TableCellRoot }}\r\n      className={classNames(classes.tableCell, classes.flexContainer)}\r\n      style={style}\r\n    >\r\n      <Typography>{text}</Typography>\r\n      <IconButton>\r\n        <FileCopyOutlined />\r\n      </IconButton>\r\n    </TableCell>\r\n  );\r\n};\r\n","import React, { ReactElement } from \"react\";\r\nimport { IconButton, Typography, TableCell } from \"@material-ui/core\";\r\nimport { InsertDriveFileOutlined } from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { IOption } from \"./types\";\r\n\r\ninterface MonthWordCellProps {\r\n  cellData: IOption;\r\n  style?: any;\r\n}\r\nconst getStyles = makeStyles(theme => ({\r\n  tableCell: {\r\n    flex: 1,\r\n    flexDirection: \"column\"\r\n  },\r\n  TableCellRoot: {\r\n    borderBottom: \"none\"\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    boxSizing: \"border-box\"\r\n  }\r\n}));\r\n\r\nexport const MonthWordCell = ({\r\n  cellData,\r\n  style\r\n}: MonthWordCellProps): ReactElement => {\r\n  // const { label, value } = cellData;\r\n  const classes = getStyles();\r\n  return (\r\n    <TableCell\r\n      component=\"div\"\r\n      variant=\"body\"\r\n      classes={{ root: classes.TableCellRoot }}\r\n      className={classNames(classes.tableCell, classes.flexContainer)}\r\n      style={style}\r\n    >\r\n      {cellData && <Typography>{cellData.label}</Typography>}\r\n      <IconButton>\r\n        <InsertDriveFileOutlined />\r\n      </IconButton>\r\n    </TableCell>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { TableCell } from \"@material-ui/core\";\r\nimport { TableHeaderProps } from \"react-virtualized\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\n\r\ninterface HeaderCellProps extends TableHeaderProps {}\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  tableCell: {\r\n    flex: 1,\r\n    flexDirection: \"column\"\r\n  },\r\n  TableCellRoot: {\r\n    borderBottom: \"none\"\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    boxSizing: \"border-box\"\r\n  },\r\n  noClick: {\r\n    cursor: \"initial\"\r\n  }\r\n}));\r\n\r\nexport const HeaderCell = ({ label }: HeaderCellProps) => {\r\n  const classes = getStyles();\r\n  return (\r\n    <TableCell\r\n      component=\"div\"\r\n      className={classNames(\r\n        classes.tableCell,\r\n        classes.flexContainer,\r\n        classes.noClick\r\n      )}\r\n      variant=\"head\"\r\n      classes={{ root: classes.TableCellRoot }}\r\n    >\r\n      {label}\r\n    </TableCell>\r\n  );\r\n};\r\n","import { v4 } from \"uuid\";\r\nimport {\r\n  collectionType,\r\n  dutiesType,\r\n  EventType,\r\n  IOption,\r\n  RowType,\r\n  TypeEnum\r\n} from \"./types\";\r\n\r\nconst ADD_EVENT = \"ADD_EVENT\";\r\nconst REMOVE_EVENT = \"REMOVE_EVENT\";\r\nconst CHANGE_DUTIES = \"CHANGE_DUTIES\";\r\nconst CHANGE_FROM = \"CHANGE_FROM\";\r\nconst CHANGE_TO = \"CHANGE_TO\";\r\nconst CHANGE_TYPE = \"CHANGE_TYPE\";\r\nconst CHANGE_PERFORMERS = \"CHANGE_PERFORMERS\";\r\nconst INIT = \"INIT\";\r\n\r\nexport type ActionType = {\r\n  type: any;\r\n  payload?: any;\r\n};\r\n\r\nexport const addEvent = (rowIndex: number) => ({\r\n  type: ADD_EVENT,\r\n  payload: {\r\n    rowIndex,\r\n    event: {\r\n      uniqueId: v4(),\r\n      from: \"\",\r\n      to: \"\",\r\n      type: null,\r\n      performers: [],\r\n      canEdit: true,\r\n      typeEnum: TypeEnum.ministration\r\n    }\r\n  }\r\n});\r\n\r\nexport const removeEvent = (rowIndex: number, eventIndex: number) => ({\r\n  type: REMOVE_EVENT,\r\n  payload: {\r\n    rowIndex,\r\n    eventIndex\r\n  }\r\n});\r\n\r\nexport const changeFrom = (\r\n  rowIndex: number,\r\n  eventIndex: number,\r\n  from: string\r\n): ActionType => ({\r\n  type: CHANGE_FROM,\r\n  payload: {\r\n    rowIndex,\r\n    eventIndex,\r\n    from\r\n  }\r\n});\r\n\r\nexport const changeTo = (\r\n  rowIndex: number,\r\n  eventIndex: number,\r\n  to: string\r\n): ActionType => ({\r\n  type: CHANGE_TO,\r\n  payload: {\r\n    rowIndex,\r\n    eventIndex,\r\n    to\r\n  }\r\n});\r\n\r\nexport const changeType = (\r\n  rowIndex: number,\r\n  eventIndex: number,\r\n  type: IOption\r\n): ActionType => ({\r\n  type: CHANGE_TYPE,\r\n  payload: {\r\n    rowIndex,\r\n    eventIndex,\r\n    type\r\n  }\r\n});\r\n\r\nexport const changePerformers = (\r\n  rowIndex: number,\r\n  eventIndex: number,\r\n  performers: Array<IOption>\r\n): ActionType => ({\r\n  type: CHANGE_PERFORMERS,\r\n  payload: {\r\n    rowIndex,\r\n    eventIndex,\r\n    performers\r\n  }\r\n});\r\n\r\nexport const changeDuties = (rowIndex: number, duties: dutiesType) => ({\r\n  type: CHANGE_DUTIES,\r\n  payload: {\r\n    rowIndex,\r\n    duties\r\n  }\r\n});\r\n\r\nexport const setCollection = (collection: collectionType) => ({\r\n  type: INIT,\r\n  payload: collection\r\n});\r\n\r\nconst naturalOrder = (\r\n  { from: fromA }: EventType,\r\n  { from: fromB }: EventType\r\n) => {\r\n  if (fromA > fromB) {\r\n    return 1;\r\n  }\r\n  if (fromA < fromB) {\r\n    return -1;\r\n  }\r\n  // a должно быть равным b\r\n  return 0;\r\n};\r\n\r\n//  touched: {\r\n//     [x: string]: boolean;\r\n//   };\r\nexport type StateType = {\r\n  collection: Array<RowType>;\r\n};\r\n\r\nexport function tableReducer(state: StateType, { type, payload }: ActionType) {\r\n  switch (type) {\r\n    case ADD_EVENT: {\r\n      const { rowIndex, event } = payload;\r\n      const newCollection = [...state.collection];\r\n      newCollection[rowIndex] = {\r\n        ...newCollection[rowIndex],\r\n        events: [...newCollection[rowIndex].events, event].sort(naturalOrder)\r\n      };\r\n      return { ...state, collection: newCollection };\r\n    }\r\n    case CHANGE_DUTIES: {\r\n      const newCollection = [...state.collection];\r\n      const { rowIndex, duties } = payload;\r\n      newCollection[rowIndex].duties = duties;\r\n      return {\r\n        ...state,\r\n        collection: newCollection\r\n      };\r\n    }\r\n    case CHANGE_FROM: {\r\n      const newCollection = [...state.collection];\r\n      const { rowIndex, eventIndex, from } = payload;\r\n      const newRow = { ...newCollection[rowIndex] };\r\n      const newEvents = [...newCollection[rowIndex].events];\r\n      newEvents[eventIndex] = { ...newEvents[eventIndex], from };\r\n      newRow.events = /^\\d{2}:\\d{2}$/.test(from)\r\n        ? newEvents.sort(naturalOrder)\r\n        : newEvents;\r\n      newCollection[rowIndex] = newRow;\r\n      return {\r\n        ...state,\r\n        collection: newCollection\r\n      };\r\n    }\r\n    case CHANGE_TO: {\r\n      const newCollection = [...state.collection];\r\n      const { rowIndex, eventIndex, to } = payload;\r\n      const newRow = { ...newCollection[rowIndex] };\r\n      const newEvents = [...newCollection[rowIndex].events];\r\n      newEvents[eventIndex] = { ...newEvents[eventIndex], to };\r\n      newRow.events = newEvents;\r\n      newCollection[rowIndex] = newRow;\r\n      return {\r\n        ...state,\r\n        collection: newCollection\r\n      };\r\n    }\r\n    case REMOVE_EVENT: {\r\n      const newCollection = [...state.collection];\r\n      const { rowIndex, eventIndex } = payload;\r\n      const newRow = newCollection[rowIndex];\r\n      newRow.events = newRow.events.filter((v, index) => index !== eventIndex);\r\n      return {\r\n        ...state,\r\n        collection: newCollection\r\n      };\r\n    }\r\n    case CHANGE_TYPE: {\r\n      const newCollection = [...state.collection];\r\n      const { rowIndex, eventIndex, type: eventType } = payload;\r\n      const newRow = newCollection[rowIndex];\r\n      newRow.events[eventIndex] = {\r\n        ...newRow.events[eventIndex],\r\n        type: eventType\r\n      };\r\n      return {\r\n        ...state,\r\n        collection: newCollection\r\n      };\r\n    }\r\n    case CHANGE_PERFORMERS: {\r\n      const newCollection = [...state.collection];\r\n      const { rowIndex, eventIndex, performers } = payload;\r\n      const newRow = newCollection[rowIndex];\r\n      newRow.events[eventIndex] = {\r\n        ...newRow.events[eventIndex],\r\n        performers\r\n      };\r\n      return {\r\n        ...state,\r\n        collection: newCollection\r\n      };\r\n    }\r\n    case INIT: {\r\n      return { ...state, collection: payload };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { TableCell, Typography } from \"@material-ui/core\";\r\nimport classNames from \"classnames\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { TableCellProps } from \"react-virtualized\";\r\nimport { EventType, TypeEnum } from \"./types\";\r\nimport { MaskedInputMUI } from \"../maskedInputMUI\";\r\nimport { time24HMask } from \"../../constants/masks\";\r\nimport { TableContext } from \"./ScheduleTable\";\r\nimport { changeFrom, changeTo } from \"./tableReducer\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  tableCell: {\r\n    flex: 1,\r\n    flexDirection: \"column\"\r\n  },\r\n  TableCellRoot: {\r\n    borderBottom: \"none\"\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    boxSizing: \"border-box\"\r\n  },\r\n  redHighLight: {\r\n    backgroundColor: \"#890706\"\r\n  },\r\n  greenHighLight: {\r\n    backgroundColor: \"#277b1f\"\r\n  },\r\n  blueHighLight: {\r\n    backgroundColor: \"#74bcff\"\r\n  },\r\n  cont: {\r\n    display: \"flex\",\r\n    flexWrap: \"nowrap\"\r\n  },\r\n  sign: {\r\n    padding: theme.spacing.unit\r\n  }\r\n}));\r\n\r\nexport const EventTimeCell = ({\r\n  cellData: events,\r\n  rowIndex\r\n}: TableCellProps) => {\r\n  const classes = getStyles();\r\n  const { dispatch } = useContext(TableContext);\r\n  return (\r\n    <TableCell\r\n      component=\"div\"\r\n      variant=\"body\"\r\n      classes={{ root: classes.TableCellRoot }}\r\n      className={classNames(classes.tableCell, classes.flexContainer)}\r\n    >\r\n      {events.map(\r\n        (\r\n          { from, to, type, typeEnum, isFree, uniqueId }: EventType,\r\n          eventIndex: number\r\n        ) => {\r\n          const fromOnChange = (\r\n            e: React.ChangeEvent<HTMLInputElement>\r\n          ): void => {\r\n            if (e.currentTarget && e.currentTarget.value) {\r\n              dispatch(changeFrom(rowIndex, eventIndex, e.currentTarget.value));\r\n            }\r\n          };\r\n          const toOnChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n            if (e.currentTarget && e.currentTarget.value) {\r\n              dispatch(changeTo(rowIndex, eventIndex, e.currentTarget.value));\r\n            }\r\n          };\r\n          return (\r\n            <div\r\n              key={uniqueId}\r\n              className={classNames(\r\n                classes.cont,\r\n                {\r\n                  [classes.redHighLight]:\r\n                    typeEnum && TypeEnum.slot === typeEnum && !isFree\r\n                },\r\n                {\r\n                  [classes.greenHighLight]:\r\n                    typeEnum && TypeEnum.slot === typeEnum && !!isFree\r\n                },\r\n                {\r\n                  [classes.blueHighLight]:\r\n                    typeEnum && TypeEnum.workItem === typeEnum\r\n                }\r\n              )}\r\n            >\r\n              <MaskedInputMUI\r\n                value={from}\r\n                mask={time24HMask}\r\n                keepCharPositions\r\n                onChange={fromOnChange}\r\n              />\r\n              <Typography className={classes.sign}>-</Typography>\r\n              <MaskedInputMUI\r\n                value={to}\r\n                mask={time24HMask}\r\n                keepCharPositions\r\n                onChange={toOnChange}\r\n              />\r\n            </div>\r\n          );\r\n        }\r\n      )}\r\n    </TableCell>\r\n  );\r\n};\r\n","import React, { useContext, useRef } from \"react\";\r\nimport { TableCell, Theme } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { TableCellProps } from \"react-virtualized\";\r\nimport { ReactSelectMUI } from \"../reactSelectMUI\";\r\nimport { changeType } from \"./tableReducer\";\r\nimport { TableContext } from \"./ScheduleTable\";\r\nimport { EventType } from \"./types\";\r\n\r\nconst getStyles = makeStyles((theme: Theme) => ({\r\n  tableCell: {\r\n    flex: 1,\r\n    flexDirection: \"column\"\r\n  },\r\n  TableCellRoot: {\r\n    borderBottom: \"none\"\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    boxSizing: \"border-box\"\r\n  }\r\n}));\r\n\r\nexport const EventTypeCell = ({\r\n  cellData: events,\r\n  rowIndex\r\n}: TableCellProps) => {\r\n  const classes = getStyles();\r\n  const {\r\n    optionsMap: {\r\n      type: { loaded, options }\r\n    },\r\n    dispatch\r\n  } = useContext(TableContext);\r\n  const selectContainer = useRef(null);\r\n  return (\r\n    <TableCell\r\n      classes={{ root: classes.TableCellRoot }}\r\n      variant=\"body\"\r\n      component=\"div\"\r\n    >\r\n      <input ref={selectContainer} type=\"text\" style={{ display: \"none\" }} />\r\n      {events.map(\r\n        ({ type: eventType, uniqueId }: EventType, eventIndex: number) => {\r\n          return (\r\n            <div style={{ width: \"250px\" }} key={uniqueId}>\r\n              <ReactSelectMUI\r\n                options={options}\r\n                placeholder=\"\"\r\n                value={eventType}\r\n                label=\"\"\r\n                handleChange={v =>\r\n                  dispatch(changeType(rowIndex, eventIndex, v))\r\n                }\r\n                isDisabled={!loaded}\r\n                menuPortalTarget={selectContainer.current}\r\n              />\r\n            </div>\r\n          );\r\n        }\r\n      )}\r\n    </TableCell>\r\n  );\r\n};\r\n","import { TableCell } from \"@material-ui/core\";\r\nimport React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { TableCellProps } from \"react-virtualized\";\r\nimport v4 from \"uuid\";\r\nimport { EventType } from \"./types\";\r\nimport { TableContext } from \"./ScheduleTable\";\r\nimport { ReactSelectMUI } from \"../reactSelectMUI\";\r\nimport { changePerformers } from \"./tableReducer\";\r\n\r\nconst getStyles = makeStyles({\r\n  tableCell: {\r\n    flex: 1,\r\n    flexDirection: \"column\"\r\n  },\r\n  TableCellRoot: {\r\n    borderBottom: \"none\"\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    boxSizing: \"border-box\"\r\n  }\r\n});\r\n\r\nexport const EventPerformersCell = ({\r\n  cellData: events,\r\n  rowIndex\r\n}: TableCellProps) => {\r\n  const classes = getStyles();\r\n  const {\r\n    optionsMap: {\r\n      performers: { loaded, options }\r\n    },\r\n    dispatch\r\n  } = useContext(TableContext);\r\n  return (\r\n    <TableCell\r\n      classes={{ root: classes.TableCellRoot }}\r\n      component=\"div\"\r\n      variant=\"body\"\r\n    >\r\n      {events.map(({ performers, uniqueId }: EventType, eventIndex: number) => {\r\n        return (\r\n          <div style={{ width: \"250px\" }} key={uniqueId || v4()}>\r\n            <ReactSelectMUI\r\n              options={options}\r\n              isMulti\r\n              placeholder=\"\"\r\n              value={performers}\r\n              label=\"\"\r\n              handleChange={v =>\r\n                dispatch(changePerformers(rowIndex, eventIndex, v))\r\n              }\r\n              isDisabled={!loaded}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n    </TableCell>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { TableCell } from \"@material-ui/core\";\r\nimport classNames from \"classnames\";\r\nimport { TableCellProps } from \"react-virtualized\";\r\nimport { TableContext } from \"./ScheduleTable\";\r\nimport { ReactSelectMUI } from \"../reactSelectMUI\";\r\nimport { changeDuties } from \"./tableReducer\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  tableCell: {\r\n    flex: 1,\r\n    flexDirection: \"column\"\r\n  },\r\n  TableCellRoot: {\r\n    borderBottom: \"none\"\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    boxSizing: \"border-box\"\r\n  }\r\n}));\r\n\r\ninterface DutiesCellProps extends TableCellProps {}\r\n\r\nexport const DutiesCell = ({ rowIndex, cellData: duties }: DutiesCellProps) => {\r\n  const classes = getStyles();\r\n  const {\r\n    optionsMap: {\r\n      duties: { options = [], loaded = false }\r\n    },\r\n    dispatch\r\n  } = useContext(TableContext);\r\n  return (\r\n    <TableCell\r\n      component=\"div\"\r\n      variant=\"body\"\r\n      classes={{ root: classes.TableCellRoot }}\r\n      className={classNames(classes.tableCell, classes.flexContainer)}\r\n    >\r\n      <div style={{ width: \"250px\" }}>\r\n        <ReactSelectMUI\r\n          options={options}\r\n          placeholder=\"\"\r\n          value={duties}\r\n          label=\"\"\r\n          handleChange={v => dispatch(changeDuties(rowIndex, v))}\r\n          isDisabled={!loaded}\r\n        />\r\n      </div>\r\n    </TableCell>\r\n  );\r\n};\r\n","import { createStandardAction } from \"typesafe-actions\";\r\nimport { OPEN_CONFIRM_DIALOG_FORMIK, TOGGLE_SNACKBAR } from \"../constants\";\r\nimport { ActionType } from \"../components/schedule/tableReducer\";\r\n\r\nexport const openConfirmDialogFormik = (payload: any): ActionType => ({\r\n  type: OPEN_CONFIRM_DIALOG_FORMIK,\r\n  payload: { open: true, ...payload }\r\n});\r\n\r\nexport const openSnackBar = createStandardAction(TOGGLE_SNACKBAR).map(\r\n  (message: string) => ({\r\n    payload: { message, isSnackBarOpened: true }\r\n  })\r\n);\r\n","import React, { useContext } from \"react\";\r\nimport { TableCellProps } from \"react-virtualized\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Add, Done, Remove } from \"@material-ui/icons\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { Action, Dispatch } from \"redux\";\r\nimport { EventType, IOption, TypeEnum } from \"./types\";\r\nimport { TableContext } from \"./ScheduleTable\";\r\nimport { addEvent, removeEvent } from \"./tableReducer\";\r\nimport { openSnackBar } from \"../../actions/typedActions\";\r\nimport { defaultErrorHandler } from \"../../utils/defaultErrorHandler\";\r\n\r\ntype PrivateActionButtonsProps = ReturnType<typeof mapStateToProps> &\r\n  ReturnType<typeof mapDispatchToProps> &\r\n  TableCellProps & {\r\n    openSnackBarWithMessage: Function;\r\n  };\r\n\r\nconst mapPerformer = ({ label, value }: IOption) => ({\r\n  fullName: label,\r\n  id: value\r\n});\r\n\r\nconst PrivateActionButtons: React.FC<PrivateActionButtonsProps> = ({\r\n  cellData: events,\r\n  rowIndex,\r\n  rowData,\r\n  openSnackBarWithMessage\r\n}) => {\r\n  const { dispatch } = useContext(TableContext);\r\n  const addEventPrivate = () => {\r\n    dispatch(addEvent(rowIndex));\r\n  };\r\n  if (events.length === 0) {\r\n    return (\r\n      <div>\r\n        <IconButton onClick={addEventPrivate}>\r\n          <Add />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  }\r\n  return events.map((event: EventType, eventIndex: number) => {\r\n    const {\r\n      canEdit: canEditEvent,\r\n      from,\r\n      to,\r\n      uniqueId,\r\n      type,\r\n      typeEnum,\r\n      performers\r\n    } = event;\r\n    if (!canEditEvent) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div key={uniqueId}>\r\n        <IconButton\r\n          onClick={() => {\r\n            if (typeEnum === TypeEnum.ministration) {\r\n              const dateTimestamp = `${rowData.day} ${\r\n                from.length > 5 ? from : `${from}:00`\r\n              }`;\r\n              const dateEndTimestamp = `${rowData.day} ${\r\n                to.length > 5 ? to : `${to}:00`\r\n              }`;\r\n              let promise;\r\n\r\n              const obj = {\r\n                objectTypeCode: type.value,\r\n                performers: performers.map(mapPerformer),\r\n                dateTimestamp,\r\n                dateEndTimestamp\r\n              };\r\n\r\n              if (typeof uniqueId === \"string\") {\r\n                promise = axios.post(\"/api/ministration\", obj);\r\n              } else {\r\n                promise = axios.patch(`/api/ministration/${uniqueId}`, obj);\r\n              }\r\n\r\n              promise\r\n                .then(({ data }) => {\r\n                  if (data) {\r\n                    openSnackBarWithMessage(data);\r\n                  }\r\n                })\r\n                .catch(reason => defaultErrorHandler(reason));\r\n            }\r\n          }}\r\n          disabled={!canEditEvent || event.typeEnum !== TypeEnum.ministration}\r\n        >\r\n          <Done />\r\n        </IconButton>\r\n        <IconButton onClick={addEventPrivate}>\r\n          <Add />\r\n        </IconButton>\r\n        <IconButton\r\n          onClick={() => {\r\n            if (typeof uniqueId === \"string\") {\r\n              dispatch(removeEvent(rowIndex, eventIndex));\r\n            } else {\r\n              switch (typeEnum) {\r\n                case TypeEnum.ministration: {\r\n                  axios\r\n                    .delete(`/api/ministration/${uniqueId}`)\r\n                    .then(({ data }) => {\r\n                      dispatch(removeEvent(rowIndex, eventIndex));\r\n                      if (data) {\r\n                        openSnackBarWithMessage(data);\r\n                      }\r\n                    })\r\n                    .catch(reason => defaultErrorHandler(reason));\r\n                  break;\r\n                }\r\n                case TypeEnum.slot: {\r\n                  axios\r\n                    .delete(`/api/slots/${uniqueId}`)\r\n                    .then(({ data }) => {\r\n                      dispatch(removeEvent(rowIndex, eventIndex));\r\n                      if (data) {\r\n                        openSnackBarWithMessage(data);\r\n                      }\r\n                    })\r\n                    .catch(reason => defaultErrorHandler(reason));\r\n                  break;\r\n                }\r\n                case TypeEnum.workItem: {\r\n                  axios\r\n                    .delete(`/api/workitem/delete/${uniqueId}`)\r\n                    .then(({ data }) => {\r\n                      dispatch(removeEvent(rowIndex, eventIndex));\r\n                      if (data) {\r\n                        openSnackBarWithMessage(data);\r\n                      }\r\n                    })\r\n                    .catch(reason => defaultErrorHandler(reason));\r\n                  break;\r\n                }\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          }}\r\n        >\r\n          <Remove />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  });\r\n};\r\n\r\nconst mapStateToProps = (state: any) => ({});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<Action>) => ({\r\n  openSnackBarWithMessage: (message: string) => dispatch(openSnackBar(message))\r\n});\r\n\r\nexport const ActionButtons = connect(\r\n  undefined,\r\n  mapDispatchToProps\r\n)(PrivateActionButtons);\r\n","import React, { createContext } from \"react\";\r\nimport { Paper, Theme, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport {\r\n  Column,\r\n  Table,\r\n  TableCellRenderer,\r\n  TableHeaderRenderer,\r\n  CellMeasurerCache,\r\n  CellMeasurer,\r\n  TableCellProps,\r\n  Index,\r\n  AutoSizer\r\n} from \"react-virtualized\";\r\nimport classNames from \"classnames\";\r\nimport { isEqual } from \"lodash\";\r\nimport { DayCell } from \"./dayCell\";\r\nimport { MonthWordCell } from \"./monthWordCell\";\r\nimport { HeaderCell } from \"./headerRenderer\";\r\nimport { EventTimeCell } from \"./eventTimeCell\";\r\nimport { collectionType, IOption, ScheduleTableProps } from \"./types\";\r\nimport { EventTypeCell } from \"./EventTypeCell\";\r\nimport { EventPerformersCell } from \"./eventPerformersCell\";\r\nimport { DutiesCell } from \"./dutiesCell\";\r\nimport { ActionType } from \"./tableReducer\";\r\nimport { ActionButtons } from \"./actionButtons\";\r\n\r\nimport \"react-virtualized/styles.css\";\r\n\r\nconst getStyles = makeStyles((theme: Theme) => ({\r\n  mainContainer: {\r\n    height: \"100%\"\r\n  },\r\n  headerColumn: {\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n    fontSize: theme.typography.fontSize.toFixed(15)\r\n  },\r\n  table: {\r\n    fontFamily: theme.typography.fontFamily\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    boxSizing: \"border-box\"\r\n  },\r\n  tableRow: {\r\n    // cursor: \"pointer\"\r\n    borderBottom: \"1px solid rgba(224, 224, 224, 1)\"\r\n  },\r\n  tableRowHover: {\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.grey[200]\r\n    }\r\n  },\r\n  tableCell: {\r\n    flex: 1,\r\n    flexDirection: \"column\"\r\n  },\r\n  TableCellRoot: {\r\n    borderBottom: \"none\"\r\n  },\r\n  noClick: {\r\n    cursor: \"initial\"\r\n  }\r\n}));\r\n\r\nconst noRowsRenderer = () => (\r\n  <Typography\r\n    variant=\"h6\"\r\n    style={{\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\"\r\n    }}\r\n  >\r\n    Расписание не заполнено\r\n  </Typography>\r\n);\r\n\r\nconst cache = new CellMeasurerCache({\r\n  defaultWidth: 100,\r\n  defaultHeight: 80,\r\n  minHeight: 70,\r\n  minWidth: 75,\r\n  fixedHeight: false,\r\n  fixedWidth: true\r\n});\r\n\r\nconst DayCellRenderer: TableCellRenderer = ({ cellData }: TableCellProps) => (\r\n  <DayCell text={cellData} />\r\n);\r\n\r\nconst HeaderRenderer: TableHeaderRenderer = props => <HeaderCell {...props} />;\r\n\r\nconst MonthWordCellRenderer: TableCellRenderer = ({\r\n  cellData\r\n}: TableCellProps) => <MonthWordCell cellData={cellData} />;\r\n\r\nconst EventTimeCellRender: TableCellRenderer = props => (\r\n  <EventTimeCell {...props} />\r\n);\r\n\r\nconst EventTypeCellRenderer: TableCellRenderer = ({\r\n  cellData,\r\n  dataKey,\r\n  parent,\r\n  rowIndex,\r\n  columnIndex,\r\n  ...rest\r\n}: TableCellProps) => (\r\n  <EventTypeCell\r\n    cellData={cellData}\r\n    dataKey={dataKey}\r\n    parent={parent}\r\n    rowIndex={rowIndex}\r\n    columnIndex={columnIndex}\r\n    {...rest}\r\n  />\r\n);\r\n\r\nconst DutiesCellRenderer: TableCellRenderer = (props: TableCellProps) => (\r\n  <DutiesCell {...props} />\r\n);\r\n\r\nconst ActionButtonsRenderer: TableCellRenderer = ({\r\n  cellData,\r\n  dataKey,\r\n  parent,\r\n  rowIndex,\r\n  columnIndex,\r\n  ...rest\r\n}: TableCellProps) => (\r\n  <ActionButtons\r\n    cellData={cellData}\r\n    dataKey={dataKey}\r\n    parent={parent}\r\n    rowIndex={rowIndex}\r\n    columnIndex={columnIndex}\r\n    {...rest}\r\n  />\r\n);\r\n\r\nconst EventPerformersCellRenderer: TableCellRenderer = ({\r\n  cellData,\r\n  columnIndex,\r\n  dataKey,\r\n  parent,\r\n  rowIndex,\r\n  ...rest\r\n}: TableCellProps) => (\r\n  <EventPerformersCell\r\n    cellData={cellData}\r\n    columnIndex={columnIndex}\r\n    dataKey={dataKey}\r\n    parent={parent}\r\n    rowIndex={rowIndex}\r\n    {...rest}\r\n  />\r\n);\r\n//  <CellMeasurer cache={cache} parent={parent}>  </CellMeasurer>\r\n\r\nexport type DispatchType = (action: ActionType) => void;\r\n\r\nexport type optionsMapType = {\r\n  [x: string]: {\r\n    loaded: boolean;\r\n    options: Array<IOption>;\r\n  };\r\n};\r\n\r\nexport type TableContextProps = {\r\n  dispatch: DispatchType;\r\n  optionsMap: optionsMapType;\r\n};\r\n\r\nconst initialTableContext: TableContextProps = {\r\n  optionsMap: {\r\n    duties: {\r\n      loaded: false,\r\n      options: []\r\n    },\r\n    performers: {\r\n      loaded: false,\r\n      options: []\r\n    },\r\n    types: {\r\n      loaded: false,\r\n      options: []\r\n    }\r\n  },\r\n  dispatch: () => {}\r\n};\r\n\r\nexport const TableContext = createContext(initialTableContext);\r\n\r\ninterface ReactResizeDetectorDimensions {\r\n  height: number;\r\n  width: number;\r\n}\r\n\r\nexport const ScheduleTable = ({\r\n  collection,\r\n  dispatch,\r\n  omitDutiesColumn = false,\r\n  optionsMap\r\n}: ScheduleTableProps) => {\r\n  const classes = getStyles();\r\n  const getRowClassName = classNames(classes.tableRow, classes.flexContainer);\r\n\r\n  let lastCollection: collectionType = [];\r\n  let lastRenderedWidth = 0;\r\n  let lastRenderedHeight = 0;\r\n\r\n  const rowGetter = ({ index }: Index) => collection[index];\r\n  return (\r\n    <TableContext.Provider value={{ optionsMap, dispatch }}>\r\n      <Paper square className={classes.mainContainer} elevation={1}>\r\n        <AutoSizer>\r\n          {({ width, height }) => {\r\n            if (\r\n              lastRenderedWidth !== width ||\r\n              lastRenderedHeight !== height ||\r\n              !isEqual(collection, lastCollection)\r\n            ) {\r\n              lastRenderedWidth = width;\r\n              lastRenderedHeight = height;\r\n              lastCollection = collection;\r\n              cache.clearAll();\r\n            }\r\n            return (\r\n              <Table\r\n                // deferredMeasurementCache={cache}\r\n                className={classes.table}\r\n                headerClassName={classes.headerColumn}\r\n                headerHeight={50}\r\n                height={height}\r\n                noRowsRenderer={noRowsRenderer}\r\n                overscanRowCount={10}\r\n                rowClassName={getRowClassName}\r\n                rowHeight={80}\r\n                // rowHeight={cache.rowHeight}\r\n                rowGetter={rowGetter}\r\n                rowCount={collection.length}\r\n                width={width}\r\n              >\r\n                <Column\r\n                  dataKey=\"day\"\r\n                  label=\"День\"\r\n                  width={100}\r\n                  cellRenderer={DayCellRenderer}\r\n                  headerRenderer={HeaderRenderer}\r\n                />\r\n                <Column\r\n                  width={200}\r\n                  label=\"Месяцслов\"\r\n                  dataKey=\"mothWord\"\r\n                  cellRenderer={MonthWordCellRenderer}\r\n                  headerRenderer={HeaderRenderer}\r\n                />\r\n                {!omitDutiesColumn && (\r\n                  <Column\r\n                    width={200}\r\n                    label=\"Дежурство\"\r\n                    dataKey=\"duties\"\r\n                    cellRenderer={DutiesCellRenderer}\r\n                    headerRenderer={HeaderRenderer}\r\n                  />\r\n                )}\r\n                <Column\r\n                  dataKey=\"events\"\r\n                  label=\"Время\"\r\n                  width={170}\r\n                  cellRenderer={EventTimeCellRender}\r\n                  headerRenderer={HeaderRenderer}\r\n                />\r\n                <Column\r\n                  dataKey=\"events\"\r\n                  label=\"Событие\"\r\n                  width={200}\r\n                  cellRenderer={EventTypeCellRenderer}\r\n                  flexGrow={1}\r\n                  headerRenderer={HeaderRenderer}\r\n                />\r\n                <Column\r\n                  dataKey=\"events\"\r\n                  label=\"Духовество\"\r\n                  width={250}\r\n                  cellRenderer={EventPerformersCellRenderer}\r\n                  flexGrow={1}\r\n                  headerRenderer={HeaderRenderer}\r\n                />\r\n                <Column\r\n                  dataKey=\"events\"\r\n                  width={150}\r\n                  cellRenderer={ActionButtonsRenderer}\r\n                />\r\n              </Table>\r\n            );\r\n          }}\r\n        </AutoSizer>\r\n      </Paper>\r\n    </TableContext.Provider>\r\n  );\r\n};\r\n","import { format } from \"date-fns\";\r\nimport { ru } from \"date-fns/locale\";\r\n\r\nexport const russianDateTime = (value: Date) =>\r\n  format(value, \"DD.MM.YYYY HH:mm\", { locale: ru });\r\n\r\nexport const russianDate = (value: Date) =>\r\n  format(value, \"DD.MM.YYYY\", { locale: ru });\r\n","import React, { Suspense, useEffect, useReducer, useState } from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { startOfWeek, endOfWeek, startOfMonth, endOfMonth } from \"date-fns\";\r\nimport { ru } from \"date-fns/locale\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Grid,\r\n  IconButton,\r\n  ExpansionPanel,\r\n  ExpansionPanelSummary,\r\n  ExpansionPanelDetails,\r\n  Theme\r\n} from \"@material-ui/core\";\r\nimport {\r\n  AddOutlined,\r\n  FileCopyOutlined,\r\n  PrintOutlined,\r\n  CalendarViewDayOutlined,\r\n  CalendarToday,\r\n  SearchOutlined,\r\n  ExpandMore\r\n} from \"@material-ui/icons\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport { FormikActions, FormikValues } from \"formik\";\r\nimport { defaultPreloader } from \"../completePromiseThenRenderComponent\";\r\nimport { ReactDateRangeInline } from \"../IntegrateDatePickerWithMUI/inlineReactDateRange\";\r\nimport { ReactSelectMUI } from \"../reactSelectMUI\";\r\nimport { DispatchType, ScheduleTable } from \"./ScheduleTable\";\r\nimport { openScheduleCreationMaster } from \"../../actions\";\r\nimport { openConfirmDialogFormik } from \"../../actions/typedActions\";\r\nimport { defaultErrorHandler } from \"../../utils/defaultErrorHandler\";\r\nimport { ActionType, setCollection, tableReducer } from \"./tableReducer\";\r\nimport { russianDate } from \"./formatters\";\r\n\r\nconst getStyles = makeStyles((theme: Theme) => ({\r\n  header: {\r\n    padding: theme.spacing.unit\r\n  },\r\n  mainContainer: {\r\n    padding: theme.spacing.unit,\r\n    marginBottom: theme.spacing.unit,\r\n    height: \" 100%\",\r\n    width: \"100%\",\r\n    overflowY: \"auto\",\r\n    display: \"flex\",\r\n    flexWrap: \"nowrap\",\r\n    flexDirection: \"column\"\r\n  },\r\n  actionPanel: {\r\n    marginBottom: theme.spacing.unit\r\n  },\r\n  actionBtn: {}\r\n}));\r\n\r\nconst ExpandMoreRendered = <ExpandMore />;\r\n\r\nfunction constructParamsFromTo(selectedRange: SelectedRangeT, date: Date) {\r\n  if (selectedRange === \"week\") {\r\n    return `?from=${russianDate(\r\n      startOfWeek(date, { locale: ru })\r\n    )}&to=${russianDate(\r\n      endOfWeek(date, {\r\n        locale: ru\r\n      })\r\n    )}`;\r\n  }\r\n  return `?from=${russianDate(startOfMonth(date))}&to=${russianDate(\r\n    endOfMonth(date)\r\n  )}`;\r\n}\r\n\r\nconst mapSurinameInitialsAsLabelUniqueIdAsValue = ({\r\n  surnameInitials,\r\n  uniqueId\r\n}: {\r\n  surnameInitials: string;\r\n  uniqueId: number;\r\n}) => ({ label: surnameInitials, value: uniqueId });\r\n\r\ntype confObjType = {\r\n  title: string;\r\n};\r\n\r\ntype PrivateScheduleJournalProps = {\r\n  confObj: confObjType;\r\n  openSnackBar: Function;\r\n  openCreationMaster: Function;\r\n};\r\n\r\ntype SelectedRangeT = \"week\" | \"month\";\r\n\r\nconst mapLabelAsLabelUniqueIdAsValue = ({\r\n  label,\r\n  uniqueId\r\n}: {\r\n  label: string;\r\n  uniqueId: number;\r\n}) => ({\r\n  label,\r\n  value: uniqueId\r\n});\r\n\r\nconst PrivateScheduleJournal = ({\r\n  confObj: { title },\r\n  openSnackBar,\r\n  openCreationMaster\r\n}: PrivateScheduleJournalProps) => {\r\n  const classes = getStyles();\r\n  const [date, setDate] = useState(new Date());\r\n  const [showAllEvents, setShowAllEvents] = useState(false);\r\n  const [ministration, setMinistration] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n  const [selectedRange, setSelectedRange] = useState<SelectedRangeT>(\"week\");\r\n  const [types, setTypes] = useState([]);\r\n  const [priests, setPriests] = useState([]);\r\n  const [{ collection }, dispatch] = useReducer(tableReducer, {\r\n    collection: []\r\n  });\r\n  // загружает данные для выпадалок\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source();\r\n    axios\r\n      .all([\r\n        axios.get(\"/api/ministration/type\", { cancelToken: source.token }),\r\n        axios.get(\"/api/ministration/priest\", { cancelToken: source.token })\r\n      ])\r\n      .then(\r\n        axios.spread((typesResponse, priestsResponse) => {\r\n          setTypes(typesResponse.data.map(mapLabelAsLabelUniqueIdAsValue));\r\n          setPriests(\r\n            priestsResponse.data.map(mapSurinameInitialsAsLabelUniqueIdAsValue)\r\n          );\r\n        })\r\n      )\r\n      .catch(error => {\r\n        if (!axios.isCancel(error)) {\r\n          defaultErrorHandler(error);\r\n        }\r\n      });\r\n    return () => {\r\n      source.cancel(\"Cancelling in cleanup\");\r\n    };\r\n  }, []);\r\n\r\n  // загружает коллецкию при измении Выбранной даты, диапозона, типа события, или выборе конкретного свещеннослужителя\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source();\r\n    const url = `/api/events/log${constructParamsFromTo(selectedRange, date)}`;\r\n    axios\r\n      .get(url, { cancelToken: source.token })\r\n      .then(({ data }) => {\r\n        if (data.length === 0) {\r\n          openCreationMaster();\r\n        }\r\n        dispatch(setCollection(data));\r\n      })\r\n      .catch(error => {\r\n        if (!axios.isCancel(error)) {\r\n          defaultErrorHandler(error);\r\n        }\r\n      });\r\n    return () => {\r\n      source.cancel(\"Cancelling in cleanup\");\r\n    };\r\n  }, [date, openCreationMaster, selectedRange]);\r\n\r\n  return (\r\n    <Paper square className={classes.mainContainer} elevation={5}>\r\n      <Typography variant=\"h6\" className={classes.header}>\r\n        {title.toUpperCase()}\r\n      </Typography>\r\n      <Suspense fallback={defaultPreloader}>\r\n        <ExpansionPanel className={classes.actionPanel}>\r\n          <ExpansionPanelSummary expandIcon={ExpandMoreRendered}>\r\n            Панель действий\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <Grid container wrap=\"nowrap\">\r\n              <Grid item>\r\n                <Grid container direction=\"column\" spacing={24}>\r\n                  <Grid item>\r\n                    <Grid container spacing={24}>\r\n                      <Grid item>\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          className={classes.actionBtn}\r\n                          onClick={() => openSnackBar(\"joj\")}\r\n                        >\r\n                          <AddOutlined />\r\n                          Богослужение\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          className={classes.actionBtn}\r\n                        >\r\n                          <AddOutlined />\r\n                          Беседа\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          className={classes.actionBtn}\r\n                        >\r\n                          <AddOutlined />\r\n                          Дело\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          className={classes.actionBtn}\r\n                        >\r\n                          <FileCopyOutlined />\r\n                          Копировать\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          className={classes.actionBtn}\r\n                        >\r\n                          <PrintOutlined />\r\n                          Печать\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          className={classes.actionBtn}\r\n                          color={\r\n                            selectedRange === \"week\" ? \"primary\" : undefined\r\n                          }\r\n                          onClick={() => {\r\n                            setSelectedRange(\"week\");\r\n                          }}\r\n                        >\r\n                          <CalendarViewDayOutlined />\r\n                          Неделя\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          className={classes.actionBtn}\r\n                          color={\r\n                            selectedRange === \"month\" ? \"primary\" : undefined\r\n                          }\r\n                          onClick={() => {\r\n                            setSelectedRange(\"month\");\r\n                          }}\r\n                        >\r\n                          <CalendarToday />\r\n                          Месяц\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <Grid container spacing={24}>\r\n                      <Grid item xl={4} lg={5}>\r\n                        <Grid container spacing={8} wrap=\"nowrap\">\r\n                          <Grid item xl={11} lg={11}>\r\n                            <ReactSelectMUI\r\n                              value={ministration}\r\n                              options={types}\r\n                              label=\"Событие\"\r\n                              handleChange={setMinistration}\r\n                            />\r\n                          </Grid>\r\n                          <Grid item>\r\n                            <IconButton>\r\n                              <SearchOutlined />\r\n                            </IconButton>\r\n                          </Grid>\r\n                        </Grid>\r\n                      </Grid>\r\n                      <Grid item xl={4} lg={5}>\r\n                        <Grid container spacing={8} wrap=\"nowrap\">\r\n                          <Grid item xl={11} lg={11}>\r\n                            <ReactSelectMUI\r\n                              value={user}\r\n                              options={priests}\r\n                              label=\"Священнослужитель\"\r\n                              handleChange={setUser}\r\n                            />\r\n                          </Grid>\r\n                          <Grid item>\r\n                            <IconButton>\r\n                              <SearchOutlined />\r\n                            </IconButton>\r\n                          </Grid>\r\n                        </Grid>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <FormControlLabel\r\n                          label=\"Показать все события\"\r\n                          onChange={(event1, checked) =>\r\n                            setShowAllEvents(checked)\r\n                          }\r\n                          control={\r\n                            <Checkbox\r\n                              indeterminate={showAllEvents === null}\r\n                              color=\"primary\"\r\n                            />\r\n                          }\r\n                        />\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n              <Grid item>\r\n                <ReactDateRangeInline date={date} onChange={setDate} />\r\n              </Grid>\r\n            </Grid>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n      </Suspense>\r\n      <ScheduleTable\r\n        collection={collection}\r\n        dispatch={dispatch}\r\n        optionsMap={{\r\n          duties: { options: priests, loaded: true },\r\n          performers: { options: priests, loaded: true },\r\n          type: { options: types, loaded: true }\r\n        }}\r\n      />\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: DispatchType) => ({\r\n  openSnackBar: (message: string) => {\r\n    const action: ActionType = openConfirmDialogFormik({\r\n      title: \"Заполнение расписания богослужений\",\r\n      formObj: {\r\n        blocks: [\r\n          {\r\n            blockTitle: \"asd\",\r\n            fields: []\r\n          }\r\n        ]\r\n      },\r\n      primaryButtonText: \"Завершить\",\r\n      primaryButtonHandler: (\r\n        values: FormikValues,\r\n        { setSubmitting }: FormikActions<FormikValues>\r\n      ) => {}\r\n    });\r\n    return dispatch(action);\r\n  },\r\n  openCreationMaster: () => dispatch(openScheduleCreationMaster())\r\n});\r\n\r\nexport const ScheduleJournal = connect(\r\n  undefined,\r\n  mapDispatchToProps\r\n)(PrivateScheduleJournal);\r\n","import { ScheduleJournal } from \"../../../components/schedule/scheduleJournal\";\r\n\r\nexport const schedule = {\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administrator_hram_schedule_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\"]\r\n    },\r\n    {\r\n      functionName: \"priest_hram_schedule_view\",\r\n      allowedActions: [\"view\"]\r\n    },\r\n    {\r\n      functionName: \"assistant_hram_schedule_view\",\r\n      allowedActions: [\"view\"]\r\n    }\r\n  ],\r\n  passProps: {\r\n    confObj: {\r\n      // todo Добавить сюда Наименование храма\r\n      title: \"Расписание богослужений и дежурств в храме:\",\r\n      filters: [\r\n        {\r\n          name: \"priest\",\r\n          label: \"Священнослужитель\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/sysUsers/search/\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  Component: ScheduleJournal,\r\n  forms: {\r\n    create: {\r\n      title: \"123\",\r\n      blocks: [\r\n        {\r\n          blockTitle: \"123\",\r\n          fields: []\r\n        }\r\n      ]\r\n    }\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport CompletePromiseThenRenderComponent, {\r\n  defaultPreloader\r\n} from \"../../../components/completePromiseThenRenderComponent\";\r\nimport { FormikMUI } from \"../../../components/formikMUi/formikNewRealisation\";\r\nimport { defaultErrorHandler } from \"../../../utils/defaultErrorHandler\";\r\nimport { baseTextAreaProps, baseTimeFieldProps } from \"../../baseFieldProps\";\r\nimport { constructRequest, openSnackBar } from \"../../../actions\";\r\nimport { dispatchPopHeadModal } from \"../../index\";\r\nimport Yup from \"../../yup\";\r\n\r\nconst hramTabFormObj = {\r\n  blocks: [\r\n    {\r\n      blockTitle: \"\",\r\n      fields: [\r\n        {\r\n          label: \"Фотография\",\r\n          name: \"photo\",\r\n          type: \"file\"\r\n        },\r\n        {\r\n          label: \"Описание храма\",\r\n          name: \"description\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Веб-страница\",\r\n          name: \"webUrl\",\r\n          type: \"text\"\r\n        },\r\n        {\r\n          label: \"Контакты\",\r\n          name: \"contacts\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"История\",\r\n          name: \"history\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Святыни\",\r\n          name: \"religion\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Время начало работы Храма\",\r\n          name: \"startWorkTime\",\r\n          ...baseTimeFieldProps\r\n        },\r\n        {\r\n          label: \"Время окончания работы Храма\",\r\n          name: \"finishWorkTime\",\r\n          ...baseTimeFieldProps\r\n        },\r\n        {\r\n          label: \"Отображение священнослужителей при записи на беседу\",\r\n          name: \"visiblePriests\",\r\n          type: \"checkbox\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      blockTitle: \"Блок деятельности\",\r\n      fields: [{ label: \"Описание\", name: \"description\", ...baseTextAreaProps }]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    photo: Yup.object().nullable(),\r\n    description: Yup.string().required(),\r\n    webUrl: Yup.string(),\r\n    contacts: Yup.string(),\r\n    history: Yup.string(),\r\n    religion: Yup.string(),\r\n    startWorkTime: Yup.string().required(),\r\n    finishWorkTime: Yup.string().required(),\r\n    visiblePriests: Yup.bool()\r\n  }).nullable()\r\n};\r\n\r\nexport const HramTab = ({\r\n  firstFormInitialValues: { uniqueId },\r\n  modal: { mode },\r\n  ...rest\r\n}) => (\r\n  <CompletePromiseThenRenderComponent\r\n    config={[\r\n      {\r\n        urlToDownload: `/api/strHram/search/byMember?member=${uniqueId}&projection=formMemberHram`,\r\n        whereToStore: \"initialValues\"\r\n      }\r\n    ]}\r\n    Component={FormikMUI}\r\n    readOnly={mode !== \"edit\"}\r\n    onSubmit={(values, { setSubmitting }) => {\r\n      constructRequest(\r\n        {\r\n          url: `/api/hram/${uniqueId}`,\r\n          method: \"patch\",\r\n          data: values\r\n        },\r\n        () => {\r\n          openSnackBar(\"Изменения успешно применены\");\r\n          setSubmitting(false);\r\n          dispatchPopHeadModal();\r\n        }\r\n      );\r\n    }}\r\n    formObj={hramTabFormObj}\r\n    errorHandler={defaultErrorHandler}\r\n    PreloaderComponent={defaultPreloader}\r\n    {...rest}\r\n  />\r\n);\r\n","import { computePropsForFormikMUI } from \"../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport { baseTextAreaProps, baseTimeFieldProps } from \"../../baseFieldProps\";\r\nimport Yup from \"../../yup\";\r\nimport { halfWith, fullWidth } from \"../../widths\";\r\nimport {\r\n  constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n  rebuildReceivedValueLabelLabelValueUniqueId\r\n} from \"../../rebuildRecieved\";\r\nimport { HramTab } from \"./hramTab\";\r\nimport { PrimaryButton } from \"../../../components/modalWrapper/buttons\";\r\n\r\nconst createForm = {\r\n  title: \"Структуры\",\r\n  headerText: \"label\",\r\n  url: \"/api/strMember\",\r\n  primaryActionUrl: \"/api/member/structureMembers\",\r\n  projection: \"formMember\",\r\n  method: \"post\",\r\n  doBeforeSend: {\r\n    select: ({ value }) => value,\r\n    file: ({ value }) => value\r\n  },\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Наименование\",\r\n          name: \"label\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Адресс\",\r\n          name: \"address\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Тип\",\r\n          name: \"type\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strType/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Подчинение\",\r\n          name: \"parentId\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          label: \"Город\",\r\n          name: \"town\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strDictTown/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Метро\",\r\n          name: \"metro\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strDictMetro/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Геолокация\",\r\n          name: \"coordination\",\r\n          type: \"text\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      blockTitle: \"Карточка храма\",\r\n      conditionallyRender: ({ type }) => (type ? type.enum === \"HRAM\" : false),\r\n      fields: [\r\n        {\r\n          label: \"Фотография\",\r\n          name: \"hramObjectLocal.photo\",\r\n          type: \"file\",\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          label: \"Описание храма\",\r\n          name: \"hramObjectLocal.description\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Веб-страница\",\r\n          name: \"hramObjectLocal.webUrl\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Контакты\",\r\n          name: \"hramObjectLocal.contacts\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"История\",\r\n          name: \"hramObjectLocal.history\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Святыни\",\r\n          name: \"hramObjectLocal.religion\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Время начало работы Храма\",\r\n          name: \"hramObjectLocal.startWorkTime\",\r\n          ...baseTimeFieldProps\r\n        },\r\n        {\r\n          label: \"Время окончания работы Храма\",\r\n          name: \"hramObjectLocal.finishWorkTime\",\r\n          ...baseTimeFieldProps\r\n        },\r\n        {\r\n          label: \"Отображение священнослужителей при записи на беседу\",\r\n          name: \"hramObjectLocal.visiblePriests\",\r\n          type: \"checkbox\",\r\n          widths: fullWidth\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      blockTitle: \"Деятельность\",\r\n      conditionallyRender: ({ type }) => (type ? type.enum === \"HRAM\" : false),\r\n      fields: [\r\n        {\r\n          label: \"Образовательная\",\r\n          name: \"hramObjectLocal.replace1\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Социальная\",\r\n          name: \"hramObjectLocal.replace2\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Миссионерская\",\r\n          name: \"hramObjectLocal.replace3\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Другая\",\r\n          name: \"hramObjectLocal.replace4\",\r\n          ...baseTextAreaProps\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    label: Yup.string().required(),\r\n    type: Yup.object()\r\n      .nullable()\r\n      .required(),\r\n    parentId: Yup.object().nullable(),\r\n    address: Yup.string(),\r\n    town: Yup.object().nullable(),\r\n    metro: Yup.object().nullable(),\r\n    coordination: Yup.string(),\r\n    hramObjectLocal: Yup.object({\r\n      photo: Yup.object().nullable(),\r\n      description: Yup.string().required(),\r\n      webUrl: Yup.string(),\r\n      contacts: Yup.string(),\r\n      history: Yup.string(),\r\n      religion: Yup.string(),\r\n      startWorkTime: Yup.string().required(),\r\n      finishWorkTime: Yup.string().required(),\r\n      visiblePriests: Yup.bool()\r\n    }).nullable()\r\n  })\r\n};\r\n\r\nconst viewEditForm = {\r\n  title: \"Храма\",\r\n  headerText: \"label\",\r\n  url: \"/api/strMember\",\r\n  projection: \"formMember\",\r\n  method: \"patch\",\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Наименование\",\r\n          name: \"label\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Тип\",\r\n          name: \"type\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strType/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Подчинение\",\r\n          name: \"parentId\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strMember/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          label: \"Адресс\",\r\n          name: \"address\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Город\",\r\n          name: \"town\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strDictTown/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Метро\",\r\n          name: \"metro\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/strDictMetro/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Геолокация\",\r\n          name: \"coordination\",\r\n          type: \"text\"\r\n        },\r\n        { name: \"uniqueId\", hidden: true }\r\n      ]\r\n    }\r\n  ],\r\n  additionalTabs: [\r\n    {\r\n      tabTitle: \"Карточка храма\",\r\n      tabContent: {\r\n        Component: HramTab\r\n      },\r\n      conditionallyRender: ({ firstFormInitialValues: { type } }) =>\r\n        !(type && type.enum === \"HRAM\"),\r\n      tabButtons: [\r\n        {\r\n          Btn: PrimaryButton,\r\n          requiresFormSubmitRef: true,\r\n          conditionallyRender: ({ modal: { mode } }) => mode === \"edit\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    label: Yup.string().required(),\r\n    type: Yup.object()\r\n      .nullable()\r\n      .required(),\r\n    parentId: Yup.object().nullable(),\r\n    address: Yup.string(),\r\n    town: Yup.object().nullable(),\r\n    metro: Yup.object().nullable(),\r\n    coordination: Yup.string()\r\n  })\r\n};\r\n\r\nexport default {\r\n  create: computePropsForFormikMUI({ formObj: createForm, mode: \"create\" }),\r\n  view: computePropsForFormikMUI({ formObj: viewEditForm, mode: \"view\" }),\r\n  edit: computePropsForFormikMUI({ formObj: viewEditForm, mode: \"edit\" }),\r\n  createWorkItem: {\r\n    formObj: {}\r\n  }\r\n};\r\n","import forms from \"./forms\";\r\nimport { constructRebuildReceivedOptionsLabelLabelValueUniqueId } from \"../../rebuildRecieved\";\r\n\r\nexport const churchStructure = {\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administrator_member_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"administrator_structure_member_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"administrator_hram_member_modifier\",\r\n      allowedActions: [\"view\"]\r\n    }\r\n  ],\r\n  filtersPanel: {\r\n    filters: [\r\n      {\r\n        label: \"Наименование\",\r\n        name: \"uniqueId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/strMember/search/present\",\r\n        rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId\r\n      },\r\n      {\r\n        label: \"Тип\",\r\n        name: \"typeCode\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/strType/search/present\",\r\n        rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId\r\n      },\r\n      {\r\n        label: \"Подчинение\",\r\n        name: \"parentId\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/strMember/search/present\",\r\n        rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId\r\n      },\r\n      {\r\n        label: \"Адрес\",\r\n        name: \"address\",\r\n        type: \"text\"\r\n      }\r\n    ]\r\n  },\r\n  url: \"/api/journalMembers\",\r\n  tableHeader: [\r\n    {\r\n      label: \"Наименование\",\r\n      sortable: true,\r\n      path: \"label\",\r\n      width: \"35%\"\r\n    },\r\n    {\r\n      label: \"Тип\",\r\n      sortable: true,\r\n      path: \"type\",\r\n      width: \"15%\"\r\n    },\r\n    {\r\n      label: \"Подчинение\",\r\n      sortable: true,\r\n      path: \"parentLabel\",\r\n      width: \"35%\"\r\n    },\r\n    {\r\n      label: \"Адрес\",\r\n      sortable: true,\r\n      path: \"address\",\r\n      width: \"15%\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\n","import Yup from \"../../../yup\";\r\nimport { computePropsForFormikMUI } from \"../../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport { halfWith } from \"../../../widths\";\r\nimport { baseNumberProps, baseTextAreaProps } from \"../../../baseFieldProps\";\r\n\r\nconst baseForm = {\r\n  title: \"Тип события\",\r\n  titleItem: \"Типа   события\",\r\n  headerText: \"label\",\r\n  url: \"/api/commonAction\",\r\n  method: \"patch\",\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Наименование\",\r\n          name: \"label\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Длительность по умолчанию\",\r\n          name: \"longTime\",\r\n          ...baseNumberProps(),\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Описание\",\r\n          name: \"description\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          name: \"isWork\",\r\n          label: \"Возможность использования в Делах\",\r\n          type: \"checkbox\"\r\n        },\r\n        {\r\n          name: \"isMinistration\",\r\n          label: \"Возможность использования в Богослужениях\",\r\n          type: \"checkbox\"\r\n        },\r\n        {\r\n          name: \"isClaim\",\r\n          label: \"Возможность использования в Заявках\",\r\n          type: \"checkbox\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n\r\nconst forms = {\r\n  view: computePropsForFormikMUI({ formObj: baseForm, mode: \"view\" }),\r\n  edit: computePropsForFormikMUI({\r\n    formObj: {\r\n      ...baseForm,\r\n      validationSchema: Yup.object({\r\n        label: Yup.string().required()\r\n      })\r\n    },\r\n    mode: \"edit\"\r\n  })\r\n};\r\nexport default forms;\r\n","import forms from \"./form\";\r\n\r\nconst actionType = {\r\n  navigationLabel: \"Тип событий\",\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administration_directory_modifier\",\r\n      allowedActions: [\"view\", \"edit\"]\r\n    }\r\n  ],\r\n  title: \"Журнал Типов событий\",\r\n  url: \"/api/journalActions\",\r\n  filtersPanel: {\r\n    filters: [{ label: \"Наименование\", name: \"label\", type: \"text\" }]\r\n  },\r\n  tableHeader: [\r\n    {\r\n      label: \"Наименование\",\r\n      sortable: true,\r\n      path: \"label\"\r\n    },\r\n    {\r\n      label: \"Возможность использования в Делах\",\r\n      sortable: false,\r\n      path: \"isWork\"\r\n    },\r\n    {\r\n      label: \"Возможность использования в Богослужениях\",\r\n      sortable: true,\r\n      path: \"isMinistration\"\r\n    },\r\n    {\r\n      label: \"Возможность использования в Заявках\",\r\n      sortable: true,\r\n      path: \"isClaim\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\nexport default actionType;\r\n","import { computePropsForFormikMUI } from \"../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport { baseTextAreaProps } from \"../../baseFieldProps\";\r\nimport Yup from \"../../yup\";\r\nimport { fullWidth, halfWith } from \"../../widths\";\r\nimport { constructRebuildReceivedOptions } from \"../../rebuildRecieved\";\r\n\r\nconst baseForm = {\r\n  title: \"Информации\",\r\n  titleItem: \"Информации\",\r\n  headerText: \"label\",\r\n  url: \"/api/libraryObject\",\r\n  projection: \"formLibraryObject\",\r\n  method: \"post\",\r\n  doBeforeSend: { select: ({ value }) => value },\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная информация\",\r\n      fields: [\r\n        {\r\n          label: \"Тематика\",\r\n          name: \"type\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/libraryDictType/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptions(\r\n            ({ label, code }) => ({\r\n              label,\r\n              value: `/api/libraryDictType/${code}`\r\n            })\r\n          ),\r\n          rebuildReceivedValue: ({ label, code }) => ({\r\n            label,\r\n            value: `/api/libraryDictType/${code}`\r\n          }),\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Автор\",\r\n          name: \"authorRef\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Наименование\",\r\n          name: \"label\",\r\n          type: \"text\",\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          label: \"Ссылка на внешний ресурс\",\r\n          name: \"url\",\r\n          type: \"text\",\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          label: \"Описание\",\r\n          name: \"description\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          name: \"isPublished\",\r\n          label: \"Опубликован\",\r\n          type: \"checkbox\"\r\n        },\r\n        {\r\n          name: \"file\",\r\n          label: \"Ссылка на файл\",\r\n          type: \"file\",\r\n          widths: fullWidth\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    label: Yup.string().required(),\r\n    type: Yup.object()\r\n      .nullable()\r\n      .required()\r\n  })\r\n};\r\n\r\nexport default {\r\n  create: computePropsForFormikMUI({ formObj: baseForm, mode: \"create\" }),\r\n  view: computePropsForFormikMUI({ formObj: baseForm, mode: \"view\" }),\r\n  edit: computePropsForFormikMUI({\r\n    formObj: {\r\n      ...baseForm,\r\n      method: \"patch\"\r\n    },\r\n    mode: \"edit\"\r\n  })\r\n};\r\n","import forms from \"./forms\";\r\nimport { constructRebuildReceivedOptionsLabelLabelValueLabel } from \"../../rebuildRecieved\";\r\n\r\nexport const library = {\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administrator_library_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"administrator_structure_library_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"administrator_hram_library_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"priest_library_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    },\r\n    {\r\n      functionName: \"assistant_library_modifier\",\r\n      allowedActions: [\"create\", \"view\", \"edit\", \"delete\"]\r\n    }\r\n  ],\r\n  filtersPanel: {\r\n    filters: [\r\n      {\r\n        label: \"Тематика\",\r\n        name: \"type\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/libraryDictType/search/present\",\r\n        rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueLabel\r\n      },\r\n      {\r\n        label: \"Наименование\",\r\n        name: \"label\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Автор\",\r\n        name: \"authorRef\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Добавил\",\r\n        name: \"fullname\",\r\n        type: \"text\"\r\n      }\r\n    ]\r\n  },\r\n  url: \"/api/library/journalLibrary\",\r\n  tableHeader: [\r\n    {\r\n      label: \"Тематика\",\r\n      sortable: true,\r\n      path: \"type\"\r\n    },\r\n    {\r\n      label: \"Наименование\",\r\n      sortable: true,\r\n      path: \"label\"\r\n    },\r\n    {\r\n      label: \"Автор\",\r\n      sortable: true,\r\n      path: \"authorRef\"\r\n    },\r\n    {\r\n      label: \"Признак публикации\",\r\n      sortable: true,\r\n      path: \"published\"\r\n    },\r\n    {\r\n      label: \"Добавил\",\r\n      sortable: true,\r\n      path: \"fullname\"\r\n    },\r\n    {\r\n      label: \"Дата добавления\",\r\n      sortable: true,\r\n      path: \"createdTimestamp\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\n","import { computePropsForFormikMUI } from \"../../../components/modalWrapper/utils/computePropsForForMikMUI\";\r\nimport { fullWidth, halfWith } from \"../../widths\";\r\nimport {\r\n  constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n  rebuildReceivedValueLabelLabelValueUniqueId\r\n} from \"../../rebuildRecieved\";\r\nimport { baseTextAreaProps } from \"../../baseFieldProps\";\r\nimport {\r\n  disableConfirmDialogPrimaryBtn,\r\n  dispatchFetchJournalData,\r\n  dispatchOpenConfirmDialogFormik,\r\n  dispatchOpenSnackBar,\r\n  dispatchPopHeadModal\r\n} from \"../../index\";\r\nimport { store } from \"../../../store\";\r\nimport {\r\n  closeConfirmDialog,\r\n  closeConfirmDialogFormik,\r\n  constructRequest,\r\n  openConfirmDialog\r\n} from \"../../../actions\";\r\n\r\nconst completeConfig = {\r\n  title: \"Подтверждение заявки\",\r\n  formObj: {\r\n    blocks: [\r\n      {\r\n        fields: [\r\n          {\r\n            label: \"Комментарий\",\r\n            name: \"comment\",\r\n            ...baseTextAreaProps\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  initialValues: {\r\n    comment: \"\"\r\n  },\r\n  primaryButtonText: \"Подтвердить\",\r\n  primaryButtonHandler: uniqueId => values =>\r\n    constructRequest(\r\n      {\r\n        url: `/api/claim/confirm/${uniqueId}`,\r\n        method: \"post\",\r\n        data: values\r\n      },\r\n      ({ status }) => {\r\n        disableConfirmDialogPrimaryBtn(true);\r\n        if (status === 200) {\r\n          dispatchOpenSnackBar(`Заявка № \"${uniqueId}\" подтверждена`);\r\n        }\r\n        store.dispatch(closeConfirmDialogFormik());\r\n        dispatchPopHeadModal();\r\n        dispatchFetchJournalData();\r\n      }\r\n    )\r\n};\r\n\r\nconst baseForm = {\r\n  url: \"/api/claim/getById\",\r\n  title: \"Заявки \",\r\n  titleItem: \"Заявка\",\r\n  method: \"get\",\r\n  headerText: \"uniqueId\",\r\n  blocks: [\r\n    {\r\n      blockTitle: \"Основная Информация\",\r\n      fields: [\r\n        {\r\n          label: \"Категория требы/таинства\",\r\n          name: \"commonAction\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/getCommonActionForClaimList\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Статус заявки\",\r\n          name: \"claimDictStatus\",\r\n          type: \"select\",\r\n          dictUrl: \"/api/claimDictStatus/search/present\",\r\n          rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueUniqueId,\r\n          rebuildReceivedValue: rebuildReceivedValueLabelLabelValueUniqueId,\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Номер заявки\",\r\n          name: \"uniqueId\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"В храме\",\r\n          name: \"isHram\",\r\n          type: \"checkbox\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Желаемая дата начала\",\r\n          name: \"firstTimestamp\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Желаемая дата окончания\",\r\n          name: \"endTimestamp\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"ФИО мирянина\",\r\n          name: \"userFullName\",\r\n          type: \"text\",\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          label: \"Телефон мирянина\",\r\n          name: \"phone\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Email мирянина\",\r\n          name: \"email\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Адрес мирянина\",\r\n          name: \"address\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Описание\",\r\n          name: \"description\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          label: \"Результат анкетирования\",\r\n          name: \"anketa\",\r\n          type: \"text\",\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          label: \"Исполнитель\",\r\n          name: \"performer\",\r\n          type: \"text\",\r\n          widths: halfWith\r\n        },\r\n        {\r\n          label: \"Комментарий\",\r\n          name: \"comment\",\r\n          ...baseTextAreaProps\r\n        },\r\n        {\r\n          name: \"isFree\",\r\n          hidden: true\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  additionalActionButtonsDependedOnProps: [\r\n    {\r\n      text: \"Взять в работу\",\r\n      variant: \"contained\",\r\n      style: {\r\n        backgroundColor: \"#357a38\",\r\n        color: \"white\"\r\n      },\r\n      onClick: ({ firstFormInitialValues: { uniqueId } }) => {\r\n        store.dispatch(\r\n          openConfirmDialog({\r\n            mainText: `взять в работу заявку № \"${uniqueId}\"?`,\r\n            primaryButtonHandler: () => {\r\n              disableConfirmDialogPrimaryBtn(true);\r\n              constructRequest(\r\n                {\r\n                  url: `/api/claim/toWork/${uniqueId}`,\r\n                  method: \"post\"\r\n                },\r\n                ({ status }) => {\r\n                  disableConfirmDialogPrimaryBtn(true);\r\n                  if (status === 200) {\r\n                    dispatchOpenSnackBar(\r\n                      `Заявка № \"${uniqueId}\" успешно взята в работу`\r\n                    );\r\n                  }\r\n                  store.dispatch(closeConfirmDialog());\r\n                  dispatchPopHeadModal();\r\n                  dispatchFetchJournalData();\r\n                }\r\n              );\r\n            }\r\n          })\r\n        );\r\n      },\r\n      conditionallyRender: ({\r\n        firstFormInitialValues: { claimDictStatus },\r\n        modal: { mode }\r\n      }) => claimDictStatus.enum === \"NEW\" && mode === \"view\"\r\n    },\r\n    {\r\n      text: \"Подтвердить\",\r\n      variant: \"contained\",\r\n      style: {\r\n        backgroundColor: \"#357a38\",\r\n        color: \"white\"\r\n      },\r\n      onClick: ({ firstFormInitialValues: { uniqueId } }) => {\r\n        dispatchOpenConfirmDialogFormik({\r\n          ...completeConfig,\r\n          primaryButtonHandler: completeConfig.primaryButtonHandler(uniqueId)\r\n        });\r\n      },\r\n      conditionallyRender: ({\r\n        firstFormInitialValues: { claimDictStatus },\r\n        modal: { mode }\r\n      }) => claimDictStatus.enum === \"IN_PROGRESS\" && mode === \"view\"\r\n    },\r\n    {\r\n      text: \"Скрыть\",\r\n      variant: \"contained\",\r\n      style: {\r\n        backgroundColor: \"#357a38\",\r\n        color: \"white\"\r\n      },\r\n      onClick: ({ firstFormInitialValues: { uniqueId } }) => {\r\n        store.dispatch(\r\n          openConfirmDialog({\r\n            mainText: `скрыть заявку № \"${uniqueId}\"?`,\r\n            primaryButtonHandler: () => {\r\n              disableConfirmDialogPrimaryBtn(true);\r\n              constructRequest(\r\n                {\r\n                  url: `/api/claim/hide/${uniqueId}`,\r\n                  method: \"post\"\r\n                },\r\n                ({ status }) => {\r\n                  disableConfirmDialogPrimaryBtn(true);\r\n                  if (status === 200) {\r\n                    dispatchOpenSnackBar(\r\n                      `Заявка № \"${uniqueId}\" успешно скрыта`\r\n                    );\r\n                  }\r\n                  store.dispatch(closeConfirmDialog());\r\n                  dispatchPopHeadModal();\r\n                  dispatchFetchJournalData();\r\n                }\r\n              );\r\n            }\r\n          })\r\n        );\r\n      },\r\n      conditionallyRender: ({\r\n        firstFormInitialValues: { claimDictStatus },\r\n        modal: { mode }\r\n      }) => claimDictStatus.enum === \"CLOSED\" && mode === \"view\"\r\n    },\r\n    {\r\n      text: \"Заблокировать мирянина\",\r\n      variant: \"contained\",\r\n      style: {\r\n        backgroundColor: \"#357a38\",\r\n        color: \"white\"\r\n      },\r\n      onClick: ({ firstFormInitialValues: { uniqueId, userFullName } }) => {\r\n        store.dispatch(\r\n          openConfirmDialog({\r\n            mainText: `заблокировать мирянина \"${userFullName}\"?`,\r\n            primaryButtonHandler: () => {\r\n              disableConfirmDialogPrimaryBtn(true);\r\n              constructRequest(\r\n                {\r\n                  url: `/api/claim/block/${uniqueId}`,\r\n                  method: \"post\"\r\n                },\r\n                ({ status }) => {\r\n                  disableConfirmDialogPrimaryBtn(true);\r\n                  if (status === 200) {\r\n                    dispatchOpenSnackBar(\r\n                      `Мирянин \"${userFullName}\" заблокирован`\r\n                    );\r\n                  }\r\n                  store.dispatch(closeConfirmDialog());\r\n                  dispatchPopHeadModal();\r\n                  dispatchFetchJournalData();\r\n                }\r\n              );\r\n            }\r\n          })\r\n        );\r\n      },\r\n      conditionallyRender: ({\r\n        firstFormInitialValues: { claimDictStatus },\r\n        modal: { mode }\r\n      }) => claimDictStatus.enum === \"CLOSED\" && mode === \"view\"\r\n    },\r\n    {\r\n      text: \"Отменить\",\r\n      variant: \"contained\",\r\n      style: {\r\n        backgroundColor: \"#357a38\",\r\n        color: \"white\"\r\n      },\r\n      onClick: ({ firstFormInitialValues: { uniqueId } }) => {\r\n        store.dispatch(\r\n          openConfirmDialog({\r\n            mainText: `отменить заявку № \"${uniqueId}\"?`,\r\n            primaryButtonHandler: () => {\r\n              disableConfirmDialogPrimaryBtn(true);\r\n              constructRequest(\r\n                {\r\n                  url: `/api/claim/cancel/${uniqueId}`,\r\n                  method: \"post\"\r\n                },\r\n                ({ status }) => {\r\n                  disableConfirmDialogPrimaryBtn(true);\r\n                  if (status === 200) {\r\n                    dispatchOpenSnackBar(`Заявка № \"${uniqueId}\" отменена`);\r\n                  }\r\n                  store.dispatch(closeConfirmDialog());\r\n                  dispatchPopHeadModal();\r\n                  dispatchFetchJournalData();\r\n                }\r\n              );\r\n            }\r\n          })\r\n        );\r\n      },\r\n      conditionallyRender: ({\r\n        firstFormInitialValues: { claimDictStatus },\r\n        modal: { mode }\r\n      }) => claimDictStatus.enum === \"IN_PROGRESS\" && mode === \"view\"\r\n    }\r\n  ]\r\n};\r\n\r\nconst forms = {\r\n  view: computePropsForFormikMUI({ formObj: baseForm, mode: \"view\" })\r\n};\r\nexport default forms;\r\n","import forms from \"./form\";\r\nimport { constructRebuildReceivedOptionsLabelLabelValueLabel } from \"../../rebuildRecieved\";\r\n\r\nconst baseJournal = {\r\n  navigationLabel: \"\",\r\n  requiresFunction: [\r\n    {\r\n      functionName: \"administrator_hram_claim_view\",\r\n      allowedActions: [\"view\"]\r\n    },\r\n    {\r\n      functionName: \"priest_claim_view\",\r\n      allowedActions: [\"view\"]\r\n    },\r\n    {\r\n      functionName: \"assistant_claim_view\",\r\n      allowedActions: [\"view\"]\r\n    }\r\n  ],\r\n  url: \"/api/journalClaimObjects\",\r\n  filtersPanel: {\r\n    filters: [\r\n      {\r\n        label: \"Категория требы/таинства\",\r\n        name: \"commonAction\",\r\n        type: \"select\",\r\n        dictUrl: \"/api/getCommonActionForClaimList\",\r\n        rebuildReceivedOptions: constructRebuildReceivedOptionsLabelLabelValueLabel\r\n      },\r\n      {\r\n        label: \"ФИО мирянина\",\r\n        name: \"userFullName\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Телефон мирянина\",\r\n        name: \"phone\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Адрес оказания требы\",\r\n        name: \"userAddress\",\r\n        type: \"text\"\r\n      },\r\n      {\r\n        label: \"Время проведения таинства\",\r\n        name: \"rangeEvent\",\r\n        type: \"date-range\"\r\n      }\r\n    ]\r\n  },\r\n  tableHeader: [\r\n    {\r\n      label: \"Номер заявки\",\r\n      sortable: true,\r\n      path: \"uniqueId\"\r\n    },\r\n    {\r\n      label: \"Дата заявки\",\r\n      sortable: true,\r\n      path: \"createdTimestamp\"\r\n    },\r\n    {\r\n      label: \"Категория требы/таинства\",\r\n      sortable: true,\r\n      path: \"commonAction\"\r\n    },\r\n    {\r\n      label: \"В храме\",\r\n      sortable: true,\r\n      path: \"isHramText\"\r\n    },\r\n    {\r\n      label: \"ФИО мирянина\",\r\n      sortable: true,\r\n      path: \"userFullName\"\r\n    },\r\n    {\r\n      label: \"Телефон мирянина\",\r\n      sortable: true,\r\n      path: \"phone\"\r\n    },\r\n    {\r\n      label: \"Адрес оказания требы\",\r\n      sortable: true,\r\n      path: \"userAddress\"\r\n    },\r\n    {\r\n      label: \"Время проведения таинства\",\r\n      sortable: true,\r\n      path: \"rangeEventTimestamp\"\r\n    }\r\n  ],\r\n  forms: { ...forms }\r\n};\r\nexport default baseJournal;\r\n","import baseJournal from \"../journal\";\r\n\r\nconst claimNew = {\r\n  ...baseJournal,\r\n  navigationLabel: \"Новые\",\r\n  url: () => \"/api/getNewClaimObjectsList\"\r\n};\r\nexport default claimNew;\r\n","import baseJournal from \"../journal\";\r\n\r\nconst claimInWork = {\r\n  ...baseJournal,\r\n  navigationLabel: \"В работе\",\r\n  url: () => \"/api/getProgressClaimObjectsList\"\r\n};\r\nexport default claimInWork;\r\n","import baseJournal from \"../journal\";\r\n\r\nconst claimFree = {\r\n  ...baseJournal,\r\n  navigationLabel: \"Свободные\",\r\n  url: () => \"/api/getFreeClaimObjectsList\"\r\n};\r\nexport default claimFree;\r\n","import baseJournal from \"../journal\";\r\n\r\nconst claimCompleted = {\r\n  ...baseJournal,\r\n  navigationLabel: \"Завершенные\",\r\n  url: () => \"/api/getCloseClaimObjectsList\"\r\n};\r\nexport default claimCompleted;\r\n","import {\r\n  ChromeReaderMode,\r\n  InsertChart,\r\n  Message,\r\n  Home,\r\n  Settings,\r\n  Group,\r\n  PermContactCalendar,\r\n  LibraryBooks,\r\n  ViewList\r\n} from \"@material-ui/icons\";\r\nimport users from \"./pages/users/journal\";\r\nimport settings from \"./pages/settings/journal\";\r\nimport members from \"./pages/management/members/journal\";\r\nimport services from \"./pages/management/services/journal\";\r\nimport mvExchange from \"./pages/management/mvExchange/journal\";\r\nimport nsi from \"./pages/management/nsi/journal\";\r\nimport statMV from \"./pages/statistics/reports/journal\";\r\nimport logMv from \"./pages/statistics/logMV/journal\";\r\nimport { schedule } from \"./pages/schedule/journal\";\r\nimport { churchStructure } from \"./pages/churchStructure/journal\";\r\nimport actionType from \"./pages/directory/actionType/journal\";\r\nimport { library } from \"./pages/library/journal\";\r\nimport claimNew from \"./pages/claim/new/journal\";\r\nimport claimInWork from \"./pages/claim/inWork/journal\";\r\nimport claimFree from \"./pages/claim/free/journal\";\r\nimport claimCompleted from \"./pages/claim/completed/journal\";\r\n\r\nexport const INITIAL_PARAMETERS = {\r\n  schedule: {\r\n    label: \"Расписание храма\",\r\n    icon: PermContactCalendar,\r\n    page: schedule\r\n  },\r\n  churchStructure: {\r\n    label: \"Структура церкви\",\r\n    icon: Home,\r\n    page: churchStructure\r\n  },\r\n  serviceMan: {\r\n    label: \"Служители\",\r\n    icon: Group,\r\n    page: users\r\n  },\r\n  management: {\r\n    label: \"Управление\",\r\n    icon: ChromeReaderMode,\r\n    pages: {\r\n      members,\r\n      services,\r\n      mvExchange,\r\n      nsi\r\n    }\r\n  },\r\n  claim: {\r\n    label: \"Заявки\",\r\n    icon: Message,\r\n    pages: {\r\n      new: { ...claimNew },\r\n      inWork: { ...claimInWork },\r\n      submitting: { ...claimCompleted },\r\n      free: { ...claimFree }\r\n    }\r\n  },\r\n  statistics: {\r\n    label: \"Статистика\",\r\n    icon: InsertChart,\r\n    pages: {\r\n      reports: { ...statMV },\r\n      logMV: { ...logMv }\r\n    }\r\n  },\r\n  library: {\r\n    label: \"Информация\",\r\n    icon: LibraryBooks,\r\n    page: library\r\n  },\r\n  directory: { label: \"Справочники\", icon: ViewList, pages: { actionType } },\r\n  settings: {\r\n    label: \"Настройки\",\r\n    icon: Settings,\r\n    page: settings\r\n  }\r\n};\r\n","import axios from \"axios\";\r\nimport { set } from \"lodash\";\r\nimport {\r\n  SAVE_FETCHED_DATA,\r\n  SET_ACCESS_TOKEN,\r\n  SET_AUTH,\r\n  SET_AUTHENTICATED,\r\n  SET_LOGIN_ERROR_MESSAGE,\r\n  SET_BASE_URL,\r\n  SET_CURRENT_USER_OBJECT,\r\n  SET_ALLOWED_ACTIONS,\r\n  SET_ACTIVE_STEP,\r\n  POP_HEAD_MODAL,\r\n  TOGGLE_CONFIRM_DIALOG,\r\n  HIDE_CONFIRM_DIALOG,\r\n  PUSH_MODAL,\r\n  TOGGLE_SNACKBAR,\r\n  CLOSE_CONFIRM_DIALOG_FORMIK,\r\n  OPEN_CONFIRM_DIALOG_FORMIK,\r\n  SET_COMPUTED_URL,\r\n  SET_ROWS_PER_PAGE,\r\n  NEXT_PAGE,\r\n  PREVIOUS_PAGE,\r\n  SET_PAGE,\r\n  SET_SORTABLE,\r\n  SET_FILTERS_OPTIONS_MAP,\r\n  OPEN_SCHEDULE_CREATION_MASTER,\r\n  CLOSE_SCHEDULE_CREATION_MASTER\r\n} from \"../constants\";\r\nimport { store } from \"../store\";\r\nimport { constructAllowedActionsForAllJournals } from \"../utils/commonFormFunctions\";\r\nimport customGlobalHistory from \"../customGlobalHistory\";\r\nimport { defaultErrorHandler } from \"../utils/defaultErrorHandler\";\r\nimport { INITIAL_PARAMETERS } from \"../constants/intialParameters\";\r\n\r\n// перехватчик запросов, добавляет access token ко всем запросам\r\naxios.interceptors.request.use(\r\n  config => {\r\n    const token = store.getState().auth.accessToken;\r\n\r\n    if (token != null) {\r\n      return {\r\n        ...config,\r\n        headers: {\r\n          ...config.headers,\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      };\r\n    }\r\n    return config;\r\n  },\r\n  error => Promise.reject(error)\r\n);\r\n\r\n// перехватчик ответов, проверяет если HTTP статус ответа равен 401 вызывает действие обнуляющее объект аутентификации\r\naxios.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    if (typeof error.response === \"undefined\") {\r\n      return Promise.reject(error);\r\n    }\r\n    if (error.response.data.message === \"invalid_token\") {\r\n      store.dispatch({\r\n        type: SET_AUTH,\r\n        payload: { isAuthenticated: false, accessToken: null }\r\n      });\r\n    }\r\n    if (error.response.status === 401) {\r\n      store.dispatch(setAuth(false, null));\r\n    }\r\n\r\n    // todo понять как из этого контекста можно выполнить редирект\r\n    // срабатывает когда бек не отвечает\r\n    if (error.response.status === 502) {\r\n      customGlobalHistory.push(\"/error/Проводятся технические работы\");\r\n    }\r\n\r\n    // срабатывает в dev режиме когда бек не отвечает\r\n    if (\r\n      typeof error.response.data === \"string\" &&\r\n      error.response.data.search(\"Proxy error: Could not proxy request\") !== -1\r\n    ) {\r\n      customGlobalHistory.push(\"/error/Проводятся технические работы\");\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const setAuth = (isAuthenticated, accessToken) => dispatch =>\r\n  dispatch({\r\n    type: SET_AUTH,\r\n    payload: { isAuthenticated, accessToken }\r\n  });\r\n\r\nexport const setAccessToken = accessToken => dispatch =>\r\n  dispatch({\r\n    type: SET_ACCESS_TOKEN,\r\n    payload: accessToken\r\n  });\r\n\r\nexport const loadUserInfo = () => axios.get(\"/api/user/getUserRolesFunctions\");\r\n\r\nexport const setErrorMessage = errorMessage => dispatch =>\r\n  dispatch({\r\n    type: SET_LOGIN_ERROR_MESSAGE,\r\n    payload: {\r\n      errorMessage\r\n      // errorMessage: e.response.data.error_description\r\n    }\r\n  });\r\n\r\nexport const setCurrentUsersInfo = (\r\n  userId,\r\n  surnameInitials,\r\n  role,\r\n  functions,\r\n  memberId,\r\n  memberFullName\r\n) => dispatch =>\r\n  dispatch({\r\n    type: SET_CURRENT_USER_OBJECT,\r\n    payload: {\r\n      role,\r\n      functions,\r\n      surnameInitials,\r\n      userId,\r\n      memberId,\r\n      memberFullName\r\n    }\r\n  });\r\n\r\nexport const setAllowedActions = () => (dispatch, getState) =>\r\n  dispatch({\r\n    type: SET_ALLOWED_ACTIONS,\r\n    payload: constructAllowedActionsForAllJournals(\r\n      getState().auth.functions,\r\n      INITIAL_PARAMETERS\r\n    )\r\n  });\r\n\r\nexport const setIsAuthenticated = v => dispatch =>\r\n  dispatch({\r\n    type: SET_AUTHENTICATED,\r\n    payload: v\r\n  });\r\n\r\nexport const getAccessToken = (username, password) =>\r\n  axios({\r\n    method: \"post\",\r\n    url: \"/oauth/token\",\r\n    auth: {\r\n      username:\r\n        \"e2c2ded61b3ebff84b65e78c0f15e6ce38187c521b13c94c20f2de168895d555\",\r\n      password:\r\n        \"3f55062869ebad5af93d27a0cfff957f73d8a01bf505f66d5cf69a77d11e6909\"\r\n    },\r\n    headers: {\r\n      \"Content-type\": \"application/x-www-form-urlencoded; charset=utf-8\"\r\n    },\r\n    params: {\r\n      grant_type: \"password\",\r\n      username,\r\n      password\r\n    }\r\n  });\r\n\r\nexport const setTokenThenLoadUserInfo = token => dispatch => {\r\n  return Promise.resolve(dispatch(setAccessToken(token)))\r\n    .then(() => loadUserInfo())\r\n    .then(({ data }) => {\r\n      const { roles, surnameInitials, userId, memberId, memberFullName } = data;\r\n      const { role, functions } = roles[0];\r\n      return dispatch(\r\n        setCurrentUsersInfo(\r\n          userId,\r\n          surnameInitials,\r\n          role,\r\n          functions,\r\n          memberId,\r\n          memberFullName\r\n        )\r\n      );\r\n    })\r\n    .then(() => dispatch(setAllowedActions()))\r\n    .then(() => dispatch(setErrorMessage(\"\")))\r\n    .then(() => dispatch(setIsAuthenticated(true)))\r\n    .catch(() =>\r\n      Promise.all([\r\n        dispatch(setAuth(false, null)),\r\n        dispatch(setErrorMessage(\"Неверный логин или пароль\"))\r\n      ])\r\n    );\r\n};\r\n\r\nexport const authenticateUser = (username, password) => dispatch =>\r\n  getAccessToken(username, password)\r\n    .then(({ data }) => dispatch(setAccessToken(data.access_token)))\r\n    .then(() => loadUserInfo())\r\n    .then(({ data }) => {\r\n      const { roles, surnameInitials, userId, memberId, memberFullName } = data;\r\n      const { role, functions } = roles[0];\r\n      return dispatch(\r\n        setCurrentUsersInfo(\r\n          userId,\r\n          surnameInitials,\r\n          role,\r\n          functions,\r\n          memberId,\r\n          memberFullName\r\n        )\r\n      );\r\n    })\r\n    .then(() => dispatch(setAllowedActions()))\r\n    .then(() => dispatch(setErrorMessage(\"\")))\r\n    .then(() => dispatch(setIsAuthenticated(true)))\r\n    .catch(() =>\r\n      Promise.all([\r\n        dispatch(setAuth(false, null)),\r\n        dispatch(setErrorMessage(\"Неверный логин или пароль\"))\r\n      ])\r\n    );\r\n\r\nexport const logout = () => dispatch =>\r\n  Promise.resolve(dispatch(setAuth(false, null)));\r\n\r\nexport const filtersReducer = (accumulator, currentValue) => {\r\n  if (currentValue[1] !== \"\" && currentValue[1] !== null) {\r\n    if (typeof currentValue[1] !== \"object\") {\r\n      return `${accumulator}&${currentValue[0]}=${currentValue[1]}`;\r\n    }\r\n    if (Array.isArray(currentValue[1])) {\r\n      let joo = accumulator;\r\n      currentValue[1].forEach(item => {\r\n        joo += `&${currentValue[0]}=${item}`;\r\n      });\r\n      return joo;\r\n    }\r\n    if (Object.keys(currentValue[1]).length > 0) {\r\n      return `${accumulator}&${currentValue[0]}=${currentValue[1].value}`;\r\n    }\r\n  }\r\n  return accumulator;\r\n};\r\n\r\nconst sortsReducer = (accumulator, currentValue) =>\r\n  `${accumulator}&s=${currentValue.path},${currentValue.value}`;\r\n\r\nexport function addFiltersToUrl(computedFilters, finalUrl) {\r\n  const filtersToApply = Object.entries(computedFilters);\r\n  let resultingUrl = finalUrl.includes(\"?\") ? finalUrl : `${finalUrl}?`;\r\n  if (filtersToApply.length > 0) {\r\n    resultingUrl = filtersToApply.reduce(filtersReducer, resultingUrl);\r\n  }\r\n  return resultingUrl;\r\n}\r\n\r\nexport const computeUrl = () => (dispatch, getState) => {\r\n  const {\r\n    sortable,\r\n    pagination: { rowsPerPage, page },\r\n    baseUrl\r\n  } = getState().journalReducer;\r\n  const { computedFilters } = getState().filtersReducer;\r\n\r\n  // кастыль придуманный женей чтоб сделать захаркоженную фильтрацию\r\n  let finalUrl = typeof baseUrl === \"function\" ? baseUrl() : baseUrl.slice();\r\n\r\n  if (!finalUrl.includes(\"?\")) {\r\n    finalUrl += \"?\";\r\n  }\r\n  if (sortable.length > 0) {\r\n    finalUrl = sortable.reduce(sortsReducer, finalUrl);\r\n  }\r\n  finalUrl = addFiltersToUrl(computedFilters, finalUrl);\r\n  finalUrl += `&p=${page - 1}&l=${rowsPerPage}`;\r\n  return Promise.resolve(\r\n    dispatch({ type: SET_COMPUTED_URL, payload: finalUrl })\r\n  );\r\n};\r\n\r\nexport const setRowsPerPage = rowsPerPage => dispatch =>\r\n  dispatch({ type: SET_ROWS_PER_PAGE, payload: rowsPerPage });\r\n\r\nexport const fetchJournalData = (dispatch, getState) => {\r\n  axios\r\n    .get(getState().journalReducer.computedUrl)\r\n    .then(response => {\r\n      dispatch({ type: SAVE_FETCHED_DATA, payload: response.data });\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n};\r\n\r\nexport const nextPage = dispatch => dispatch({ type: NEXT_PAGE });\r\n\r\nexport const prevPage = dispatch => dispatch({ type: PREVIOUS_PAGE });\r\n\r\nexport const setPage = page => dispatch =>\r\n  dispatch({ type: SET_PAGE, payload: page });\r\n\r\nexport const saveComputedUrl = url => dispatch =>\r\n  dispatch({ type: SET_COMPUTED_URL, payload: url });\r\n\r\nexport const computeUrlThenFetchJournalData = () => dispatch => {\r\n  return dispatch(computeUrl()).then(() => dispatch(fetchJournalData));\r\n};\r\n\r\nexport const setActiveStep = (step, passProps) => ({\r\n  type: SET_ACTIVE_STEP,\r\n  payload: { activeStep: step, passProps }\r\n});\r\n\r\nexport const incrementActiveStep = passProps => (dispatch, getState) => {\r\n  const {\r\n    stepperReducer: { activeStep }\r\n  } = getState();\r\n  dispatch(setActiveStep(activeStep + 1, passProps));\r\n};\r\n\r\nexport const decrementActiveStep = passProps => (dispatch, getState) => {\r\n  const {\r\n    stepperReducer: { activeStep }\r\n  } = getState();\r\n  dispatch(setActiveStep(activeStep - 1, passProps));\r\n};\r\n\r\nexport const popHeadModal = () => dispatch =>\r\n  Promise.resolve(dispatch({ type: POP_HEAD_MODAL }));\r\n\r\nexport const pushHeadModal = modal => (dispatch, getState) => {\r\n  if (\r\n    getState().journalReducer.modalState.openedModals.some(\r\n      x =>\r\n        x.category === modal.category &&\r\n        x.page === modal.page &&\r\n        x.item.uniqueId === modal.item.uniqueId\r\n    )\r\n  ) {\r\n    return dispatch(openSnackBar(\"Карточка данного объекта уже открыта\"));\r\n  }\r\n  return dispatch({ type: PUSH_MODAL, payload: modal });\r\n};\r\n\r\nexport const popHeadModalThenPushModal = modal => dispatch =>\r\n  dispatch(popHeadModal()).then(() => dispatch(pushHeadModal(modal)));\r\n\r\nexport const openConfirmDialog = payload => dispatch =>\r\n  dispatch({\r\n    type: TOGGLE_CONFIRM_DIALOG,\r\n    payload: { open: true, ...payload }\r\n  });\r\n\r\nexport const closeConfirmDialog = () => dispatch =>\r\n  dispatch({ type: HIDE_CONFIRM_DIALOG });\r\n\r\nexport const openSnackBar = message => dispatch =>\r\n  dispatch({\r\n    type: TOGGLE_SNACKBAR,\r\n    payload: { message, isSnackBarOpened: true }\r\n  });\r\n\r\nexport const closeConfirmDialogFormik = () => dispatch =>\r\n  dispatch({ type: CLOSE_CONFIRM_DIALOG_FORMIK });\r\n\r\nexport const openConfirmDialogFormik = payload => dispatch =>\r\n  dispatch({\r\n    type: OPEN_CONFIRM_DIALOG_FORMIK,\r\n    payload: { open: true, ...payload }\r\n  });\r\n\r\nexport const openScheduleCreationMaster = () => ({\r\n  type: OPEN_SCHEDULE_CREATION_MASTER\r\n});\r\n\r\nexport const closeScheduleCreationMaster = () => ({\r\n  type: CLOSE_SCHEDULE_CREATION_MASTER\r\n});\r\n\r\nexport const constructRequest = (axiosConfig, handleResponse, handleError) => {\r\n  axios(axiosConfig)\r\n    .then(response => {\r\n      if (handleResponse) {\r\n        handleResponse(response);\r\n      }\r\n    })\r\n    .catch(error => {\r\n      if (handleError) {\r\n        handleError(error);\r\n      } else defaultErrorHandler(error);\r\n    });\r\n};\r\n\r\nexport const setSortable = name => dispatch =>\r\n  Promise.resolve(dispatch({ type: SET_SORTABLE, payload: name }));\r\n\r\nexport const setBaseUrl = url => ({\r\n  type: SET_BASE_URL,\r\n  payload: url\r\n});\r\n\r\nexport const setFilterPanelOptionsMap = optionsMap => ({\r\n  type: SET_FILTERS_OPTIONS_MAP,\r\n  payload: optionsMap\r\n});\r\n\r\nexport const loadFiltersOptions = (config, source) => dispatch => {\r\n  axios\r\n    .all(\r\n      config.map(item =>\r\n        axios.get(item.urlToDownload, {\r\n          cancelToken: source.token\r\n        })\r\n      )\r\n    )\r\n    .then(response => {\r\n      const downloaded = {};\r\n      config.forEach(\r\n        (\r\n          {\r\n            whereToStore,\r\n            rebuildReceivedValue,\r\n            postLoadDoSomethingThenPassResultAsProp\r\n          },\r\n          index\r\n        ) => {\r\n          const { data } = response[index];\r\n\r\n          set(\r\n            downloaded,\r\n            whereToStore,\r\n            rebuildReceivedValue\r\n              ? rebuildReceivedValue(data)\r\n              : { options: data, loaded: true }\r\n          );\r\n\r\n          if (postLoadDoSomethingThenPassResultAsProp) {\r\n            const {\r\n              func,\r\n              passResultAs\r\n            } = postLoadDoSomethingThenPassResultAsProp;\r\n            set(downloaded, passResultAs, func(data));\r\n          }\r\n        }\r\n      );\r\n      return downloaded;\r\n    })\r\n    .then(map => dispatch(setFilterPanelOptionsMap(map.optionsMap)))\r\n    .catch(error => {\r\n      if (!axios.isCancel(error)) {\r\n        defaultErrorHandler(error);\r\n      }\r\n    });\r\n};\r\n","import React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport LockIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Redirect, withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { hasIn } from \"lodash\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { authenticateUser } from \"../actions\";\r\nimport { dispatchUserAuthSetFunctions } from \"../constants\";\r\nimport { FormikMUI } from \"./formikMUi/formikNewRealisation\";\r\nimport { phoneMask } from \"../constants/masks\";\r\nimport { fullWidth } from \"../constants/widths\";\r\nimport Yup from \"../constants/yup\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  layout: {\r\n    width: \"auto\",\r\n    display: \"block\", // Fix IE11 issue.\r\n    marginLeft: theme.spacing.unit * 3,\r\n    marginRight: theme.spacing.unit * 3,\r\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n      width: 400\r\n    }\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing.unit * 6,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme\r\n      .spacing.unit * 3}px`\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing.unit,\r\n    backgroundColor: theme.palette.secondary.main\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE11 issue.\r\n    marginTop: theme.spacing.unit\r\n  },\r\n  submit: {\r\n    marginTop: theme.spacing.unit * 3\r\n  },\r\n  icon: {\r\n    height: \"30px\",\r\n    marginTop: \"-6px\",\r\n    marginBottom: \"-6px\",\r\n    marginLeft: theme.spacing.unit\r\n  },\r\n  wrapper: {\r\n    height: \"100vh\"\r\n  }\r\n}));\r\n\r\nconst getFirstOwnPropertyKey = o => Object.keys(o)[0];\r\n\r\nconst getFirstAllowedJournal = obj => {\r\n  const firstCategoryKey = getFirstOwnPropertyKey(obj);\r\n  const firstPageKey = Array.isArray(obj[firstCategoryKey])\r\n    ? \"\"\r\n    : getFirstOwnPropertyKey(obj[firstCategoryKey]);\r\n  return `/journal/${firstCategoryKey}/${firstPageKey}`;\r\n};\r\n\r\nconst formObj = {\r\n  blocks: [\r\n    {\r\n      fields: [\r\n        {\r\n          name: \"login\",\r\n          type: \"formatted\",\r\n          label: \"Логин(Телефон)\",\r\n          mask: phoneMask,\r\n          widths: fullWidth\r\n        },\r\n        {\r\n          name: \"password\",\r\n          label: \"Пароль\",\r\n          type: \"password\",\r\n          widths: fullWidth\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  validationSchema: Yup.object({\r\n    login: Yup.string().required(\"Введите телефон\"),\r\n    password: Yup.string().required(\"Введите пароль\")\r\n  })\r\n};\r\n\r\nconst SignIn = props => {\r\n  const {\r\n    isAuthenticated,\r\n    allowedActions,\r\n    errorMessage,\r\n    onSubmitHandle,\r\n    match\r\n  } = props;\r\n\r\n  const classes = getStyles();\r\n\r\n  // в компонент отправляют токен редиректом с ЕСИА\r\n  if (match) {\r\n    const {\r\n      params: { token }\r\n    } = match;\r\n    if (token) {\r\n      dispatchUserAuthSetFunctions(token);\r\n    }\r\n  }\r\n\r\n  if (isAuthenticated) {\r\n    const { location } = props;\r\n    let from = {};\r\n    if (\r\n      location &&\r\n      location.state &&\r\n      location.state.from &&\r\n      location.state.from.pathname &&\r\n      (location.state.from.pathname !== \"/\" ||\r\n        location.state.from.pathname !== \"\")\r\n    ) {\r\n      const {\r\n        state: {\r\n          from: { pathname }\r\n        }\r\n      } = location;\r\n\r\n      // todo провверить ситуацию когда авторизованный пользователь с имеющимися на разрешениями открыл модалку,\r\n      //  к примеру затем у него закончился токен и его редиректнуло на лог, он авторизуется под другим пользователем\r\n      //  и попадает обратно и у него откроется модалка к которой у него нет доступа.....\r\n      from = hasIn(\r\n        allowedActions,\r\n        pathname.replace(\"/journal/\", \"\").replace(\"/\", \".\")\r\n      )\r\n        ? location.state.from\r\n        : { pathname: getFirstAllowedJournal(allowedActions) };\r\n    } else {\r\n      from = { pathname: getFirstAllowedJournal(allowedActions) };\r\n    }\r\n    return <Redirect to={from} />;\r\n  }\r\n  let submitRef = null;\r\n  return (\r\n    <React.Fragment>\r\n      <CssBaseline />\r\n      <Grid\r\n        container\r\n        alignItems=\"center\"\r\n        justify=\"center\"\r\n        className={classes.wrapper}\r\n        direction=\"column\"\r\n      >\r\n        <Grid item>\r\n          <Grid\r\n            container\r\n            alignItems=\"center\"\r\n            justify=\"space-between\"\r\n            alignContent=\"center\"\r\n            direction=\"column\"\r\n          >\r\n            <Grid>\r\n              <img\r\n                // todo заменить лого\r\n                src=\"/logo_login.png\"\r\n                alt=\"logo\"\r\n                style={{\r\n                  height: \"100px\",\r\n                  color: \"inherit\"\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid>\r\n              <Typography\r\n                // todo заменить текст\r\n                align=\"center\"\r\n                variant=\"h6\"\r\n                style={{ width: \"690px\" }}\r\n              >\r\n                «ХРАМ ОНЛАЙН»\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid item className={classes.layout}>\r\n          <Paper className={classes.paper}>\r\n            <Avatar className={classes.avatar}>\r\n              <LockIcon />\r\n            </Avatar>\r\n            <Typography variant=\"h6\">ВХОД В СИСТЕМУ</Typography>\r\n            <FormikMUI\r\n              style={{ paddingLeft: 0, paddingRight: 0 }}\r\n              initialValues={{ login: \"\", password: \"\" }}\r\n              formObj={formObj}\r\n              onSubmit={(values, { setSubmitting }) => {\r\n                onSubmitHandle(values);\r\n              }}\r\n              bindFormSubmit={ref => {\r\n                submitRef = ref;\r\n              }}\r\n            />\r\n            <Button\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                if (submitRef) {\r\n                  submitRef();\r\n                }\r\n              }}\r\n            >\r\n              Войти\r\n            </Button>\r\n            {<h3 style={{ color: \"red\" }}>{errorMessage}</h3>}\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n  errorMessage: state.auth.errorMessage,\r\n  allowedActions: state.wrapperReducer.allowedActions\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onSubmitHandle: ({ login, password }) =>\r\n    dispatch(authenticateUser(login, password))\r\n});\r\n\r\nconst Login = withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(SignIn)\r\n);\r\n\r\nSignIn.defaultProps = {\r\n  errorMessage: \"\"\r\n};\r\n\r\nSignIn.propTypes = {\r\n  onSubmitHandle: PropTypes.func.isRequired,\r\n  isAuthenticated: PropTypes.bool.isRequired,\r\n  errorMessage: PropTypes.string,\r\n  history: PropTypes.shape({}).isRequired,\r\n  allowedActions: PropTypes.shape({}).isRequired\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { connect } from \"react-redux\";\r\nimport { Snackbar } from \"@material-ui/core\";\r\nimport { TOGGLE_SNACKBAR } from \"../constants\";\r\n\r\nconst CustomSnackbar = props => {\r\n  const { message, open, closeHandler } = props;\r\n  return (\r\n    <Snackbar\r\n      open={open}\r\n      autoHideDuration={6000}\r\n      onClose={closeHandler}\r\n      message={message}\r\n      anchorOrigin={{\r\n        vertical: \"bottom\",\r\n        horizontal: \"left\"\r\n      }}\r\n      action={[\r\n        <IconButton\r\n          key=\"close\"\r\n          aria-label=\"Close\"\r\n          color=\"inherit\"\r\n          // className={classes.close}\r\n          onClick={closeHandler}\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\nCustomSnackbar.propTypes = {\r\n  message: PropTypes.string.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  closeHandler: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  open: state.wrapperReducer.isSnackBarOpened,\r\n  message: state.wrapperReducer.message\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  closeHandler: () =>\r\n    dispatch({ type: TOGGLE_SNACKBAR, payload: { isSnackBarOpened: false } })\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(CustomSnackbar);\r\n","import { NavLink } from \"react-router-dom\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport InboxIcon from \"@material-ui/core/SvgIcon/SvgIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { INITIAL_PARAMETERS } from \"../../constants/intialParameters\";\r\n\r\nexport function RenderCollapsibleMenuItem({\r\n  category,\r\n  page,\r\n  classes,\r\n  customIcon: CustomIcon,\r\n  activeCategory,\r\n  activePage,\r\n  menuMinimized\r\n}) {\r\n  return (\r\n    <NavLink\r\n      to={`/journal/${category}/${page}`}\r\n      exact\r\n      className={classes.navlink}\r\n      activeClassName={classes.navlinkActive}\r\n      aria-current=\"page\"\r\n    >\r\n      <ListItem button className={classes.nested} disableGutters>\r\n        <ListItemIcon\r\n          classes={{\r\n            root: classes.listIconRoot\r\n          }}\r\n        >\r\n          {CustomIcon ? (\r\n            <CustomIcon\r\n              color={\r\n                activeCategory === category && activePage === page\r\n                  ? \"primary\"\r\n                  : undefined\r\n              }\r\n            />\r\n          ) : (\r\n            <InboxIcon\r\n              color={\r\n                activeCategory === category && activePage === page\r\n                  ? \"primary\"\r\n                  : undefined\r\n              }\r\n            />\r\n          )}\r\n        </ListItemIcon>\r\n        {menuMinimized && (\r\n          <ListItemText\r\n            primaryTypographyProps={{\r\n              color:\r\n                activeCategory === category && activePage === page\r\n                  ? \"primary\"\r\n                  : undefined\r\n            }}\r\n          >\r\n            {INITIAL_PARAMETERS[category].pages[page].navigationLabel}\r\n          </ListItemText>\r\n        )}\r\n      </ListItem>\r\n    </NavLink>\r\n  );\r\n}\r\n\r\nRenderCollapsibleMenuItem.defaultProps = {\r\n  customIcon: undefined,\r\n  activePage: undefined\r\n};\r\n\r\nRenderCollapsibleMenuItem.propTypes = {\r\n  category: PropTypes.string.isRequired,\r\n  page: PropTypes.string.isRequired,\r\n  classes: PropTypes.shape({}).isRequired,\r\n  customIcon: PropTypes.func,\r\n  activeCategory: PropTypes.string.isRequired,\r\n  activePage: PropTypes.string,\r\n  menuMinimized: PropTypes.bool.isRequired\r\n};\r\n","import React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { NavLink, withRouter } from \"react-router-dom\";\r\nimport List from \"@material-ui/core/List/List\";\r\nimport ListItem from \"@material-ui/core/ListItem/ListItem\";\r\nimport Collapse from \"@material-ui/core/Collapse/Collapse\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon/ListItemIcon\";\r\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport InboxIcon from \"@material-ui/icons/MoveToInbox\";\r\nimport ListItemText from \"@material-ui/core/ListItemText/ListItemText\";\r\nimport Grid from \"@material-ui/core/Grid/Grid\";\r\nimport classNames from \"classnames\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { SET_EXPANDED_INDEX } from \"../../constants\";\r\nimport { INITIAL_PARAMETERS } from \"../../constants/intialParameters\";\r\nimport { RenderCollapsibleMenuItem } from \"./RenderCollapsibleMenuItem\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  nested: {\r\n    paddingLeft: theme.spacing.unit * 2\r\n  },\r\n  navlink: {\r\n    textDecoration: \"none\"\r\n  },\r\n  navlinkActive: {\r\n    borderLeft: `3px solid ${theme.palette.primary.main}`,\r\n    display: \"block\",\r\n    opacity: \"0.9\"\r\n  },\r\n  activeCategory: {\r\n    backgroundColor: \"rgba(0, 0, 0, 0.08)\",\r\n    color: \"red\"\r\n  },\r\n  firstLevelListItem: {\r\n    paddingLeft: theme.spacing.unit,\r\n    paddingRight: theme.spacing.unit\r\n  },\r\n  listIconRoot: {\r\n    marginRight: 0\r\n  },\r\n  activeListItem: {\r\n    color: theme.palette.primary\r\n  }\r\n}));\r\n\r\nconst getArrowSymbol = (index, expandedIndex, value) => {\r\n  const isCollapsed = index === expandedIndex ? value : false;\r\n  return isCollapsed ? <ExpandLess /> : <ExpandMore />;\r\n};\r\n\r\n/* function checkIfPageIsAllowed(page, functions) {\r\n  return (\r\n    !page.hidden &&\r\n    page.requiresFunction &&\r\n    page.requiresFunction.some(\r\n      ({ functionName }) =>\r\n        functions.includes(functionName) || functionName === \"any\"\r\n    )\r\n  );\r\n}\r\n\r\nconst getAllowedMenuItems = (pages, functions) =>\r\n  Object.keys(pages).filter(pageName =>\r\n    checkIfPageIsAllowed(pages[pageName], functions)\r\n  ); */\r\n\r\nconst CollapsableMenuContainer = ({\r\n  onClick,\r\n  expandedIndex,\r\n  value,\r\n  isMenuMinimized,\r\n  match: {\r\n    params: { category: activeCategory, page: activePage }\r\n  },\r\n  allowedActions\r\n}) => {\r\n  const classes = getStyles();\r\n  return (\r\n    <List disablePadding>\r\n      {Object.keys(allowedActions)\r\n        .filter(category => !INITIAL_PARAMETERS[category].hidden)\r\n        .map((category, index) => {\r\n          const CustomCategoryIcon = INITIAL_PARAMETERS[category].icon;\r\n          if (!INITIAL_PARAMETERS[category].pages) {\r\n            return (\r\n              <NavLink\r\n                key={category}\r\n                to={`/journal/${category}/`}\r\n                exact\r\n                className={classes.navlink}\r\n                activeClassName={classes.navlinkActive}\r\n                aria-current=\"page\"\r\n              >\r\n                <ListItem\r\n                  className={classNames(classes.firstLevelListItem, {\r\n                    [classes.activeCategory]: category === activeCategory\r\n                  })}\r\n                  divider\r\n                  button\r\n                >\r\n                  <ListItemIcon\r\n                    classes={{\r\n                      root: classes.listIconRoot\r\n                    }}\r\n                  >\r\n                    {CustomCategoryIcon ? (\r\n                      <CustomCategoryIcon\r\n                        color={\r\n                          category === activeCategory ? \"primary\" : undefined\r\n                        }\r\n                      />\r\n                    ) : (\r\n                      <InboxIcon\r\n                        color={\r\n                          category === activeCategory ? \"primary\" : undefined\r\n                        }\r\n                      />\r\n                    )}\r\n                  </ListItemIcon>\r\n                  {isMenuMinimized && (\r\n                    <ListItemText\r\n                      inset\r\n                      primaryTypographyProps={{\r\n                        color:\r\n                          category === activeCategory ? \"primary\" : undefined\r\n                      }}\r\n                      primary={\r\n                        <Grid container>\r\n                          {INITIAL_PARAMETERS[category].label}\r\n                        </Grid>\r\n                      }\r\n                    />\r\n                  )}\r\n                </ListItem>\r\n              </NavLink>\r\n            );\r\n          }\r\n          return (\r\n            <React.Fragment key={category}>\r\n              <ListItem\r\n                className={classNames(classes.firstLevelListItem, {\r\n                  [classes.activeCategory]: category === activeCategory\r\n                })}\r\n                divider\r\n                button\r\n                onClick={() => {\r\n                  onClick(index);\r\n                }}\r\n              >\r\n                <ListItemIcon\r\n                  classes={{\r\n                    root: classes.listIconRoot\r\n                  }}\r\n                >\r\n                  {CustomCategoryIcon ? <CustomCategoryIcon /> : <InboxIcon />}\r\n                </ListItemIcon>\r\n\r\n                {isMenuMinimized && (\r\n                  <ListItemText\r\n                    inset\r\n                    primary={\r\n                      <Grid container>\r\n                        {INITIAL_PARAMETERS[category].label}\r\n                      </Grid>\r\n                    }\r\n                  />\r\n                )}\r\n                <ListItemIcon\r\n                  classes={{\r\n                    root: classes.listIconRoot\r\n                  }}\r\n                >\r\n                  {getArrowSymbol(index, expandedIndex, value)}\r\n                </ListItemIcon>\r\n              </ListItem>\r\n\r\n              <Collapse in={index === expandedIndex && value} unmountOnExit>\r\n                <List disablePadding>\r\n                  {Object.keys(allowedActions[category]).map(page => {\r\n                    const CustomIcon =\r\n                      INITIAL_PARAMETERS[category].pages[page].icon;\r\n                    return (\r\n                      <RenderCollapsibleMenuItem\r\n                        category={category}\r\n                        page={page}\r\n                        classes={classes}\r\n                        key={`${category}-${page}`}\r\n                        customIcon={CustomIcon}\r\n                        activeCategory={activeCategory}\r\n                        activePage={activePage}\r\n                        menuMinimized={isMenuMinimized}\r\n                      />\r\n                    );\r\n                  })}\r\n                </List>\r\n              </Collapse>\r\n            </React.Fragment>\r\n          );\r\n        })}\r\n    </List>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  expandedIndex: state.collapsableMenuReducer.expandedIndex,\r\n  value: state.collapsableMenuReducer.value,\r\n  functions: state.auth.functions,\r\n  allowedActions: state.wrapperReducer.allowedActions\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onClick: index =>\r\n    dispatch({ type: SET_EXPANDED_INDEX, payload: { expandedIndex: index } })\r\n});\r\n\r\nCollapsableMenuContainer.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n  expandedIndex: PropTypes.number.isRequired,\r\n  value: PropTypes.bool.isRequired,\r\n  isMenuMinimized: PropTypes.bool.isRequired,\r\n  functions: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  allowedActions: PropTypes.shape({}).isRequired,\r\n  match: PropTypes.shape({\r\n    params: PropTypes.shape({\r\n      category: PropTypes.string.isRequired\r\n    })\r\n  }).isRequired\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(CollapsableMenuContainer)\r\n);\r\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { HIDE_CONFIRM_DIALOG } from \"../constants\";\n\nconst ConfirmDialog = props => {\n  const { confirmDialog, closeHandler, ...rest } = props;\n  return (\n    <Dialog\n      open={confirmDialog.open}\n      disableBackdropClick\n      disableEscapeKeyDown\n      {...rest}\n      style={{ zIndex: 2000 }}\n    >\n      <DialogTitle>\n        {confirmDialog.title ? confirmDialog.title : \"Подтверждение операции\"}\n      </DialogTitle>\n      <DialogContent>\n        {confirmDialog.mainText\n          ? `Вы действительно хотите ${confirmDialog.mainText}`\n          : undefined}\n        {confirmDialog.mainContent ? confirmDialog.mainContent : undefined}\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" variant=\"outlined\" onClick={closeHandler}>\n          {confirmDialog.secondaryButtonText}\n        </Button>\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={confirmDialog.primaryButtonHandler}\n          disabled={confirmDialog.primaryButtonDisabled}\n        >\n          {confirmDialog.primaryButtonText}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nConfirmDialog.propTypes = {\n  confirmDialog: PropTypes.shape({\n    open: PropTypes.bool.isRequired,\n    mainText: PropTypes.string,\n    secondaryButtonText: PropTypes.string.isRequired,\n    primaryButtonText: PropTypes.string.isRequired,\n    primaryButtonHandler: PropTypes.func\n  }).isRequired\n};\n\nconst mapStateToProps = state => ({\n  confirmDialog: state.wrapperReducer.confirmDialog\n});\n\nconst mapDispatchToProps = dispatch => ({\n  closeHandler: () =>\n    dispatch({\n      type: HIDE_CONFIRM_DIALOG\n    })\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ConfirmDialog);\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  LinearProgress\r\n} from \"@material-ui/core\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { cancelButton } from \"./modalWrapper/buttons\";\r\nimport { CLOSE_CONFIRM_DIALOG_FORMIK } from \"../constants\";\r\nimport { FormikMUI } from \"./formikMUi/formikNewRealisation\";\r\nimport CompletePromiseThenRenderComponent, {\r\n  defaultPreloader\r\n} from \"./completePromiseThenRenderComponent\";\r\nimport { findFieldsWithDictThenConstructArrayToDownload } from \"../utils/commonFormFunctions\";\r\nimport { defaultErrorHandler } from \"../utils/defaultErrorHandler\";\r\n\r\nconst ConfirmDialogFormik = props => {\r\n  const {\r\n    confirmDialog: {\r\n      title,\r\n      open,\r\n      initialValues,\r\n      primaryButtonHandler,\r\n      formObj,\r\n      primaryButtonText,\r\n      additionalStatusProps\r\n    },\r\n    closeDialog\r\n  } = props;\r\n  let refToFormSubmitFunc = null;\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      disableBackdropClick\r\n      disableEscapeKeyDown\r\n    >\r\n      <DialogTitle>{title}</DialogTitle>\r\n      <DialogContent>\r\n        <CompletePromiseThenRenderComponent\r\n          config={findFieldsWithDictThenConstructArrayToDownload(formObj)}\r\n          Component={FormikMUI}\r\n          errorHandler={defaultErrorHandler}\r\n          PreloaderComponent={defaultPreloader}\r\n          initialValues={initialValues}\r\n          formObj={formObj}\r\n          onSubmit={primaryButtonHandler}\r\n          bindFormSubmit={ref => {\r\n            refToFormSubmitFunc = ref;\r\n          }}\r\n          additionalStatusProps={additionalStatusProps}\r\n          bindIsSubmitting={setIsSubmitting}\r\n        />\r\n        {isSubmitting && <LinearProgress />}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {cancelButton(closeDialog)}\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          disabled={isSubmitting}\r\n          onClick={() => refToFormSubmitFunc()}\r\n        >\r\n          {primaryButtonText}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nConfirmDialogFormik.propTypes = {\r\n  confirmDialog: PropTypes.shape({\r\n    open: PropTypes.bool.isRequired,\r\n    formObj: PropTypes.shape().isRequired,\r\n    primaryButtonText: PropTypes.string.isRequired,\r\n    initialValues: PropTypes.shape().isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    primaryButtonHandler: PropTypes.func.isRequired\r\n  }).isRequired,\r\n  closeDialog: PropTypes.func.isRequired\r\n};\r\nconst mapStateToProps = state => ({\r\n  confirmDialog: state.wrapperReducer.confirmDialogFormik\r\n});\r\nconst mapDispatchToProps = dispatch => ({\r\n  closeDialog: () => dispatch({ type: CLOSE_CONFIRM_DIALOG_FORMIK })\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ConfirmDialogFormik);\r\n","import {\r\n  AppBar,\r\n  Toolbar,\r\n  IconButton,\r\n  Button,\r\n  Typography\r\n} from \"@material-ui/core\";\r\nimport { Menu as MenuIcon, AccountCircle } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { PUSH_MODAL, TOOGLE_MENU_COLLAPSED } from \"../../constants\";\r\nimport { logout } from \"../../actions\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen\r\n    })\r\n  },\r\n  menuButton: {\r\n    marginLeft: 6,\r\n    marginRight: 18\r\n  },\r\n  grow: {\r\n    flexGrow: 1\r\n  }\r\n}));\r\n\r\nconst CustomAppBar = ({\r\n  pushModal,\r\n  logout,\r\n  userId,\r\n  surnameInitials,\r\n  toggleLeftMenu\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <AppBar position=\"static\" className={classes.appBar}>\r\n      <Toolbar>\r\n        <img\r\n          src=\"/logo.png\"\r\n          alt=\"logo\"\r\n          style={{\r\n            maxHeight: \"50px\",\r\n            color: \"inherit\"\r\n          }}\r\n        />\r\n        <IconButton\r\n          onClick={toggleLeftMenu}\r\n          className={classes.menuButton}\r\n          color=\"inherit\"\r\n          aria-label=\"Menu\"\r\n        >\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <div className={classes.grow}>\r\n          <Typography\r\n            variant=\"subtitle1\"\r\n            color=\"inherit\"\r\n            style={{ width: \"550px\", lineHeight: \"inherit\" }}\r\n          >\r\n            «ХРАМ ОНЛАЙН»\r\n          </Typography>\r\n        </div>\r\n        <Button\r\n          color=\"inherit\"\r\n          onClick={() => {\r\n            pushModal({\r\n              category: \"serviceMan\",\r\n              mode: \"profile\",\r\n              shouldWrapInsideTabs: false,\r\n              item: { uniqueId: userId }\r\n            });\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\"\r\n            }}\r\n          >\r\n            <Typography\r\n              variant=\"subtitle1\"\r\n              color=\"inherit\"\r\n              noWrap\r\n              style={{ marginRight: \"4px\" }}\r\n            >\r\n              {surnameInitials}\r\n            </Typography>\r\n            <AccountCircle />\r\n          </div>\r\n        </Button>\r\n        <Button variant=\"text\" color=\"inherit\" size=\"medium\" onClick={logout}>\r\n          Выйти\r\n        </Button>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nCustomAppBar.propTypes = {\r\n  pushModal: PropTypes.func.isRequired,\r\n  logout: PropTypes.func.isRequired,\r\n  userId: PropTypes.number.isRequired,\r\n  surnameInitials: PropTypes.string.isRequired,\r\n  toggleLeftMenu: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  userId: state.auth.userId,\r\n  surnameInitials: state.auth.surnameInitials\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  toggleLeftMenu: () => dispatch({ type: TOOGLE_MENU_COLLAPSED }),\r\n  pushModal: modal => dispatch({ type: PUSH_MODAL, payload: modal }),\r\n  logout: () => dispatch(logout())\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(CustomAppBar);\r\n","import React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport Grid from \"@material-ui/core/Grid/Grid\";\r\nimport Paper from \"@material-ui/core/Paper/Paper\";\r\nimport { Form, Formik } from \"formik\";\r\nimport { connect } from \"react-redux\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { isEqual } from \"lodash\";\r\nimport { SET_COMPUTED_FILTERS } from \"../../constants\";\r\nimport ShadowedOutlinedButton from \"../ShadowedOutlinedButton\";\r\nimport { calcFieldWidth } from \"../formikMUi/utils/calcFieldWidth\";\r\nimport { constructInitialValuesForEmptyFormWithOutBlocks } from \"../formikMUi/utils/initialValuesUtils\";\r\nimport { renderField } from \"../formikMUi/renderField\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  button: {\r\n    margin: theme.spacing.unit\r\n  },\r\n  input: {\r\n    display: \"none\"\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit\r\n  },\r\n  panel: { marginBottom: theme.spacing.unit, padding: theme.spacing.unit },\r\n  field: {\r\n    width: \"100%\"\r\n  }\r\n}));\r\n\r\n// в redux хранится пустой объект поэтому необходимо убедиться что он не пуст, чтобы проинициализировать форму\r\nconst getInitialValues = (computedFilters, filters) =>\r\n  Object.keys(computedFilters).length > 0\r\n    ? computedFilters\r\n    : constructInitialValuesForEmptyFormWithOutBlocks({ fields: filters });\r\n\r\nconst FilterPanel = props => {\r\n  const {\r\n    filters,\r\n    onApplyFiltersClick,\r\n    saveFilters,\r\n    isCollapsed,\r\n    computedFilters,\r\n    optionsMap\r\n  } = props;\r\n  const classes = getStyles();\r\n  return (\r\n    !isCollapsed && (\r\n      <Paper square elevation={5} className={classes.panel}>\r\n        <Formik\r\n          enableReinitialize\r\n          initialValues={getInitialValues(computedFilters, filters)}\r\n          onSubmit={(values, { setSubmitting }) => {\r\n            saveFilters(values);\r\n            onApplyFiltersClick();\r\n            setSubmitting(false);\r\n          }}\r\n          initialStatus={{\r\n            optionsMap\r\n          }}\r\n          render={({\r\n            isSubmitting,\r\n            handleSubmit,\r\n            status,\r\n            initialValues,\r\n            setFieldValue,\r\n            setStatus\r\n          }) => {\r\n            if (!isEqual(optionsMap, status.optionsMap)) {\r\n              setStatus({ optionsMap });\r\n            }\r\n            return (\r\n              <Form>\r\n                <Grid container spacing={8}>\r\n                  {filters.map(filter => (\r\n                    <Grid key={filter.name} item {...calcFieldWidth(filter)}>\r\n                      {renderField({\r\n                        field: filter,\r\n                        classes,\r\n                        readOnly: false,\r\n                        initialValues,\r\n                        setFieldValue,\r\n                        status\r\n                      })}\r\n                    </Grid>\r\n                  ))}\r\n\r\n                  {/* Панель с кнопками */}\r\n                  <Grid\r\n                    item\r\n                    style={{ alignSelf: \"flex-end\", marginLeft: \"auto\" }}\r\n                  >\r\n                    <Grid container spacing={8}>\r\n                      <Grid item>\r\n                        <ShadowedOutlinedButton\r\n                          variant=\"outlined\"\r\n                          onClick={() => {\r\n                            saveFilters({});\r\n                            handleSubmit();\r\n                          }}\r\n                          disabled={isSubmitting}\r\n                        >\r\n                          Отменить\r\n                        </ShadowedOutlinedButton>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <ShadowedOutlinedButton\r\n                          type=\"submit\"\r\n                          variant=\"outlined\"\r\n                          disabled={isSubmitting}\r\n                          color=\"primary\"\r\n                        >\r\n                          Применить\r\n                        </ShadowedOutlinedButton>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </Form>\r\n            );\r\n          }}\r\n        />\r\n      </Paper>\r\n    )\r\n  );\r\n};\r\n\r\nFilterPanel.defaultProps = {\r\n  optionsMap: {}\r\n};\r\n\r\nFilterPanel.propTypes = {\r\n  onApplyFiltersClick: PropTypes.func.isRequired,\r\n  filters: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  saveFilters: PropTypes.func.isRequired,\r\n  optionsMap: PropTypes.shape({})\r\n};\r\nconst mapStateToProps = state => ({\r\n  isCollapsed: state.filtersReducer.isCollapsed,\r\n  computedFilters: state.filtersReducer.computedFilters,\r\n  optionsMap: state.filtersReducer.optionsMap\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  saveFilters: values =>\r\n    dispatch({ type: SET_COMPUTED_FILTERS, payload: values })\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(FilterPanel);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { Dialog, withWidth } from \"@material-ui/core\";\r\nimport {\r\n  MODAL_TAB_HAS_CHANGED,\r\n  TOGGLE_SNACKBAR,\r\n  TOGGLE_CONFIRM_DIALOG,\r\n  HIDE_CONFIRM_DIALOG,\r\n  DISABLE_PRIMARY_BTN_CONFIRM_DIALOG,\r\n  PUSH_MODAL,\r\n  REPLACE_HEAD_MODAL,\r\n  POP_HEAD_MODAL\r\n} from \"../../constants\";\r\n\r\nconst ModalWrapper = props => {\r\n  const {\r\n    width,\r\n    config: {\r\n      component: InnerComponent,\r\n      functionsToExecute = [],\r\n      forwardedProps,\r\n      ...restConfigProps\r\n    },\r\n    hideModal,\r\n    modal\r\n  } = props;\r\n  const additionalPassedProps = {};\r\n  functionsToExecute.forEach(({ func, passResultAs }) => {\r\n    additionalPassedProps[passResultAs] = func(modal);\r\n  });\r\n  // todo maxWidth={width === \"xl\" ? \"lg\" : width === \"lg\" ? \"md\" : width} - Женя!!!, перепиши странная конструкция\r\n  return (\r\n    <Dialog\r\n      open\r\n      disableEscapeKeyDown\r\n      disableBackdropClick\r\n      fullWidth\r\n      maxWidth={width === \"xl\" ? \"lg\" : width === \"lg\" ? \"md\" : width}\r\n    >\r\n      <InnerComponent\r\n        {...forwardedProps}\r\n        closeHandler={hideModal}\r\n        {...restConfigProps}\r\n        {...additionalPassedProps}\r\n        modal={modal}\r\n      />\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nModalWrapper.defaultProps = {\r\n  hideModal: undefined\r\n};\r\n\r\nModalWrapper.propTypes = {\r\n  modal: PropTypes.shape({\r\n    mode: PropTypes.string,\r\n    item: PropTypes.shape({\r\n      uniqueId: PropTypes.number.isRequired,\r\n      uuid: PropTypes.string\r\n    }),\r\n    category: PropTypes.string.isRequired,\r\n    page: PropTypes.string\r\n  }).isRequired,\r\n  allowedActions: PropTypes.shape({}).isRequired,\r\n  hideModal: PropTypes.func,\r\n  config: PropTypes.shape({\r\n    component: PropTypes.oneOfType([PropTypes.shape({}), PropTypes.func])\r\n      .isRequired\r\n  }).isRequired,\r\n  width: PropTypes.string.isRequired\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  tabChanged: tabNumber =>\r\n    dispatch({\r\n      type: MODAL_TAB_HAS_CHANGED,\r\n      payload: { openedTab: tabNumber }\r\n    }),\r\n  openSnackBar: message =>\r\n    dispatch({\r\n      type: TOGGLE_SNACKBAR,\r\n      payload: { message, isSnackBarOpened: true }\r\n    }),\r\n  openConfirmDialog: payload =>\r\n    dispatch({\r\n      type: TOGGLE_CONFIRM_DIALOG,\r\n      payload: { open: true, ...payload }\r\n    }),\r\n  closeConfirmDialog: () => dispatch({ type: HIDE_CONFIRM_DIALOG }),\r\n  disableConfirmDialogPrimaryBtn: value =>\r\n    dispatch({\r\n      type: DISABLE_PRIMARY_BTN_CONFIRM_DIALOG,\r\n      payload: { primaryButtonDisabled: value }\r\n    }),\r\n  pushModal: modal => dispatch({ type: PUSH_MODAL, payload: modal }),\r\n  replaceHeadModal: modal =>\r\n    dispatch({ type: REPLACE_HEAD_MODAL, payload: modal }),\r\n  popHeadModal: () => dispatch({ type: POP_HEAD_MODAL })\r\n});\r\n\r\nconst mapStateToProps = state => ({\r\n  openedTab: state.journalReducer.openedTab,\r\n  allowedActions: state.wrapperReducer.allowedActions\r\n});\r\n\r\nexport default withWidth()(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(ModalWrapper)\r\n);\r\n","import React from \"react\";\r\nimport MuiTable from \"mui-virtualized-table\";\r\nimport { connect } from \"react-redux\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { setPage, setRowsPerPage } from \"../actions\";\r\nimport \"./tableOverride.css\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  primaryColor: {\r\n    color: theme.palette.primary.main\r\n  }\r\n}));\r\n\r\nconst PaginatedTable = ({\r\n  data,\r\n  defaultPagination,\r\n  fetchJournalData,\r\n  count = 0,\r\n  setRowsPerPage,\r\n  rowsPerPage,\r\n  page,\r\n  setPage,\r\n  ...rest\r\n}) => {\r\n  const classes = getStyles();\r\n  return (\r\n    <MuiTable\r\n      data={data}\r\n      pagination={{\r\n        classes: {\r\n          root: classes.primaryColor,\r\n          selectIcon: classes.primaryColor\r\n        },\r\n        backIconButtonProps: {\r\n          color: \"primary\"\r\n        },\r\n        nextIconButtonProps: {\r\n          color: \"primary\"\r\n        },\r\n        count,\r\n        rowsPerPage,\r\n        page: page - 1, // material-ui's <TablePagination /> is 0-based\r\n        // rowsPerPageOptions: [5, 10, 25, 100, 1000],\r\n        onChangePage: (e, pageLocal) => {\r\n          setPage(pageLocal + 1);\r\n          fetchJournalData();\r\n        },\r\n        onChangeRowsPerPage: e => {\r\n          setPage(1);\r\n          setRowsPerPage(e.target.value);\r\n          fetchJournalData();\r\n        },\r\n        labelDisplayedRows: ({ from, to, count }) =>\r\n          `${from}-${to} из ${count}`,\r\n        labelRowsPerPage: \"Строк на странице\"\r\n      }}\r\n      isCellHovered={(column, rowData, hoveredColumn, hoveredRowData) =>\r\n        rowData.uniqueId && rowData.uniqueId === hoveredRowData.uniqueId\r\n      }\r\n      {...rest}\r\n      fixedRowCount={1}\r\n      includeHeaders\r\n    />\r\n  );\r\n};\r\n\r\nPaginatedTable.defaultProps = {};\r\n\r\nPaginatedTable.propTypes = {\r\n  setPage: PropTypes.func.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n  rowsPerPage: PropTypes.number.isRequired,\r\n  setRowsPerPage: PropTypes.func.isRequired,\r\n  count: PropTypes.number.isRequired\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setRowsPerPage: rowsPerPage => dispatch(setRowsPerPage(rowsPerPage)),\r\n  setPage: page => dispatch(setPage(page))\r\n});\r\n\r\nconst mapStateToProps = state => ({\r\n  rowsPerPage: state.journalReducer.pagination.rowsPerPage,\r\n  page: state.journalReducer.pagination.page\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PaginatedTable);\r\n","import { Button, Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nexport const PrivateAdditionalButtons = ({ buttons, computedFilters }) => {\r\n  return buttons.map(({ text, onClick, component: Component, ...rest }) => {\r\n    const onClickHandler = () => onClick({ computedFilters });\r\n    return (\r\n      <Grid item key={text}>\r\n        {Component ? (\r\n          <Component onClick={onClickHandler} {...rest}>\r\n            {text}\r\n          </Component>\r\n        ) : (\r\n          <Button onClick={onClickHandler} {...rest}>\r\n            {text}\r\n          </Button>\r\n        )}\r\n      </Grid>\r\n    );\r\n  });\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  computedFilters: state.filtersReducer.computedFilters\r\n});\r\n\r\nexport const AdditionalButtons = connect(mapStateToProps)(\r\n  PrivateAdditionalButtons\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { Button, Grid, Paper } from \"@material-ui/core\";\r\nimport { AutoSizer } from \"react-virtualized\";\r\nimport \"react-virtualized/styles.css\"; // only needs to be imported once\r\nimport { SET_SORT, TOGGLE_IS_COLLAPSED } from \"../../constants\";\r\nimport {\r\n  computeUrlThenFetchJournalData,\r\n  popHeadModal,\r\n  pushHeadModal,\r\n  setSortable\r\n} from \"../../actions\";\r\nimport FilterPanel from \"../filter-panel/index\";\r\nimport ModalWrapper from \"../modalWrapper\";\r\nimport PaginatedTable from \"../PaginatedTable\";\r\nimport ShadowedOutlinedButton from \"../ShadowedOutlinedButton\";\r\nimport { INITIAL_PARAMETERS } from \"../../constants/intialParameters\";\r\nimport { AdditionalButtons } from \"./additionalButtons\";\r\n\r\nconst PrivateJournal = ({\r\n  fetchedData,\r\n  initialParameters: {\r\n    additionalActionPanelButtons: { leftPanel = [], rightPanel = [] } = {},\r\n    filtersPanel,\r\n    tableHeader\r\n  },\r\n  sortable,\r\n  toggleFiltersPanel,\r\n  setSortableThenFetJournalData,\r\n  category,\r\n  page,\r\n  allowedActions,\r\n  popHeadModal,\r\n  openedModals,\r\n  pushModal,\r\n  computeUrlThenFetchJournalDataW\r\n}) => {\r\n  const currentPageAllowedActions = Array.isArray(allowedActions[category])\r\n    ? allowedActions[category]\r\n    : allowedActions[category][page];\r\n  return (\r\n    <Grid\r\n      direction=\"column\"\r\n      container\r\n      wrap=\"nowrap\"\r\n      style={{ width: \"100%\", height: \"calc(100vh -  80px)\" }}\r\n    >\r\n      {/* Панель действий - начало */}\r\n      <Paper\r\n        square\r\n        style={{ padding: \"8px\", marginBottom: \"8px\" }}\r\n        elevation={5}\r\n      >\r\n        <Grid container justify=\"space-between\" direction=\"row\">\r\n          {/* Левая часть панели */}\r\n          <Grid>\r\n            <Grid container spacing={8}>\r\n              <Grid item>\r\n                <ShadowedOutlinedButton\r\n                  variant=\"outlined\"\r\n                  onClick={() => {\r\n                    toggleFiltersPanel();\r\n                  }}\r\n                >\r\n                  Фильтрация\r\n                </ShadowedOutlinedButton>\r\n              </Grid>\r\n              <AdditionalButtons buttons={leftPanel} />\r\n            </Grid>\r\n          </Grid>\r\n          {/* Правая часть панели */}\r\n          <Grid>\r\n            <Grid container spacing={8}>\r\n              <AdditionalButtons buttons={rightPanel} />\r\n              {currentPageAllowedActions.includes(\"create\") && (\r\n                <Grid item>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={() =>\r\n                      pushModal({\r\n                        category,\r\n                        page,\r\n                        mode: \"create\"\r\n                      })\r\n                    }\r\n                  >\r\n                    Создать\r\n                  </Button>\r\n                </Grid>\r\n              )}\r\n              {currentPageAllowedActions.includes(\"wizard\") && (\r\n                <Grid item>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={() =>\r\n                      pushModal({\r\n                        category,\r\n                        page,\r\n                        mode: \"wizard\"\r\n                      })\r\n                    }\r\n                  >\r\n                    Создать\r\n                  </Button>\r\n                </Grid>\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n      {/* Панель действий - конец */}\r\n\r\n      {/* Панель Фильтрации - начало */}\r\n      <FilterPanel\r\n        onApplyFiltersClick={() => computeUrlThenFetchJournalDataW()}\r\n        filters={filtersPanel.filters}\r\n      />\r\n\r\n      {/* Панель Фильтрации - конец */}\r\n\r\n      {/* //todo вынести следующий див в Отдельный компонент TableWrapper */}\r\n\r\n      <Paper\r\n        square\r\n        elevation={5}\r\n        style={{ height: \"100%\", padding: \"8px\", flex: \"0 1 auto\" }}\r\n      >\r\n        <AutoSizer>\r\n          {({ width, height }) => (\r\n            <PaginatedTable\r\n              fetchJournalData={() => computeUrlThenFetchJournalDataW()}\r\n              data={\r\n                Object.keys(fetchedData).length > 1\r\n                  ? // eslint-disable-next-line no-underscore-dangle\r\n                    Object.values(fetchedData._embedded)[0]\r\n                  : []\r\n              }\r\n              count={\r\n                fetchedData &&\r\n                fetchedData.page &&\r\n                fetchedData.page.totalElements\r\n                  ? fetchedData.page.totalElements\r\n                  : 0\r\n              }\r\n              columns={tableHeader.map(\r\n                ({ label, path, width: columnWidth }) => ({\r\n                  name: path,\r\n                  header: label,\r\n                  width:\r\n                    columnWidth ||\r\n                    (tableHeader.length < 5\r\n                      ? `${100 / tableHeader.length}%`\r\n                      : \"25%\"),\r\n                  cellProps: { style: { paddingRight: 0 } }\r\n                })\r\n              )}\r\n              width={width}\r\n              height={height - 50}\r\n              style={{ backgroundColor: \"white\" }}\r\n              onCellClick={(column, item) =>\r\n                pushModal({\r\n                  category,\r\n                  page,\r\n                  mode: \"view\",\r\n                  item\r\n                })\r\n              }\r\n              onHeaderClick={({ name }) => setSortableThenFetJournalData(name)}\r\n              orderBy={sortable.length > 0 ? sortable[0].path : undefined}\r\n              orderDirection={\r\n                sortable.length > 0 ? sortable[0].value : undefined\r\n              }\r\n              cellProps={(column, data) => {\r\n                if (Object.entries(data).length === 0) {\r\n                  return {\r\n                    style: {\r\n                      fontSize: \"15px\",\r\n                      fontWeight: \"bold\",\r\n                      overflow: \"hidden\"\r\n                    }\r\n                  };\r\n                }\r\n                return undefined;\r\n              }}\r\n            />\r\n          )}\r\n        </AutoSizer>\r\n      </Paper>\r\n      {openedModals.map((modal, index) => (\r\n        <ModalWrapper\r\n          key={modal.key}\r\n          modal={modal}\r\n          config={\r\n            INITIAL_PARAMETERS[modal.category].pages\r\n              ? INITIAL_PARAMETERS[modal.category].pages[modal.page].forms[\r\n                  modal.mode\r\n                ]\r\n              : INITIAL_PARAMETERS[modal.category].page.forms[modal.mode]\r\n          }\r\n          shouldWrapInsideTabs={modal.shouldWrapInsideTabs}\r\n          // кастыль чтоб верхушка всегда пересчитывалась, создавая фейковое измененеие свойства, но это приводит к пересчету 2-х модалок с макс индексами\r\n          hideModal={\r\n            openedModals.length - 1 === index\r\n              ? () => popHeadModal()\r\n              : popHeadModal\r\n          }\r\n          fetchJournalData={computeUrlThenFetchJournalDataW}\r\n        />\r\n      ))}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nPrivateJournal.defaultProps = {\r\n  page: undefined\r\n};\r\n\r\nPrivateJournal.propTypes = {\r\n  sortable: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      path: PropTypes.string,\r\n      value: PropTypes.string\r\n    })\r\n  ).isRequired,\r\n  setSortableThenFetJournalData: PropTypes.func.isRequired,\r\n  initialParameters: PropTypes.shape({}).isRequired,\r\n  fetchedData: PropTypes.shape({}).isRequired,\r\n  toggleFiltersPanel: PropTypes.func.isRequired,\r\n  computedFilters: PropTypes.shape({}).isRequired,\r\n  category: PropTypes.string.isRequired,\r\n  page: PropTypes.string,\r\n  computeUrlThenFetchJournalDataW: PropTypes.func.isRequired,\r\n  allowedActions: PropTypes.shape({}).isRequired,\r\n  pushModal: PropTypes.func.isRequired,\r\n  openedModals: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  popHeadModal: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  computedFilters: state.filtersReducer.computedFilters,\r\n  fetchedData: state.journalReducer.fetchedData,\r\n  sortable: state.journalReducer.sortable,\r\n  isCollapsed: state.filtersReducer.isCollapsed,\r\n  functions: state.auth.functions,\r\n  openedModals: state.journalReducer.modalState.openedModals,\r\n  allowedActions: state.wrapperReducer.allowedActions\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setSort: path => dispatch({ type: SET_SORT, payload: { path } }),\r\n  toggleFiltersPanel: () => dispatch({ type: TOGGLE_IS_COLLAPSED }),\r\n  setSortableThenFetJournalData: name =>\r\n    dispatch(setSortable(name)).then(() =>\r\n      dispatch(computeUrlThenFetchJournalData())\r\n    ),\r\n  pushModal: modal => dispatch(pushHeadModal(modal)),\r\n  popHeadModal: () => dispatch(popHeadModal()),\r\n  computeUrlThenFetchJournalDataW: () =>\r\n    dispatch(computeUrlThenFetchJournalData())\r\n});\r\n\r\nexport const Journal = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PrivateJournal);\r\n","import React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport Typography from \"@material-ui/core/es/Typography/Typography\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  container: { height: \"93vh\" },\r\n  btn: {\r\n    margin: theme.spacing.unit\r\n  },\r\n  messageContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"Space-Around\",\r\n    height: \"100%\",\r\n    width: \"100%\"\r\n  }\r\n}));\r\n\r\nconst defaultErrorMessage = \"Страница не найдена\";\r\n\r\nconst getErrorMessage = params => {\r\n  if (params) {\r\n    const { errorMessage } = params;\r\n    if (errorMessage) {\r\n      return errorMessage;\r\n    }\r\n  }\r\n  return defaultErrorMessage;\r\n};\r\n\r\nexport const DisplayErrorMessage = ({ errorMessage }) => {\r\n  const classes = getStyles();\r\n  return (\r\n    <div className={classes.messageContainer}>\r\n      <Typography variant=\"h3\">{errorMessage}</Typography>\r\n    </div>\r\n  );\r\n};\r\n\r\nDisplayErrorMessage.propTypes = {\r\n  errorMessage: PropTypes.string.isRequired\r\n};\r\n\r\nconst NoMatch = ({ match: { params }, history }) => {\r\n  const classes = getStyles();\r\n  const pushToMainPage = () => history.push(\"/\");\r\n  return (\r\n    <div className={classes.container}>\r\n      <Button\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        onClick={pushToMainPage}\r\n        className={classes.btn}\r\n      >\r\n        На главную\r\n      </Button>\r\n      <DisplayErrorMessage errorMessage={getErrorMessage(params)} />\r\n    </div>\r\n  );\r\n};\r\n\r\nNoMatch.propTypes = {\r\n  match: PropTypes.shape({}).isRequired,\r\n  history: PropTypes.shape({}).isRequired\r\n};\r\n\r\nexport default NoMatch;\r\n","import React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { Journal } from \"../journal\";\r\nimport { DisplayErrorMessage } from \"../no-match\";\r\n\r\nexport function GetJournalMainContent(props) {\r\n  const { initialParameters, page, category, allowedActions } = props;\r\n  if (\r\n    !initialParameters ||\r\n    !allowedActions[category] ||\r\n    !(Array.isArray(allowedActions[category])\r\n      ? true\r\n      : allowedActions[category][page])\r\n  ) {\r\n    return (\r\n      <div style={{ height: \"calc(100vh -  80px)\" }}>\r\n        <DisplayErrorMessage errorMessage=\"Такой страницы не существует\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (initialParameters.Component) {\r\n    const { Component, passProps = {} } = initialParameters;\r\n    return <Component {...passProps} />;\r\n  }\r\n\r\n  return (\r\n    <Journal\r\n      category={category}\r\n      page={page}\r\n      initialParameters={initialParameters}\r\n    />\r\n  );\r\n}\r\n\r\nGetJournalMainContent.defaultProps = {\r\n  page: undefined\r\n};\r\n\r\nGetJournalMainContent.propTypes = {\r\n  page: PropTypes.string,\r\n  category: PropTypes.string.isRequired,\r\n  allowedActions: PropTypes.shape({}).isRequired,\r\n  initialParameters: PropTypes.shape({}).isRequired\r\n};\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Typography\r\n} from \"@material-ui/core\";\r\nimport { closeScheduleCreationMaster } from \"../../../actions\";\r\nimport ShadowedOutlinedButton from \"../../ShadowedOutlinedButton\";\r\n\r\ntype PrivateScheduleCreationMasterProps = {\r\n  closeHandler: Function;\r\n  username: string;\r\n};\r\n\r\nconst PrivateScheduleCreationMaster = ({\r\n  closeHandler,\r\n  username\r\n}: PrivateScheduleCreationMasterProps) => {\r\n  const description = `Уважаемый ${username}, на выбранной Вами неделе не указано ни 1 богослужение. Для заполнения расписания вы можете воспользоваться мастером первоначальной настройки`;\r\n  return (\r\n    <Dialog\r\n      open\r\n      disableEscapeKeyDown\r\n      disableBackdropClick\r\n      fullWidth\r\n      maxWidth=\"lg\"\r\n    >\r\n      <DialogTitle>Заполенение расписания богослужений</DialogTitle>\r\n      <DialogContent>\r\n        <Typography variant=\"body1\">{description}</Typography>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <ShadowedOutlinedButton onClick={closeHandler}>\r\n          Отменить\r\n        </ShadowedOutlinedButton>\r\n        <Button variant=\"contained\" color=\"primary\">\r\n          Завершить\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\ntype stateProps = {\r\n  auth: {\r\n    surnameInitials: string;\r\n  };\r\n};\r\n\r\nconst mapStateToProps = (state: stateProps) => ({\r\n  username: state.auth.surnameInitials\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  closeHandler: () => dispatch(closeScheduleCreationMaster())\r\n});\r\nexport const ScheduleCreationMaster = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PrivateScheduleCreationMaster);\r\n","import React, { useEffect } from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\nimport { connect } from \"react-redux\";\r\nimport { Grid, Divider, CssBaseline, Drawer } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport axios from \"axios\";\r\nimport CustomSnackbar from \"../snackBar\";\r\nimport {\r\n  dispatchPushModal,\r\n  POP_HEAD_MODAL,\r\n  RESET_COMPUTED_FILTERS,\r\n  RESET_SORTABLE,\r\n  TOGGLE_IS_COLLAPSED\r\n} from \"../../constants\";\r\nimport CollapsableMenuContainer from \"../CollapsableMenuContainer\";\r\nimport ConfirmDialog from \"../confirmDialog\";\r\nimport ConfirmDialogFormik from \"../confirmDialogFormik\";\r\nimport CustomAppBar from \"../appBar/AppBar\";\r\nimport { customRouteParametersHandler } from \"../modalWrapper/utils/customRouteParametersHandler\";\r\nimport { GetJournalMainContent } from \"./getJournalMainContent\";\r\nimport {\r\n  computeUrlThenFetchJournalData,\r\n  loadFiltersOptions,\r\n  setBaseUrl,\r\n  setFilterPanelOptionsMap,\r\n  setPage\r\n} from \"../../actions\";\r\nimport {\r\n  findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks,\r\n  getOptionsMapBeforeLoading\r\n} from \"../../utils/commonFormFunctions\";\r\nimport { INITIAL_PARAMETERS } from \"../../constants/intialParameters\";\r\nimport { ScheduleCreationMaster } from \"../schedule/dialogs/scheduleCreationMaster\";\r\n\r\nconst getStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    height: \"789px\"\r\n  },\r\n  grow: {\r\n    flexGrow: 1\r\n  },\r\n  appBarShift: {\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen\r\n    })\r\n  },\r\n  hide: {\r\n    display: \"none\"\r\n  },\r\n  drawerPaper: {\r\n    position: \"relative\",\r\n    whiteSpace: \"nowrap\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen\r\n    }),\r\n    overflowX: \"hidden\"\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: \"hidden\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    width: theme.spacing.unit * 5,\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: theme.spacing.unit * 8\r\n    }\r\n  },\r\n  toolbar: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n    padding: \"0 4px\",\r\n    ...theme.mixins.toolbar\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    height: \"calc(100vh - 64px)\",\r\n    padding: theme.spacing.unit\r\n  }\r\n}));\r\n\r\nconst Wrapper = ({\r\n  match: {\r\n    params: { category, page, uniqueId }\r\n  },\r\n  isMenuMinimized,\r\n  confirmDialogIsOpen,\r\n  confirmDialogFormikIsOpen,\r\n  allowedActions,\r\n  resetFilterPanel,\r\n  toggleFilterPanel,\r\n  resetSortable,\r\n  setPage,\r\n  setBaseUrl,\r\n  computeUrlThenFetchJournalDataW,\r\n  loadFiltersOptionsMap,\r\n  setFiltersPanelOptionsMap,\r\n  scheduleCreationMasterIsOpen\r\n}) => {\r\n  const classes = getStyles();\r\n  let initialParameters;\r\n  if (INITIAL_PARAMETERS[category]) {\r\n    if (\r\n      INITIAL_PARAMETERS[category].pages &&\r\n      INITIAL_PARAMETERS[category].pages[page]\r\n    ) {\r\n      initialParameters = INITIAL_PARAMETERS[category].pages[page];\r\n    } else {\r\n      initialParameters = INITIAL_PARAMETERS[category].page;\r\n    }\r\n  }\r\n\r\n  // выполняет очистку при переходе в другую категорию или на другую страницу, а также строит новый Url и скачивает данные\r\n  useEffect(() => {\r\n    resetFilterPanel();\r\n    toggleFilterPanel(true);\r\n    resetSortable();\r\n    setPage(1);\r\n    if (initialParameters && initialParameters.url) {\r\n      setFiltersPanelOptionsMap(\r\n        getOptionsMapBeforeLoading(initialParameters.filtersPanel.filters)\r\n      );\r\n      // скачивает для панели фильтрации options\r\n      const filtersSource = axios.CancelToken.source();\r\n      loadFiltersOptionsMap(\r\n        findFieldsWithDictThenConstructArrayToDownloadWithOutBlocks({\r\n          fields: initialParameters.filtersPanel.filters\r\n        }),\r\n        filtersSource\r\n      );\r\n      setBaseUrl(initialParameters.url);\r\n      computeUrlThenFetchJournalDataW();\r\n      return () => {\r\n        filtersSource.cancel(\"Cancelling in cleanup\");\r\n      };\r\n    }\r\n  }, [\r\n    category,\r\n    computeUrlThenFetchJournalDataW,\r\n    initialParameters,\r\n    loadFiltersOptionsMap,\r\n    page,\r\n    resetFilterPanel,\r\n    resetSortable,\r\n    setBaseUrl,\r\n    setFiltersPanelOptionsMap,\r\n    setPage,\r\n    toggleFilterPanel\r\n  ]);\r\n\r\n  // Отроет модалку если будет передан UniqueId\r\n  useEffect(() => {\r\n    if (uniqueId) {\r\n      customRouteParametersHandler(uniqueId, initialParameters.url)\r\n        .then(data => {\r\n          if (typeof data.uniqueId === \"undefined\" || data.uniqueId === null) {\r\n            throw new Error(\r\n              \"не было получено необходимого параметра: uniqueId\"\r\n            );\r\n          }\r\n          const resultingModal = { category, page, mode: \"view\", item: data };\r\n          dispatchPushModal(resultingModal);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }, [category, initialParameters.url, page, uniqueId]);\r\n\r\n  return (\r\n    <Grid container direction=\"column\">\r\n      <CssBaseline />\r\n      <Grid item>\r\n        <CustomAppBar />\r\n      </Grid>\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        wrap=\"nowrap\"\r\n        style={{ height: \"calc(100vh - 80px)\" }}\r\n      >\r\n        <Grid item>\r\n          <Drawer\r\n            style={{\r\n              height: \"100%\",\r\n              margin: \"8px 0px 8px 8px\",\r\n              boxShadow:\r\n                \"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 1px 14px 0px rgba(0, 0, 0, 0.12)\"\r\n            }}\r\n            variant=\"permanent\"\r\n            classes={{\r\n              paper: classNames(\r\n                classes.drawerPaper,\r\n                !isMenuMinimized && classes.drawerPaperClose\r\n              )\r\n            }}\r\n            open={isMenuMinimized}\r\n            elevation={8}\r\n          >\r\n            <CollapsableMenuContainer isMenuMinimized={isMenuMinimized} />\r\n            <Divider />\r\n          </Drawer>\r\n        </Grid>\r\n        <Grid item className={classes.content}>\r\n          <GetJournalMainContent\r\n            allowedActions={allowedActions}\r\n            initialParameters={initialParameters}\r\n            category={category}\r\n            page={page}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <CustomSnackbar />\r\n      {confirmDialogIsOpen && <ConfirmDialog />}\r\n      {confirmDialogFormikIsOpen && <ConfirmDialogFormik />}\r\n      {scheduleCreationMasterIsOpen && <ScheduleCreationMaster />}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nWrapper.propTypes = {\r\n  match: PropTypes.shape({}).isRequired,\r\n  history: PropTypes.shape({}).isRequired,\r\n  isMenuMinimized: PropTypes.bool.isRequired,\r\n  resetFilterPanel: PropTypes.func.isRequired,\r\n  toggleFilterPanel: PropTypes.func.isRequired,\r\n  resetSortable: PropTypes.func.isRequired,\r\n  confirmDialogIsOpen: PropTypes.bool.isRequired,\r\n  confirmDialogFormikIsOpen: PropTypes.bool.isRequired,\r\n  allowedActions: PropTypes.shape({}).isRequired,\r\n  setPage: PropTypes.func.isRequired,\r\n  setBaseUrl: PropTypes.func.isRequired,\r\n  loadFiltersOptionsMap: PropTypes.func.isRequired,\r\n  setFiltersPanelOptionsMap: PropTypes.func.isRequired,\r\n  scheduleCreationMasterIsOpen: PropTypes.bool.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  isMenuMinimized: state.collapsableMenuReducer.isMenuMinimized,\r\n  expandedIndex: state.collapsableMenuReducer.expandedIndex,\r\n  value: state.collapsableMenuReducer.value,\r\n  confirmDialogIsOpen: state.wrapperReducer.confirmDialog.open,\r\n  confirmDialogFormikIsOpen: state.wrapperReducer.confirmDialogFormik.open,\r\n  modalIsShowed: state.journalReducer.modalState.isModalShowed,\r\n  openedModals: state.journalReducer.modalState.openedModals,\r\n  allowedActions: state.wrapperReducer.allowedActions,\r\n  scheduleCreationMasterIsOpen:\r\n    state.wrapperReducer.scheduleCreationMasterIsOpen\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  toggleFilterPanel: isCollapsed =>\r\n    dispatch({ type: TOGGLE_IS_COLLAPSED, payload: { isCollapsed } }),\r\n  resetFilterPanel: () => dispatch({ type: RESET_COMPUTED_FILTERS }),\r\n  resetSortable: () => dispatch({ type: RESET_SORTABLE }),\r\n  popHeadModal: () => dispatch({ type: POP_HEAD_MODAL }),\r\n  setPage: page => dispatch(setPage(page)),\r\n  setBaseUrl: url => dispatch(setBaseUrl(url)),\r\n  computeUrlThenFetchJournalDataW: () =>\r\n    dispatch(computeUrlThenFetchJournalData()),\r\n  loadFiltersOptionsMap: (config, source) =>\r\n    dispatch(loadFiltersOptions(config, source)),\r\n  setFiltersPanelOptionsMap: optionsMap =>\r\n    dispatch(setFilterPanelOptionsMap(optionsMap))\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Wrapper);\r\n","import axios from \"axios\";\nimport { defaultErrorHandler } from \"../../../utils/defaultErrorHandler\";\n\nexport const customRouteParametersHandler = (uniqueId, url) =>\n  axios\n    .get(`${url}/${uniqueId}`)\n    .then(({ data }) => data)\n    .catch(er => defaultErrorHandler(er));\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport * as PropTypes from \"prop-types\";\r\n\r\nconst PrivateRoute = ({ component: Component, isAuthenticated, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={props =>\r\n      isAuthenticated ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/\",\r\n            state: { from: props.location }\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nPrivateRoute.propTypes = {\r\n  component: PropTypes.oneOfType([PropTypes.func, PropTypes.object]).isRequired,\r\n  isAuthenticated: PropTypes.bool.isRequired,\r\n  location: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  isAuthenticated: state.auth.isAuthenticated\r\n});\r\n\r\nexport default connect(mapStateToProps)(PrivateRoute);\r\n","import React from \"react\";\r\nimport { Router, Route, Switch } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\n// todo delete me после того как MUI станет 4-й версии\r\nimport \"../initStylesMUI\";\r\nimport { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport { indigo } from \"@material-ui/core/colors\";\r\nimport Login from \"./login\";\r\nimport Wrapper from \"./wrapper\";\r\nimport PrivateRoute from \"./PrivateRoute\";\r\nimport NoMatch from \"./no-match\";\r\nimport { store, persistor } from \"../store\";\r\nimport customGlobalHistory from \"../customGlobalHistory\";\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: indigo,\r\n    // secondary: { main: \"#484848\" }\r\n    secondary: { main: \"#890706\" }\r\n  },\r\n  typography: {\r\n    useNextVariants: true\r\n  }\r\n});\r\n\r\nconst App = () => (\r\n  <Provider store={store}>\r\n    <PersistGate loading={null} persistor={persistor}>\r\n      <ThemeProvider theme={theme}>\r\n        <Router history={customGlobalHistory}>\r\n          <Switch>\r\n            <Route path=\"/\" exact component={Login} />\r\n            <PrivateRoute\r\n              path={[\r\n                \"/journal/:category\",\r\n                \"/journal/:category/:uniqueId([/\\\\d]+)\",\r\n                \"/journal/:category/:page([a-z]+)\",\r\n                \"/journal/:category/:page/:uniqueId([/\\\\d]+)\"\r\n              ]}\r\n              exact\r\n              component={Wrapper}\r\n            />\r\n            <Route path=\"/esia/:token\" component={Login} exact />\r\n            <Route path=\"/error/:errorMessage\" component={NoMatch} />\r\n            <Route component={NoMatch} />\r\n          </Switch>\r\n        </Router>\r\n      </ThemeProvider>\r\n    </PersistGate>\r\n  </Provider>\r\n);\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"./index.css\";\n\nconst rootElement = document.getElementById(\"root\");\nrender(<App />, rootElement);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}